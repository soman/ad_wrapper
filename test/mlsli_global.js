/*
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2014 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */
(function(b,a){if(typeof define==="function"&&define.amd){define(a)}else{if(typeof exports==="object"){module.exports=a()}else{b.returnExports=a()}}}(this,function(){var h=Array.prototype;var ad=Object.prototype;var z=Function.prototype;var az=String.prototype;var ab=Number.prototype;var a=h.slice;var f=h.splice;var d=h.push;var g=h.unshift;var k=z.call;var b=ad.toString;var M=function(e){return ad.toString.call(e)==="[object Function]"};var O=function(e){return ad.toString.call(e)==="[object RegExp]"};var L=function L(e){return b.call(e)==="[object Array]"};var P=function P(e){return b.call(e)==="[object String]"};var K=function K(aT){var aS=b.call(aT);var e=aS==="[object Arguments]";if(!e){e=!L(aS)&&aT!==null&&typeof aT==="object"&&typeof aT.length==="number"&&aT.length>=0&&M(aT.callee)}return e};var aC=Object.defineProperty&&(function(){try{Object.defineProperty({},"x",{});return true}catch(aS){return false}}());var o;if(aC){o=function(aU,aT,aS,e){if(!e&&(aT in aU)){return}Object.defineProperty(aU,aT,{configurable:true,enumerable:false,writable:true,value:aS})}}else{o=function(aU,aT,aS,e){if(!e&&(aT in aU)){return}aU[aT]=aS}}var n=function(aU,aS,e){for(var aT in aS){if(ad.hasOwnProperty.call(aS,aT)){o(aU,aT,aS[aT],e)}}};function aG(e){e=+e;if(e!==e){e=0}else{if(e!==0&&e!==(1/0)&&e!==-(1/0)){e=(e>0||-1)*Math.floor(Math.abs(e))}}return e}function N(e){var aS=typeof e;return(e===null||aS==="undefined"||aS==="boolean"||aS==="number"||aS==="string")}function aK(e){var aT,aU,aS;if(N(e)){return e}aU=e.valueOf;if(M(aU)){aT=aU.call(e);if(N(aT)){return aT}}aS=e.toString;if(M(aS)){aT=aS.call(e);if(N(aT)){return aT}}throw new TypeError()}var aJ=function(e){if(e==null){throw new TypeError("can't convert "+e+" to object")}return Object(e)};var aL=function aL(e){return e>>>0};function v(){}n(z,{bind:function i(aY){var aX=this;if(!M(aX)){throw new TypeError("Function.prototype.bind called on incompatible "+aX)}var e=a.call(arguments,1);var aS=function(){if(this instanceof aT){var aZ=aX.apply(this,e.concat(a.call(arguments)));if(Object(aZ)===aZ){return aZ}return this}else{return aX.apply(aY,e.concat(a.call(arguments)))}};var aV=Math.max(0,aX.length-e.length);var aU=[];for(var aW=0;aW<aV;aW++){aU.push("$"+aW)}var aT=Function("binder","return function ("+aU.join(",")+"){return binder.apply(this,arguments)}")(aS);if(aX.prototype){v.prototype=aX.prototype;aT.prototype=new v();v.prototype=null}return aT}});var af=k.bind(ad.hasOwnProperty);var m;var p;var U;var V;var aB;if((aB=af(ad,"__defineGetter__"))){m=k.bind(ad.__defineGetter__);p=k.bind(ad.__defineSetter__);U=k.bind(ad.__lookupGetter__);V=k.bind(ad.__lookupSetter__)}var ar=(function(){var e=[1,2];var aS=e.splice();return e.length===2&&L(aS)&&aS.length===0}());n(h,{splice:function aq(aS,e){if(arguments.length===0){return[]}else{return f.apply(this,arguments)}}},ar);var at=(function(){var e={};h.splice.call(e,0,0,1);return e.length===1}());n(h,{splice:function aq(aT,aS){if(arguments.length===0){return[]}var e=arguments;this.length=Math.max(aG(this.length),0);if(arguments.length>0&&typeof aS!=="number"){e=a.call(arguments);if(e.length<2){e.push(this.length-aT)}else{e[1]=aG(aS)}}return f.apply(this,e)}},!at);var I=[].unshift(0)!==1;n(h,{unshift:function(){g.apply(this,arguments);return this.length}},I);n(Array,{isArray:L});var j=Object("a");var av=j[0]!=="a"||!(0 in j);var ai=function ah(e){var aS=true;var aT=true;if(e){e.call("foo",function(aU,aV,aW){if(typeof aW!=="object"){aS=false}});e.call([1],function(){aT=typeof this==="string"},"x")}return !!e&&aS&&aT};n(h,{forEach:function y(e){var aU=aJ(this),aV=av&&P(this)?this.split(""):aU,aW=arguments[1],aS=-1,aT=aV.length>>>0;if(!M(e)){throw new TypeError()}while(++aS<aT){if(aS in aV){e.call(aW,aV[aS],aS,aU)}}}},!ai(h.forEach));n(h,{map:function W(e){var aU=aJ(this),aW=av&&P(this)?this.split(""):aU,aT=aW.length>>>0,aV=Array(aT),aX=arguments[1];if(!M(e)){throw new TypeError(e+" is not a function")}for(var aS=0;aS<aT;aS++){if(aS in aW){aV[aS]=e.call(aX,aW[aS],aS,aU)}}return aV}},!ai(h.map));n(h,{filter:function x(e){var aU=aJ(this),aW=av&&P(this)?this.split(""):aU,aT=aW.length>>>0,aV=[],aY,aX=arguments[1];if(!M(e)){throw new TypeError(e+" is not a function")}for(var aS=0;aS<aT;aS++){if(aS in aW){aY=aW[aS];if(e.call(aX,aY,aS,aU)){aV.push(aY)}}}return aV}},!ai(h.filter));n(h,{every:function w(e){var aU=aJ(this),aV=av&&P(this)?this.split(""):aU,aT=aV.length>>>0,aW=arguments[1];if(!M(e)){throw new TypeError(e+" is not a function")}for(var aS=0;aS<aT;aS++){if(aS in aV&&!e.call(aW,aV[aS],aS,aU)){return false}}return true}},!ai(h.every));n(h,{some:function ap(e){var aU=aJ(this),aV=av&&P(this)?this.split(""):aU,aT=aV.length>>>0,aW=arguments[1];if(!M(e)){throw new TypeError(e+" is not a function")}for(var aS=0;aS<aT;aS++){if(aS in aV&&e.call(aW,aV[aS],aS,aU)){return true}}return false}},!ai(h.some));var ak=false;if(h.reduce){ak=typeof h.reduce.call("es5",function(e,aS,aT,aU){return aU})==="object"}n(h,{reduce:function aj(e){var aU=aJ(this),aW=av&&P(this)?this.split(""):aU,aT=aW.length>>>0;if(!M(e)){throw new TypeError(e+" is not a function")}if(!aT&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var aS=0;var aV;if(arguments.length>=2){aV=arguments[1]}else{do{if(aS in aW){aV=aW[aS++];break}if(++aS>=aT){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;aS<aT;aS++){if(aS in aW){aV=e.call(void 0,aV,aW[aS],aS,aU)}}return aV}},!ak);var am=false;if(h.reduceRight){am=typeof h.reduceRight.call("es5",function(e,aS,aT,aU){return aU})==="object"}n(h,{reduceRight:function al(e){var aU=aJ(this),aW=av&&P(this)?this.split(""):aU,aT=aW.length>>>0;if(!M(e)){throw new TypeError(e+" is not a function")}if(!aT&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var aV,aS=aT-1;if(arguments.length>=2){aV=arguments[1]}else{do{if(aS in aW){aV=aW[aS--];break}if(--aS<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(aS<0){return aV}do{if(aS in aW){aV=e.call(void 0,aV,aW[aS],aS,aU)}}while(aS--);return aV}},!am);var B=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;n(h,{indexOf:function J(aU){var aT=av&&P(this)?this.split(""):aJ(this),aS=aT.length>>>0;if(!aS){return -1}var e=0;if(arguments.length>1){e=aG(arguments[1])}e=e>=0?e:Math.max(0,aS+e);for(;e<aS;e++){if(e in aT&&aT[e]===aU){return e}}return -1}},B);var C=Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;n(h,{lastIndexOf:function S(aU){var aT=av&&P(this)?this.split(""):aJ(this),aS=aT.length>>>0;if(!aS){return -1}var e=aS-1;if(arguments.length>1){e=Math.min(e,aG(arguments[1]))}e=e>=0?e:aS-Math.abs(e);for(;e>=0;e--){if(e in aT&&aU===aT[e]){return e}}return -1}},C);var A=!({toString:null}).propertyIsEnumerable("toString"),F=(function(){}).propertyIsEnumerable("prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],t=s.length;n(Object,{keys:function Q(a0){var aV=M(a0),aU=K(a0),aW=a0!==null&&typeof a0==="object",aX=aW&&P(a0);if(!aW&&!aV&&!aU){throw new TypeError("Object.keys called on a non-object")}var a3=[];var a2=F&&aV;if(aX||aU){for(var aT=0;aT<a0.length;++aT){a3.push(String(aT))}}else{for(var aZ in a0){if(!(a2&&aZ==="prototype")&&af(a0,aZ)){a3.push(String(aZ))}}}if(A){var e=a0.constructor,a1=e&&e.prototype===a0;for(var aY=0;aY<t;aY++){var aS=s[aY];if(!(a1&&aS==="constructor")&&af(a0,aS)){a3.push(aS)}}}return a3}});var R=Object.keys&&(function(){return Object.keys(arguments).length===2}(1,2));var ae=Object.keys;n(Object,{keys:function Q(e){if(K(e)){return ae(h.slice.call(e))}else{return ae(e)}}},!R);var Y=-62198755200000;var Z="-000001";var D=Date.prototype.toISOString&&new Date(Y).toISOString().indexOf(Z)===-1;n(Date.prototype,{toISOString:function aH(){var aT,e,aU,aV,aS;if(!isFinite(this)){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}aV=this.getUTCFullYear();aS=this.getUTCMonth();aV+=Math.floor(aS/12);aS=(aS%12+12)%12;aT=[aS+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];aV=((aV<0?"-":(aV>9999?"+":""))+("00000"+Math.abs(aV)).slice(0<=aV&&aV<=9999?-4:-6));e=aT.length;while(e--){aU=aT[e];if(aU<10){aT[e]="0"+aU}}return(aV+"-"+aT.slice(0,2).join("-")+"T"+aT.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z")}},D);var l=false;try{l=(Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(Y).toJSON().indexOf(Z)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}}))}catch(u){}if(!l){Date.prototype.toJSON=function aI(e){var aS=Object(this),aU=aK(aS),aT;if(typeof aU==="number"&&!isFinite(aU)){return null}aT=aS.toISOString;if(typeof aT!=="function"){throw new TypeError("toISOString property is not callable")}return aT.call(aS)}}var aD=Date.parse("+033658-09-27T01:46:40.000Z")===1000000000000000;var c=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"));var r=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(!Date.parse||r||c||!aD){Date=(function(aW){function e(a7,a4,aZ,a1,a3,a6,a5){var a2=arguments.length;if(this instanceof aW){var a0=a2===1&&String(a7)===a7?new aW(e.parse(a7)):a2>=7?new aW(a7,a4,aZ,a1,a3,a6,a5):a2>=6?new aW(a7,a4,aZ,a1,a3,a6):a2>=5?new aW(a7,a4,aZ,a1,a3):a2>=4?new aW(a7,a4,aZ,a1):a2>=3?new aW(a7,a4,aZ):a2>=2?new aW(a7,a4):a2>=1?new aW(a7):new aW();a0.constructor=e;return a0}return aW.apply(this,arguments)}var aT=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");var aV=[0,31,59,90,120,151,181,212,243,273,304,334,365];function aS(a1,aZ){var a0=aZ>1?1:0;return(aV[aZ]+Math.floor((a1-1969+a0)/4)-Math.floor((a1-1901+a0)/100)+Math.floor((a1-1601+a0)/400)+365*(a1-1970))}function aY(aZ){return Number(new aW(1970,0,1,0,0,0,aZ))}for(var aU in aW){e[aU]=aW[aU]}e.now=aW.now;e.UTC=aW.UTC;e.prototype=aW.prototype;e.prototype.constructor=e;e.parse=function aX(bb){var a3=aT.exec(bb);if(a3){var bc=Number(a3[1]),a7=Number(a3[2]||1)-1,aZ=Number(a3[3]||1)-1,a0=Number(a3[4]||0),a5=Number(a3[5]||0),a9=Number(a3[6]||0),a4=Math.floor(Number(a3[7]||0)*1000),a2=Boolean(a3[4]&&!a3[8]),ba=a3[9]==="-"?1:-1,a1=Number(a3[10]||0),a6=Number(a3[11]||0),a8;if(a0<(a5>0||a9>0||a4>0?24:25)&&a5<60&&a9<60&&a4<1000&&a7>-1&&a7<12&&a1<24&&a6<60&&aZ>-1&&aZ<(aS(bc,a7+1)-aS(bc,a7))){a8=((aS(bc,a7)+aZ)*24+a0+a1*ba)*60;a8=((a8+a5+a6*ba)*60+a9)*1000+a4;if(a2){a8=aY(a8)}if(-8640000000000000<=a8&&a8<=8640000000000000){return a8}}return NaN}return aW.parse.apply(this,arguments)};return e})(Date)}if(!Date.now){Date.now=function aa(){return new Date().getTime()}}var G=ab.toFixed&&((8.000000000000001e-05).toFixed(3)!=="0.000"||(0.9).toFixed(0)!=="1"||(1.255).toFixed(2)!=="1.25"||(1e+18).toFixed(0)!=="1000000000000000128");var aF={base:10000000,size:6,data:[0,0,0,0,0,0],multiply:function X(aT,e){var aS=-1;while(++aS<aF.size){e+=aT*aF.data[aS];aF.data[aS]=e%aF.base;e=Math.floor(e/aF.base)}},divide:function q(aT){var aS=aF.size,e=0;while(--aS>=0){e+=aF.data[aS];aF.data[aS]=Math.floor(e/aT);e=(e%aT)*aF.base}},numToString:function ac(){var e=aF.size;var aS="";while(--e>=0){if(aS!==""||e===0||aF.data[e]!==0){var aT=String(aF.data[e]);if(aS===""){aS=aT}else{aS+="0000000".slice(0,7-aT.length)+aT}}}return aS},pow:function ag(aT,aS,e){return(aS===0?e:(aS%2===1?ag(aT,aS-1,e*aT):ag(aT*aT,aS/2,e)))},log:function T(aS){var e=0;while(aS>=4096){e+=12;aS/=4096}while(aS>=2){e+=1;aS/=2}return e}};n(ab,{toFixed:function aE(aU){var aT,aZ,aY,aX,aS,a0,aV,aW;aT=Number(aU);aT=aT!==aT?0:Math.floor(aT);if(aT<0||aT>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}aZ=Number(this);if(aZ!==aZ){return"NaN"}if(aZ<=-1e+21||aZ>=1e+21){return String(aZ)}aY="";if(aZ<0){aY="-";aZ=-aZ}aX="0";if(aZ>9.999999999999999e-22){aS=aF.log(aZ*aF.pow(2,69,1))-69;a0=(aS<0?aZ*aF.pow(2,-aS,1):aZ/aF.pow(2,aS,1));a0*=4503599627370496;aS=52-aS;if(aS>0){aF.multiply(0,a0);aV=aT;while(aV>=7){aF.multiply(10000000,0);aV-=7}aF.multiply(aF.pow(10,aV,1),0);aV=aS-1;while(aV>=23){aF.divide(1<<23);aV-=23}aF.divide(1<<aV);aF.multiply(1,1);aF.divide(2);aX=aF.numToString()}else{aF.multiply(0,a0);aF.multiply(1<<(-aS),0);aX=aF.numToString()+"0.00000000000000000000".slice(2,2+aT)}}if(aT>0){aW=aX.length;if(aW<=aT){aX=aY+"0.0000000000000000000".slice(0,aT-aW+2)+aX}else{aX=aY+aX.slice(0,aW-aT)+"."+aX.slice(aW-aT)}}else{aX=aY+aX}return aX}},G);var ax=az.split;if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var e=/()??/.exec("")[1]===void 0;az.split=function(aZ,aW){var a1=this;if(aZ===void 0&&aW===0){return[]}if(b.call(aZ)!=="[object RegExp]"){return ax.call(this,aZ,aW)}var aY=[],aS=(aZ.ignoreCase?"i":"")+(aZ.multiline?"m":"")+(aZ.extended?"x":"")+(aZ.sticky?"y":""),aU=0,a0,aX,aT,aV;aZ=new RegExp(aZ.source,aS+"g");a1+="";if(!e){a0=new RegExp("^"+aZ.source+"$(?!\\s)",aS)}aW=aW===void 0?-1>>>0:aL(aW);while(aX=aZ.exec(a1)){aT=aX.index+aX[0].length;if(aT>aU){aY.push(a1.slice(aU,aX.index));if(!e&&aX.length>1){aX[0].replace(a0,function(){for(var a2=1;a2<arguments.length-2;a2++){if(arguments[a2]===void 0){aX[a2]=void 0}}})}if(aX.length>1&&aX.index<a1.length){h.push.apply(aY,aX.slice(1))}aV=aX[0].length;aU=aT;if(aY.length>=aW){break}}if(aZ.lastIndex===aX.index){aZ.lastIndex++}}if(aU===a1.length){if(aV||!aZ.test("")){aY.push("")}}else{aY.push(a1.slice(aU))}return aY.length>aW?aY.slice(0,aW):aY}}())}else{if("0".split(void 0,0).length){az.split=function au(aS,e){if(aS===void 0&&e===0){return[]}return ax.call(this,aS,e)}}}var aw=az.replace;var ao=(function(){var e=[];"x".replace(/x(.)?/g,function(aT,aS){e.push(aS)});return e.length===1&&typeof e[0]==="undefined"}());if(!ao){az.replace=function an(aU,aT){var aS=M(aT);var e=O(aU)&&(/\)[*?]/).test(aU.source);if(!aS||!e){return aw.call(this,aU,aT)}else{var aV=function(aY){var aX=arguments.length;var aZ=aU.lastIndex;aU.lastIndex=0;var aW=aU.exec(aY);aU.lastIndex=aZ;aW.push(arguments[aX-2],arguments[aX-1]);return aT.apply(this,aW)};return aw.call(this,aU,aV)}}}var ay=az.substr;var E="".substr&&"0b".substr(-1)!=="b";n(az,{substr:function aA(aS,e){return ay.call(this,aS<0?((aS=this.length+aS)<0?0:aS):aS,e)}},E);var aP="\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";var aR="\u200b";var aQ="["+aP+"]";var aN=new RegExp("^"+aQ+aQ+"*");var aO=new RegExp(aQ+aQ+"*$");var H=az.trim&&(aP.trim()||!aR.trim());n(az,{trim:function aM(){if(this===void 0||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(aN,"").replace(aO,"")}},H);if(parseInt(aP+"08")!==8||parseInt(aP+"0x16")!==22){parseInt=(function(aS){var e=/^0[xX]/;return function aT(aV,aU){aV=String(aV).trim();if(!Number(aU)){aU=e.test(aV)?16:10}return aS(aV,aU)}}(parseInt))}}));(function(g){var c=function(i){try{i()}catch(h){return false}return true};var f=function(h,j){try{var k=function(){h.apply(this,arguments)};if(!k.__proto__){return false}Object.setPrototypeOf(k,h);k.prototype=Object.create(h.prototype,{constructor:{value:h}});return j(k)}catch(i){return false}};var a=function(){try{Object.defineProperty({},"x",{});return true}catch(h){return false}};var e=function(){var i=false;if(String.prototype.startsWith){try{"/a/".startsWith(/a/)}catch(h){i=true}}return i};var b=new Function("return this;");var d=function(){var x=b();var w=x.isFinite;var L=!!Object.defineProperty&&a();var I=e();var k=Array.prototype.slice;var j=String.prototype.indexOf;var l=Object.prototype.toString;var i=Object.prototype.hasOwnProperty;var n;var q=function(Q,P){Object.keys(P).forEach(function(S){var R=P[S];if(S in Q){return}if(L){Object.defineProperty(Q,S,{configurable:true,enumerable:false,writable:true,value:R})}else{Q[S]=R}})};var p=Object.create||function(R,Q){function S(){}S.prototype=R;var P=new S();if(typeof Q!=="undefined"){q(P,Q)}return P};var h=(typeof Symbol==="function"&&Symbol.iterator)||"_es6shim_iterator_";if(x.Set&&typeof new x.Set()["@@iterator"]==="function"){h="@@iterator"}var m=function(S,P){if(!P){P=function Q(){return this}}var R={};R[h]=P;q(S,R)};var z=function z(R){var Q=l.call(R);var P=Q==="[object Arguments]";if(!P){P=Q!=="[object Array]"&&R!==null&&typeof R==="object"&&typeof R.length==="number"&&R.length>=0&&l.call(R.callee)==="[object Function]"}return P};var t=function(P){if(!u.TypeIsObject(P)){throw new TypeError("bad object")}if(!P._es6construct){if(P.constructor&&u.IsCallable(P.constructor["@@create"])){P=P.constructor["@@create"](P)}q(P,{_es6construct:true})}return P};var u={CheckObjectCoercible:function(Q,P){if(Q==null){throw new TypeError(P||("Cannot call method on "+Q))}return Q},TypeIsObject:function(P){return P!=null&&Object(P)===P},ToObject:function(P,Q){return Object(u.CheckObjectCoercible(P,Q))},IsCallable:function(P){return typeof P==="function"&&l.call(P)==="[object Function]"},ToInt32:function(P){return P>>0},ToUint32:function(P){return P>>>0},ToInteger:function(Q){var P=+Q;if(Number.isNaN(P)){return 0}if(P===0||!Number.isFinite(P)){return P}return Math.sign(P)*Math.floor(Math.abs(P))},ToLength:function(Q){var P=u.ToInteger(Q);if(P<=0){return 0}if(P>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return P},SameValue:function(P,Q){if(P===Q){if(P===0){return 1/P===1/Q}return true}return Number.isNaN(P)&&Number.isNaN(Q)},SameValueZero:function(P,Q){return(P===Q)||(Number.isNaN(P)&&Number.isNaN(Q))},IsIterable:function(P){return u.TypeIsObject(P)&&(P[h]!==g||z(P))},GetIterator:function(Q){if(z(Q)){return new n(Q,"value")}var P=Q[h]();if(!u.TypeIsObject(P)){throw new TypeError("bad iterator")}return P},IteratorNext:function(P){var Q=(arguments.length>1)?P.next(arguments[1]):P.next();if(!u.TypeIsObject(Q)){throw new TypeError("bad iterator")}return Q},Construct:function(Q,P){var R;if(u.IsCallable(Q["@@create"])){R=Q["@@create"]()}else{R=p(Q.prototype||null)}q(R,{_es6construct:true});var S=Q.apply(R,P);return u.TypeIsObject(S)?S:R}};var C=(function(){function U(Z){var aa=Math.floor(Z),Y=Z-aa;if(Y<0.5){return aa}if(Y>0.5){return aa+1}return aa%2?aa+1:aa}function T(aj,ac,ae){var Y=(1<<(ac-1))-1,ah,ab,ad,ag,af,Z,ai,aa;if(aj!==aj){ab=(1<<ac)-1;ad=Math.pow(2,ae-1);ah=0}else{if(aj===Infinity||aj===-Infinity){ab=(1<<ac)-1;ad=0;ah=(aj<0)?1:0}else{if(aj===0){ab=0;ad=0;ah=(1/aj===-Infinity)?1:0}else{ah=aj<0;aj=Math.abs(aj);if(aj>=Math.pow(2,1-Y)){ab=Math.min(Math.floor(Math.log(aj)/Math.LN2),1023);ad=U(aj/Math.pow(2,ab)*Math.pow(2,ae));if(ad/Math.pow(2,ae)>=2){ab=ab+1;ad=1}if(ab>Y){ab=(1<<ac)-1;ad=0}else{ab=ab+Y;ad=ad-Math.pow(2,ae)}}else{ab=0;ad=U(aj/Math.pow(2,1-Y-ae))}}}}Z=[];for(af=ae;af;af-=1){Z.push(ad%2?1:0);ad=Math.floor(ad/2)}for(af=ac;af;af-=1){Z.push(ab%2?1:0);ab=Math.floor(ab/2)}Z.push(ah?1:0);Z.reverse();ai=Z.join("");aa=[];while(ai.length){aa.push(parseInt(ai.slice(0,8),2));ai=ai.slice(8)}return aa}function X(ab,ad,af){var aa=[],ag,ah,Y,aj,Z,ai,ac,ae;for(ag=ab.length;ag;ag-=1){Y=ab[ag-1];for(ah=8;ah;ah-=1){aa.push(Y%2?1:0);Y=Y>>1}}aa.reverse();aj=aa.join("");Z=(1<<(ad-1))-1;ai=parseInt(aj.slice(0,1),2)?-1:1;ac=parseInt(aj.slice(1,1+ad),2);ae=parseInt(aj.slice(1+ad),2);if(ac===(1<<ad)-1){return ae!==0?NaN:ai*Infinity}else{if(ac>0){return ai*Math.pow(2,ac-Z)*(1+ae/Math.pow(2,af))}else{if(ae!==0){return ai*Math.pow(2,-(Z-1))*(ae/Math.pow(2,af))}else{return ai<0?-0:0}}}}function W(Y){return X(Y,11,52)}function S(Y){return T(Y,11,52)}function V(Y){return X(Y,8,23)}function R(Y){return T(Y,8,23)}var P={toFloat32:function(Y){return V(R(Y))}};if(typeof Float32Array!=="undefined"){var Q=new Float32Array(1);P.toFloat32=function(Y){Q[0]=Y;return Q[0]}}return P}());q(String,{fromCodePoint:function(P){var T=k.call(arguments,0,arguments.length);var U=[];var S;for(var Q=0,R=T.length;Q<R;Q++){S=Number(T[Q]);if(!u.SameValue(S,u.ToInteger(S))||S<0||S>1114111){throw new RangeError("Invalid code point "+S)}if(S<65536){U.push(String.fromCharCode(S))}else{S-=65536;U.push(String.fromCharCode((S>>10)+55296));U.push(String.fromCharCode((S%1024)+56320))}}return U.join("")},raw:function(P){var ab=k.call(arguments,1,arguments.length);var Q=u.ToObject(P,"bad callSite");var Z=Q.raw;var Y=u.ToObject(Z,"bad raw value");var R=Object.keys(Y).length;var S=u.ToLength(R);if(S===0){return""}var aa=[];var U=0;var V,T,W,X;while(U<S){V=String(U);T=Y[V];W=String(T);aa.push(W);if(U+1>=S){break}T=ab[V];if(T===g){break}X=String(T);aa.push(X);U++}return aa.join("")}});var K={repeat:(function(){var P=function(R,S){if(S<1){return""}if(S%2){return P(R,S-1)+R}var Q=P(R,S/2);return Q+Q};return function(R){var Q=String(u.CheckObjectCoercible(this));R=u.ToInteger(R);if(R<0||R===Infinity){throw new RangeError("Invalid String#repeat value")}return P(Q,R)}})(),startsWith:function(P){var S=String(u.CheckObjectCoercible(this));if(l.call(P)==="[object RegExp]"){throw new TypeError('Cannot call method "startsWith" with a regex')}P=String(P);var R=arguments.length>1?arguments[1]:g;var Q=Math.max(u.ToInteger(R),0);return S.slice(Q,Q+P.length)===P},endsWith:function(S){var U=String(u.CheckObjectCoercible(this));if(l.call(S)==="[object RegExp]"){throw new TypeError('Cannot call method "endsWith" with a regex')}S=String(S);var T=U.length;var R=arguments.length>1?arguments[1]:g;var Q=R===g?T:u.ToInteger(R);var P=Math.min(Math.max(Q,0),T);return U.slice(P-S.length,P)===S},contains:function(Q){var P=arguments.length>1?arguments[1]:g;return j.call(this,Q,P)!==-1},codePointAt:function(S){var V=String(u.CheckObjectCoercible(this));var T=u.ToInteger(S);var R=V.length;if(T<0||T>=R){return g}var P=V.charCodeAt(T);var Q=(T+1===R);if(P<55296||P>56319||Q){return P}var U=V.charCodeAt(T+1);if(U<56320||U>57343){return P}return((P-55296)*1024)+(U-56320)+65536}};q(String.prototype,K);var y="\u0085".trim().length!==1;if(y){var E=String.prototype.trim;delete String.prototype.trim;var O=["\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join("");var M=new RegExp("^["+O+"]["+O+"]*");var N=new RegExp("["+O+"]["+O+"]*$");q(String.prototype,{trim:function(){if(this===g||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(M,"").replace(N,"")}})}var J=function(P){this._s=String(u.CheckObjectCoercible(P));this._i=0};J.prototype.next=function(){var S=this._s,Q=this._i;if(S===g||Q>=S.length){this._s=g;return{value:g,done:true}}var P=S.charCodeAt(Q),T,R;if(P<55296||P>56319||(Q+1)==S.length){R=1}else{T=S.charCodeAt(Q+1);R=(T<56320||T>57343)?1:2}this._i=Q+R;return{value:S.substr(Q,R),done:false}};m(J.prototype);m(String.prototype,function(){return new J(this)});if(!I){String.prototype.startsWith=K.startsWith;String.prototype.endsWith=K.endsWith}q(Array,{from:function(R){var U=arguments.length>1?arguments[1]:g;var W=arguments.length>2?arguments[2]:g;var T=u.ToObject(R,"bad iterable");if(U!==g&&!u.IsCallable(U)){throw new TypeError("Array.from: when provided, the second argument must be a function")}var X=u.IsIterable(T);var S=X?0:u.ToLength(T.length);var V=u.IsCallable(this)?Object(X?new this():new this(S)):new Array(S);var Q=X?u.GetIterator(T):null;var Y;for(var P=0;X||(P<S);P++){if(X){Y=u.IteratorNext(Q);if(Y.done){S=P;break}Y=Y.value}else{Y=T[P]}if(U){V[P]=W?U.call(W,Y,P):U(Y,P)}else{V[P]=Y}}V.length=S;return V},of:function(){return Array.from(arguments)}});n=function(P,Q){this.i=0;this.array=P;this.kind=Q};q(n.prototype,{next:function(){var Q=this.i,P=this.array;if(Q===g||this.kind===g){throw new TypeError("Not an ArrayIterator")}if(P!==g){var S=u.ToLength(P.length);for(;Q<S;Q++){var R=this.kind;var T;if(R==="key"){T=Q}else{if(R==="value"){T=P[Q]}else{if(R==="entry"){T=[Q,P[Q]]}}}this.i=Q+1;return{value:T,done:false}}}this.array=g;return{value:g,done:true}}});m(n.prototype);q(Array.prototype,{copyWithin:function(X,W){var R=arguments[2];var V=u.ToObject(this);var U=u.ToLength(V.length);X=u.ToInteger(X);W=u.ToInteger(W);var Y=X<0?Math.max(U+X,0):Math.min(X,U);var T=W<0?Math.max(U+W,0):Math.min(W,U);R=(R===g)?U:u.ToInteger(R);var S=R<0?Math.max(U+R,0):Math.min(R,U);var P=Math.min(S-T,U-Y);var Q=1;if(T<Y&&Y<(T+P)){Q=-1;T+=P-1;Y+=P-1}while(P>0){if(i.call(V,T)){V[Y]=V[T]}else{delete V[T]}T+=Q;Y+=Q;P-=1}return V},fill:function(W){var V=arguments.length>1?arguments[1]:g;var P=arguments.length>2?arguments[2]:g;var S=u.ToObject(this);var R=u.ToLength(S.length);V=u.ToInteger(V===g?0:V);P=u.ToInteger(P===g?R:P);var U=V<0?Math.max(R+V,0):Math.min(V,R);var T=P<0?R+P:P;for(var Q=U;Q<R&&Q<T;++Q){S[Q]=W}return S},find:function(S){var R=u.ToObject(this);var Q=u.ToLength(R.length);if(!u.IsCallable(S)){throw new TypeError("Array#find: predicate must be a function")}var T=arguments[1];for(var P=0,U;P<Q;P++){if(P in R){U=R[P];if(S.call(T,U,P,R)){return U}}}return g},findIndex:function(S){var R=u.ToObject(this);var Q=u.ToLength(R.length);if(!u.IsCallable(S)){throw new TypeError("Array#findIndex: predicate must be a function")}var T=arguments[1];for(var P=0;P<Q;P++){if(P in R){if(S.call(T,R[P],P,R)){return P}}}return -1},keys:function(){return new n(this,"key")},values:function(){return new n(this,"value")},entries:function(){return new n(this,"entry")}});m(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){m(Object.getPrototypeOf([].values()))}var B=Math.pow(2,53)-1;q(Number,{MAX_SAFE_INTEGER:B,MIN_SAFE_INTEGER:-B,EPSILON:2.220446049250313e-16,parseInt:x.parseInt,parseFloat:x.parseFloat,isFinite:function(P){return typeof P==="number"&&w(P)},isInteger:function(P){return Number.isFinite(P)&&u.ToInteger(P)===P},isSafeInteger:function(P){return Number.isInteger(P)&&Math.abs(P)<=Number.MAX_SAFE_INTEGER},isNaN:function(P){return P!==P}});if(L){q(Object,{getPropertyDescriptor:function(S,P){var Q=Object.getOwnPropertyDescriptor(S,P);var R=Object.getPrototypeOf(S);while(Q===g&&R!==null){Q=Object.getOwnPropertyDescriptor(R,P);R=Object.getPrototypeOf(R)}return Q},getPropertyNames:function(S){var R=Object.getOwnPropertyNames(S);var Q=Object.getPrototypeOf(S);var P=function(T){if(R.indexOf(T)===-1){R.push(T)}};while(Q!==null){Object.getOwnPropertyNames(Q).forEach(P);Q=Object.getPrototypeOf(Q)}return R}});q(Object,{assign:function(Q,P){if(!u.TypeIsObject(Q)){throw new TypeError("target must be an object")}return Array.prototype.reduce.call(arguments,function(S,R){if(!u.TypeIsObject(R)){throw new TypeError("source must be an object")}return Object.keys(R).reduce(function(U,T){U[T]=R[T];return U},S)})},is:function(P,Q){return u.SameValue(P,Q)},setPrototypeOf:(function(S,R){var T;var P=function(V,W){if(!u.TypeIsObject(V)){throw new TypeError("cannot set prototype on a non-object")}if(!(W===null||u.TypeIsObject(W))){throw new TypeError("can only set prototype to an object or null"+W)}};var U=function(V,W){P(V,W);T.call(V,W);return V};try{T=S.getOwnPropertyDescriptor(S.prototype,R).set;T.call({},null)}catch(Q){if(S.prototype!=={}[R]){return}T=function(V){this[R]=V};U.polyfill=U(U({},null),S.prototype) instanceof S}return U})(Object,"__proto__")})}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var P=Object.create(null);var Q=Object.getPrototypeOf,R=Object.setPrototypeOf;Object.getPrototypeOf=function(S){var T=Q(S);return T===P?null:T};Object.setPrototypeOf=function(S,T){if(T===null){T=P}return R(S,T)};Object.setPrototypeOf.polyfill=false})()}try{Object.keys("foo")}catch(r){var D=Object.keys;Object.keys=function(P){return D(u.ToObject(P))}}var A={acosh:function(P){P=Number(P);if(Number.isNaN(P)||P<1){return NaN}if(P===1){return 0}if(P===Infinity){return P}return Math.log(P+Math.sqrt(P*P-1))},asinh:function(P){P=Number(P);if(P===0||!w(P)){return P}return P<0?-Math.asinh(-P):Math.log(P+Math.sqrt(P*P+1))},atanh:function(P){P=Number(P);if(Number.isNaN(P)||P<-1||P>1){return NaN}if(P===-1){return -Infinity}if(P===1){return Infinity}if(P===0){return P}return 0.5*Math.log((1+P)/(1-P))},cbrt:function(R){R=Number(R);if(R===0){return R}var P=R<0,Q;if(P){R=-R}Q=Math.pow(R,1/3);return P?-Q:Q},clz32:function(Q){Q=Number(Q);var P=u.ToUint32(Q);if(P===0){return 32}return 32-(P).toString(2).length},cosh:function(P){P=Number(P);if(P===0){return 1}if(Number.isNaN(P)){return NaN}if(!w(P)){return Infinity}if(P<0){P=-P}if(P>21){return Math.exp(P)/2}return(Math.exp(P)+Math.exp(-P))/2},expm1:function(P){P=Number(P);if(P===-Infinity){return -1}if(!w(P)||P===0){return P}return Math.exp(P)-1},hypot:function(W,X){var R=false;var P=true;var Q=false;var U=[];Array.prototype.every.call(arguments,function(Y){var Z=Number(Y);if(Number.isNaN(Z)){R=true}else{if(Z===Infinity||Z===-Infinity){Q=true}else{if(Z!==0){P=false}}}if(Q){return false}else{if(!R){U.push(Math.abs(Z))}}return true});if(Q){return Infinity}if(R){return NaN}if(P){return 0}U.sort(function(Y,Z){return Z-Y});var T=U[0];var S=U.map(function(Y){return Y/T});var V=S.reduce(function(Z,Y){return Z+=Y*Y},0);return T*Math.sqrt(V)},log2:function(P){return Math.log(P)*Math.LOG2E},log10:function(P){return Math.log(P)*Math.LOG10E},log1p:function(S){S=Number(S);if(S<-1||Number.isNaN(S)){return NaN}if(S===0||S===Infinity){return S}if(S===-1){return -Infinity}var R=0;var Q=50;if(S<0||S>1){return Math.log(1+S)}for(var P=1;P<Q;P++){if((P%2)===0){R-=Math.pow(S,P)/P}else{R+=Math.pow(S,P)/P}}return R},sign:function(Q){var P=+Q;if(P===0){return P}if(Number.isNaN(P)){return P}return P<0?-1:1},sinh:function(P){P=Number(P);if(!w(P)||P===0){return P}return(Math.exp(P)-Math.exp(-P))/2},tanh:function(P){P=Number(P);if(Number.isNaN(P)||P===0){return P}if(P===Infinity){return 1}if(P===-Infinity){return -1}return(Math.exp(P)-Math.exp(-P))/(Math.exp(P)+Math.exp(-P))},trunc:function(Q){var P=Number(Q);return P<0?-Math.floor(-P):Math.floor(P)},imul:function(T,U){T=u.ToUint32(T);U=u.ToUint32(U);var P=(T>>>16)&65535;var Q=T&65535;var R=(U>>>16)&65535;var S=U&65535;return((Q*S)+(((P*S+Q*R)<<16)>>>0)|0)},fround:function(Q){if(Q===0||Q===Infinity||Q===-Infinity||Number.isNaN(Q)){return Q}var P=Number(Q);return C.toFloat32(P)}};q(Math,A);if(Math.imul(4294967295,5)!==-5){Math.imul=A.imul}var G=(function(){var T,U;u.IsPromise=function(aa){if(!u.TypeIsObject(aa)){return false}if(!aa._promiseConstructor){return false}if(aa._status===g){return false}return true};var V=function(aa){if(!u.IsCallable(aa)){throw new TypeError("bad promise constructor")}var ab=this;var ac=function(ae,ad){ab.resolve=ae;ab.reject=ad};ab.promise=u.Construct(aa,[ac]);if(!ab.promise._es6construct){throw new TypeError("bad promise constructor")}if(!(u.IsCallable(ab.resolve)&&u.IsCallable(ab.reject))){throw new TypeError("bad promise constructor")}};var X=x.setTimeout;var S;if(typeof window!=="undefined"&&u.IsCallable(window.postMessage)){S=function(){var ad=[];var ab="zero-timeout-message";var ac=function(ae){ad.push(ae);window.postMessage(ab,"*")};var aa=function(ae){if(ae.source==window&&ae.data==ab){ae.stopPropagation();if(ad.length===0){return}var af=ad.shift();af()}};window.addEventListener("message",aa,true);return ac}}var R=function(){var aa=x.Promise;return aa&&aa.resolve&&function(ab){return aa.resolve().then(ab)}};var Q=u.IsCallable(x.setImmediate)?x.setImmediate.bind(x):typeof process==="object"&&process.nextTick?process.nextTick:R()||(u.IsCallable(S)?S():function(aa){X(aa,0)});var Y=function(aa,ab){aa.forEach(function(ac){Q(function(){var af=ac.handler;var ad=ac.capability;var ah=ad.resolve;var ag=ad.reject;try{var ai=af(ab);if(ai===ad.promise){throw new TypeError("self resolution")}var aj=Z(ai,ad);if(!aj){ah(ai)}}catch(ae){ag(ae)}})})};var Z=function(af,aa){if(!u.TypeIsObject(af)){return false}var ad=aa.resolve;var ac=aa.reject;try{var ae=af.then;if(!u.IsCallable(ae)){return false}ae.call(af,ad,ac)}catch(ab){ac(ab)}return true};var W=function(ac,aa,ab){return function(ag){if(ag===ac){return ab(new TypeError("self resolution"))}var ad=ac._promiseConstructor;var ae=new V(ad);var af=Z(ag,ae);if(af){return ae.promise.then(aa,ab)}else{return aa(ag)}}};T=function(ae){var ab=this;ab=t(ab);if(!ab._promiseConstructor){throw new TypeError("bad promise")}if(ab._status!==g){throw new TypeError("promise already initialized")}if(!u.IsCallable(ae)){throw new TypeError("not a valid resolver")}ab._status="unresolved";ab._resolveReactions=[];ab._rejectReactions=[];var ad=function(ag){if(ab._status!=="unresolved"){return}var af=ab._resolveReactions;ab._result=ag;ab._resolveReactions=g;ab._rejectReactions=g;ab._status="has-resolution";Y(af,ag)};var ac=function(ag){if(ab._status!=="unresolved"){return}var af=ab._rejectReactions;ab._result=ag;ab._resolveReactions=g;ab._rejectReactions=g;ab._status="has-rejection";Y(af,ag)};try{ae(ad,ac)}catch(aa){ac(aa)}return ab};U=T.prototype;q(T,{"@@create":function(ab){var aa=this;var ac=aa.prototype||U;ab=ab||p(ac);q(ab,{_status:g,_result:g,_resolveReactions:g,_rejectReactions:g,_promiseConstructor:g});ab._promiseConstructor=aa;return ab}});var P=function(ac,ae,aa,ad){var ab=false;return function(ag){if(ab){return}ab=true;ae[ac]=ag;if((--ad.count)===0){var af=aa.resolve;af(ae)}}};T.all=function(af){var aa=this;var ab=new V(aa);var ak=ab.resolve;var ai=ab.reject;try{if(!u.IsIterable(af)){throw new TypeError("bad iterable")}var ae=u.GetIterator(af);var am=[],aj={count:1};for(var ad=0;;ad++){var ag=u.IteratorNext(ae);if(ag.done){break}var ah=aa.resolve(ag.value);var al=P(ad,am,ab,aj);aj.count++;ah.then(al,ab.reject)}if((--aj.count)===0){ak(am)}}catch(ac){ai(ac)}return ab.promise};T.race=function(ae){var aa=this;var ab=new V(aa);var ai=ab.resolve;var ah=ab.reject;try{if(!u.IsIterable(ae)){throw new TypeError("bad iterable")}var ad=u.GetIterator(ae);while(true){var af=u.IteratorNext(ad);if(af.done){break}var ag=aa.resolve(af.value);ag.then(ai,ah)}}catch(ac){ah(ac)}return ab.promise};T.reject=function(ac){var aa=this;var ab=new V(aa);var ad=ab.reject;ad(ac);return ab.promise};T.resolve=function(ae){var aa=this;if(u.IsPromise(ae)){var ac=ae._promiseConstructor;if(ac===aa){return ae}}var ab=new V(aa);var ad=ab.resolve;ad(ae);return ab.promise};T.prototype["catch"]=function(aa){return this.then(g,aa)};T.prototype.then=function(ac,ad){var ae=this;if(!u.IsPromise(ae)){throw new TypeError("not a promise")}var aa=this.constructor;var ab=new V(aa);if(!u.IsCallable(ad)){ad=function(ai){throw ai}}if(!u.IsCallable(ac)){ac=function(ai){return ai}}var ag=W(ae,ac,ad);var ah={capability:ab,handler:ag};var af={capability:ab,handler:ad};switch(ae._status){case"unresolved":ae._resolveReactions.push(ah);ae._rejectReactions.push(af);break;case"has-resolution":Y([ah],ae._result);break;case"has-rejection":Y([af],ae._result);break;default:throw new TypeError("unexpected")}return ab.promise};return T})();q(x,{Promise:G});var H=f(x.Promise,function(P){return P.resolve(42) instanceof P});var F=(function(){try{x.Promise.reject(42).then(null,5).then(null,function(){});return true}catch(P){return false}}());if(!H||!F){x.Promise=G}if(L){var v=function v(P){var Q=typeof P;if(Q==="string"){return"$"+P}else{if(Q==="number"){return P}}return null};var s=function s(){return Object.create?Object.create(null):{}};var o={Map:(function(){var P={};function S(U,V){this.key=U;this.value=V;this.next=null;this.prev=null}S.prototype.isRemoved=function(){return this.key===P};function T(V,U){this.head=V._head;this.i=this.head;this.kind=U}T.prototype={next:function(){var V=this.i,W=this.kind,U=this.head,X;if(this.i===g){return{value:g,done:true}}while(V.isRemoved()&&V!==U){V=V.prev}while(V.next!==U){V=V.next;if(!V.isRemoved()){if(W==="key"){X=V.key}else{if(W==="value"){X=V.value}else{X=[V.key,V.value]}}this.i=V;return{value:X,done:false}}}this.i=g;return{value:g,done:true}}};m(T.prototype);function Q(X){var Y=this;Y=t(Y);if(!Y._es6map){throw new TypeError("bad map")}var V=new S(null,null);V.next=V.prev=V;q(Y,{_head:V,_storage:s(),_size:0});if(X!==g&&X!==null){var W=u.GetIterator(X);var U=Y.set;if(!u.IsCallable(U)){throw new TypeError("bad map")}while(true){var Z=u.IteratorNext(W);if(Z.done){break}var aa=Z.value;if(!u.TypeIsObject(aa)){throw new TypeError("expected iterable of pairs")}U.call(Y,aa[0],aa[1])}}return Y}var R=Q.prototype;q(Q,{"@@create":function(V){var U=this;var W=U.prototype||R;V=V||p(W);q(V,{_es6map:true});return V}});Object.defineProperty(Q.prototype,"size",{configurable:true,enumerable:false,get:function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size}});q(Q.prototype,{get:function(Y){var V=v(Y);if(V!==null){var U=this._storage[V];return U?U.value:g}var W=this._head,X=W;while((X=X.next)!==W){if(u.SameValueZero(X.key,Y)){return X.value}}return g},has:function(X){var U=v(X);if(U!==null){return typeof this._storage[U]!=="undefined"}var V=this._head,W=V;while((W=W.next)!==V){if(u.SameValueZero(W.key,X)){return true}}return false},set:function(Y,Z){var W=this._head,X=W,U;var V=v(Y);if(V!==null){if(typeof this._storage[V]!=="undefined"){this._storage[V].value=Z;return}else{U=this._storage[V]=new S(Y,Z);X=W.prev}}while((X=X.next)!==W){if(u.SameValueZero(X.key,Y)){X.value=Z;return}}U=U||new S(Y,Z);if(u.SameValue(-0,Y)){U.key=+0}U.next=this._head;U.prev=this._head.prev;U.prev.next=U;U.next.prev=U;this._size+=1},"delete":function(X){var V=this._head,W=V;var U=v(X);if(U!==null){if(typeof this._storage[U]==="undefined"){return false}W=this._storage[U].prev;delete this._storage[U]}while((W=W.next)!==V){if(u.SameValueZero(W.key,X)){W.key=W.value=P;W.prev.next=W.next;W.next.prev=W.prev;this._size-=1;return true}}return false},clear:function(){this._size=0;this._storage=s();var U=this._head,V=U,W=V.next;while((V=W)!==U){V.key=V.value=P;W=V.next;V.next=V.prev=U}U.next=U.prev=U},keys:function(){return new T(this,"key")},values:function(){return new T(this,"value")},entries:function(){return new T(this,"key+value")},forEach:function(U){var V=arguments.length>1?arguments[1]:null;var X=this.entries();for(var W=X.next();!W.done;W=X.next()){U.call(V,W.value[1],W.value[0],this)}}});m(Q.prototype,function(){return this.entries()});return Q})(),Set:(function(){var S=function Q(V){var Y=this;Y=t(Y);if(!Y._es6set){throw new TypeError("bad set")}q(Y,{"[[SetData]]":null,_storage:s()});if(V!==g&&V!==null){var U=u.GetIterator(V);var T=Y.add;if(!u.IsCallable(T)){throw new TypeError("bad set")}while(true){var W=u.IteratorNext(U);if(W.done){break}var X=W.value;T.call(Y,X)}}return Y};var R=S.prototype;q(S,{"@@create":function(U){var T=this;var V=T.prototype||R;U=U||p(V);q(U,{_es6set:true});return U}});var P=function P(U){if(!U["[[SetData]]"]){var T=U["[[SetData]]"]=new o.Map();Object.keys(U._storage).forEach(function(V){if(V.charCodeAt(0)===36){V=V.slice(1)}else{V=+V}T.set(V,V)});U._storage=null}};Object.defineProperty(S.prototype,"size",{configurable:true,enumerable:false,get:function(){if(typeof this._storage==="undefined"){throw new TypeError("size method called on incompatible Set")}P(this);return this["[[SetData]]"].size}});q(S.prototype,{has:function(U){var T;if(this._storage&&(T=v(U))!==null){return !!this._storage[T]}P(this);return this["[[SetData]]"].has(U)},add:function(U){var T;if(this._storage&&(T=v(U))!==null){this._storage[T]=true;return}P(this);return this["[[SetData]]"].set(U,U)},"delete":function(U){var T;if(this._storage&&(T=v(U))!==null){delete this._storage[T];return}P(this);return this["[[SetData]]"]["delete"](U)},clear:function(){if(this._storage){this._storage=s();return}return this["[[SetData]]"].clear()},keys:function(){P(this);return this["[[SetData]]"].keys()},values:function(){P(this);return this["[[SetData]]"].values()},entries:function(){P(this);return this["[[SetData]]"].entries()},forEach:function(T){var U=arguments.length>1?arguments[1]:null;var V=this;P(this);this["[[SetData]]"].forEach(function(X,W){T.call(U,W,W,V)})}});m(S.prototype,function(){return this.values()});return S})()};q(x,o);if(x.Map||x.Set){if(typeof x.Map.prototype.clear!=="function"||new x.Set().size!==0||new x.Map().size!==0||typeof x.Map.prototype.keys!=="function"||typeof x.Set.prototype.keys!=="function"||typeof x.Map.prototype.forEach!=="function"||typeof x.Set.prototype.forEach!=="function"||c(x.Map)||c(x.Set)||!f(x.Map,function(P){return(new P([])) instanceof P})){x.Map=o.Map;x.Set=o.Set}}m(Object.getPrototypeOf((new x.Map()).keys()));m(Object.getPrototypeOf((new x.Set()).keys()))}};if(typeof define==="function"&&define.amd){define(d)}else{d()}})();
/* https://mths.be/includes v1.0.0 by @mathias */
if(!String.prototype.includes){(function(){var d={}.toString;var a=(function(){try{var g={};var e=Object.defineProperty;var h=e(g,g,g)&&e}catch(f){}return h}());var c="".indexOf;var b=function(g){if(this==null){throw TypeError()}var k=String(this);if(g&&d.call(g)=="[object RegExp]"){throw TypeError()}var l=k.length;var i=String(g);var h=i.length;var f=arguments.length>1?arguments[1]:undefined;var e=f?Number(f):0;if(e!=e){e=0}var j=Math.min(Math.max(e,0),l);if(h+j>l){return false}return c.call(k,i,e)!=-1};if(a){a(String.prototype,"includes",{value:b,configurable:true,writable:true})}else{String.prototype.includes=b}}())};LanguagePlugin={};LanguagePlugin.initialized=false;LanguagePlugin.replace=function(b,a){var d=window.translations;if(!window.translationFetchUrl){return a}if(!d){$.ajax({type:"GET",url:window.translationFetchUrl,traditional:true,cache:true,dataType:"json",async:false,success:function(e){if(e&&e.status!="error"){window.translations=e}},error:function(e){window.translations={};console.log(e)}})}var c;if(d&&(c=d[b])){return c}return a};(function(a){var b=a.ajax;var c={};var d=[];var e=[];a.ajax=function(i){i=jQuery.extend(i,jQuery.extend({},jQuery.ajaxSettings,i));var g=i.port;switch(i.mode){case"abort":if(c[g]){c[g].abort()}return c[g]=b.apply(this,arguments);case"queue":var f=i.complete;i.complete=function(){if(f){f.apply(this,arguments)}jQuery([b]).dequeue("ajax"+g)};jQuery([b]).queue("ajax"+g,function(){b(i)});return;case"sync":var h=d.length;d[h]={error:i.error,success:i.success,complete:i.complete,done:false};e[h]={error:[],success:[],complete:[]};i.error=function(){e[h].error=arguments};i.success=function(){e[h].success=arguments};i.complete=function(){e[h].complete=arguments;d[h].done=true;if(h==0||!d[h-1]){for(var j=h;j<d.length&&d[j].done;j++){if(d[j].error){d[j].error.apply(jQuery,e[j].error)}if(d[j].success){d[j].success.apply(jQuery,e[j].success)}if(d[j].complete){d[j].complete.apply(jQuery,e[j].complete)}d[j]=null;e[j]=null}}}}return b.apply(this,arguments)}})(jQuery);(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function pad(n,len){s=n.toString();if(s.length<len){s=("0000000000"+s).slice(-len)}return s}$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null){return"null"}var type=typeof o;if(type==="undefined"){return undefined}if(type==="number"||type==="boolean"){return""+o}if(type==="string"){return $.quoteString(o)}if(type==="object"){if(typeof o.toJSON==="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hours<10){hours="0"+hours}if(minutes<10){minutes="0"+minutes}if(seconds<10){seconds="0"+seconds}if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+pad(year,4)+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var name,val,pairs=[];for(var k in o){type=typeof k;if(type==="number"){name='"'+k+'"'}else{if(type==="string"){name=$.quoteString(k)}else{continue}}type=typeof o[k];if(type==="function"||type==="undefined"){continue}val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'}})(jQuery);(function(a){jQuery.fn.pngFix=function(){var b=jQuery.browser.msie&&parseInt(jQuery.browser.version)==6&&!window.XMLHttpRequest;return this.each(function(){if(b){jQuery(this).find("*").each(function(){if(((this.nodeName=="IMG"||this.nodeName=="INPUT")&&this.src&&this.src.toLowerCase().indexOf(".png")!=-1)||jQuery(this).css("background-image").indexOf(".png")!=-1){DD_belatedPNG.fixPng(this)}})}})}})(jQuery);var DD_belatedPNG;if(jQuery.browser.msie&&parseInt(jQuery.browser.version)==6&&!window.XMLHttpRequest){DD_belatedPNG={ns:"DD_belatedPNG",imgSize:{},delay:10,nodesFixed:0,createVmlNameSpace:function(){if(document.namespaces&&!document.namespaces[this.ns]){document.namespaces.add(this.ns,"urn:schemas-microsoft-com:vml")}},createVmlStyleSheet:function(){var b,a;b=document.createElement("style");b.setAttribute("media","screen");document.documentElement.firstChild.insertBefore(b,document.documentElement.firstChild.firstChild);if(b.styleSheet){b=b.styleSheet;b.addRule(this.ns+"\\:*","{behavior:url(#default#VML)}");b.addRule(this.ns+"\\:shape","position:absolute;");b.addRule("img."+this.ns+"_sizeFinder","behavior:none; border:none; position:absolute; z-index:-1; top:-10000px; visibility:hidden;");this.screenStyleSheet=b;a=document.createElement("style");a.setAttribute("media","print");document.documentElement.firstChild.insertBefore(a,document.documentElement.firstChild.firstChild);a=a.styleSheet;a.addRule(this.ns+"\\:*","{display: none !important;}");a.addRule("img."+this.ns+"_sizeFinder","{display: none !important;}")}},readPropertyChange:function(){var b,a,c;b=event.srcElement;if(!b.vmlInitiated){return}if(event.propertyName.search("background")!=-1||event.propertyName.search("border")!=-1){DD_belatedPNG.applyVML(b)}if(event.propertyName=="style.display"){a=(b.currentStyle.display=="none")?"none":"block";for(c in b.vml){if(b.vml.hasOwnProperty(c)){b.vml[c].shape.style.display=a}}}if(event.propertyName.search("filter")!=-1){DD_belatedPNG.vmlOpacity(b)}},vmlOpacity:function(a){if(a.currentStyle.filter.search("lpha")!=-1){var b=a.currentStyle.filter;b=parseInt(b.substring(b.lastIndexOf("=")+1,b.lastIndexOf(")")),10)/100;a.vml.color.shape.style.filter=a.currentStyle.filter;a.vml.image.fill.opacity=b}},handlePseudoHover:function(a){setTimeout(function(){DD_belatedPNG.applyVML(a);$(a).children().each(function(){try{DD_belatedPNG.applyVML(this)}catch(b){}})},1)},fix:function(b){if(this.screenStyleSheet){var c,a;c=b.split(",");for(a=0;a<c.length;a++){this.screenStyleSheet.addRule(c[a],"behavior:expression(DD_belatedPNG.fixPng(this))")}}},applyVML:function(a){a.runtimeStyle.cssText="";this.vmlFill(a);this.vmlOffsets(a);this.vmlOpacity(a);if(a.isImg){this.copyImageBorders(a)}},attachHandlers:function(c){var i,f,e,g,b,d;i=this;f={resize:"vmlOffsets",move:"vmlOffsets"};if(c.nodeName=="A"){g={mouseleave:"handlePseudoHover",mouseenter:"handlePseudoHover",focus:"handlePseudoHover",blur:"handlePseudoHover"};for(b in g){if(g.hasOwnProperty(b)){f[b]=g[b]}}}for(d in f){if(f.hasOwnProperty(d)){e=function(){i[f[d]](c)};c.attachEvent("on"+d,e)}}c.attachEvent("onpropertychange",this.readPropertyChange)},giveLayout:function(a){a.style.zoom=1;if(a.currentStyle.position=="static"){a.style.position="relative"}},copyImageBorders:function(a){var c,b;c={borderStyle:true,borderWidth:true,borderColor:true};for(b in c){if(c.hasOwnProperty(b)){a.vml.color.shape.style[b]=a.currentStyle[b]}}},vmlFill:function(a){if(!a.currentStyle){return}else{var b,f,e,g,c,d;b=a.currentStyle}for(g in a.vml){if(a.vml.hasOwnProperty(g)){a.vml[g].shape.style.zIndex=b.zIndex}}a.runtimeStyle.backgroundColor="";a.runtimeStyle.backgroundImage="";f=true;if(b.backgroundImage!="none"||a.isImg){if(!a.isImg){a.vmlBg=b.backgroundImage;a.vmlBg=a.vmlBg.substr(5,a.vmlBg.lastIndexOf('")')-5)}else{a.vmlBg=a.src}e=this;if(!e.imgSize[a.vmlBg]){c=document.createElement("img");e.imgSize[a.vmlBg]=c;c.className=e.ns+"_sizeFinder";c.runtimeStyle.cssText="behavior:none; position:absolute; left:-10000px; top:-10000px; border:none; margin:0; padding:0;";d=function(){this.width=this.offsetWidth;this.height=this.offsetHeight;e.vmlOffsets(a)};c.attachEvent("onload",d);c.src=a.vmlBg;c.removeAttribute("width");c.removeAttribute("height");document.body.insertBefore(c,document.body.firstChild)}a.vml.image.fill.src=a.vmlBg;f=false}a.vml.image.fill.on=!f;a.vml.image.fill.color="none";a.vml.color.shape.style.backgroundColor=b.backgroundColor;a.runtimeStyle.backgroundImage="none";a.runtimeStyle.backgroundColor="transparent"},vmlOffsets:function(i){var m,l,j,k,e,f,h,a,d,g,n;m=i.currentStyle;l={W:i.clientWidth+1,H:i.clientHeight+1,w:this.imgSize[i.vmlBg].width,h:this.imgSize[i.vmlBg].height,L:i.offsetLeft,T:i.offsetTop,bLW:i.clientLeft,bTW:i.clientTop};j=(l.L+l.bLW==1)?1:0;k=function(s,c,q,u,b,p){s.coordsize=u+","+b;s.coordorigin=p+","+p;s.path="m0,0l"+u+",0l"+u+","+b+"l0,"+b+" xe";s.style.width=u+"px";s.style.height=b+"px";s.style.left=c+"px";s.style.top=q+"px"};k(i.vml.color.shape,(l.L+(i.isImg?0:l.bLW)),(l.T+(i.isImg?0:l.bTW)),(l.W-1),(l.H-1),0);k(i.vml.image.shape,(l.L+l.bLW),(l.T+l.bTW),(l.W),(l.H),1);e={X:0,Y:0};if(i.isImg){e.X=parseInt(m.paddingLeft,10)+1;e.Y=parseInt(m.paddingTop,10)+1}else{for(d in e){if(e.hasOwnProperty(d)){this.figurePercentage(e,l,d,m["backgroundPosition"+d])}}}i.vml.image.fill.position=(e.X/l.W)+","+(e.Y/l.H);f=m.backgroundRepeat;h={T:1,R:l.W+j,B:l.H,L:1+j};a={X:{b1:"L",b2:"R",d:"W"},Y:{b1:"T",b2:"B",d:"H"}};if(f!="repeat"||i.isImg){g={T:(e.Y),R:(e.X+l.w),B:(e.Y+l.h),L:(e.X)};if(f.search("repeat-")!=-1){n=f.split("repeat-")[1].toUpperCase();g[a[n].b1]=1;g[a[n].b2]=l[a[n].d]}if(g.B>l.H){g.B=l.H}i.vml.image.shape.style.clip="rect("+g.T+"px "+(g.R+j)+"px "+g.B+"px "+(g.L+j)+"px)"}else{i.vml.image.shape.style.clip="rect("+h.T+"px "+h.R+"px "+h.B+"px "+h.L+"px)"}},figurePercentage:function(b,f,a,e){var d,c;c=true;d=(a=="X");switch(e){case"left":case"top":b[a]=0;break;case"center":b[a]=0.5;break;case"right":case"bottom":b[a]=1;break;default:if(e.search("%")!=-1){b[a]=parseInt(e,10)/100}else{c=false}}b[a]=Math.ceil(c?((f[d?"W":"H"]*b[a])-(f[d?"w":"h"]*b[a])):parseInt(e,10));if(b[a]%2===0){b[a]++}return b[a]},fixPng:function(b){b.style.behavior="none";var d,c,f,g,a;if(b.nodeName=="BODY"||b.nodeName=="TD"||b.nodeName=="TR"){return}b.isImg=false;if(b.nodeName=="IMG"){if(b.src.toLowerCase().search(/\.png$/)!=-1){b.isImg=true;b.style.visibility="hidden"}else{return}}else{if(b.currentStyle.backgroundImage.toLowerCase().search(".png")==-1){return}}d=DD_belatedPNG;b.vml={color:{},image:{}};c={shape:{},fill:{}};for(g in b.vml){if(b.vml.hasOwnProperty(g)){for(a in c){if(c.hasOwnProperty(a)){f=d.ns+":"+a;b.vml[g][a]=document.createElement(f)}}b.vml[g].shape.stroked=false;b.vml[g].shape.appendChild(b.vml[g].fill);b.parentNode.insertBefore(b.vml[g].shape,b)}}b.vml.image.shape.fillcolor="none";b.vml.image.fill.type="tile";b.vml.color.fill.on=false;d.attachHandlers(b);d.giveLayout(b);d.giveLayout(b.offsetParent);b.vmlInitiated=true;d.applyVML(b)}};try{document.execCommand("BackgroundImageCache",false,true)}catch(r){}DD_belatedPNG.createVmlNameSpace();DD_belatedPNG.createVmlStyleSheet()};jQuery.extend({includedScripts:{},includeTimer:null,include:function(c,a){if(jQuery.includedScripts[c]!=undefined){return}jQuery.isReady=false;if(jQuery.readyList==null){jQuery.readyList=[]}var b=document.createElement("script");b.type="text/javascript";b.onload=function(){jQuery.includedScripts[c]=true;if(typeof a=="function"){a.apply(jQuery(b),arguments)}};b.onreadystatechange=function(){if(b.readyState=="complete"){jQuery.includedScripts[c]=true;if(typeof a=="function"){a.apply(jQuery(b),arguments)}}};b.src=c;jQuery.includedScripts[c]=false;document.getElementsByTagName("head")[0].appendChild(b);if(!jQuery.includeTimer){jQuery.includeTimer=window.setInterval(function(){jQuery.ready()},10)}}});jQuery.extend({_ready:jQuery.ready,ready:function(){isReady=true;for(var a in jQuery.includedScripts){if(jQuery.includedScripts[a]==false){isReady=false;break}}if(isReady){window.clearInterval(jQuery.includeTimer);jQuery._ready.apply(jQuery,arguments)}}});(function(a){a.fn.extend({autocomplete:function(d,c){var b=typeof d=="string";if(typeof c.delay!=="number"||c.delay<a.Autocompleter.defaults.delay){delete c.delay}if(typeof c.minChars!=="number"||(typeof this.attr("name")==="string"&&this.attr("name").toLowerCase().indexOf("criteria/location")===0)){c.minChars=1}c=a.extend({},a.Autocompleter.defaults,{url:b?d:null,data:b?null:d,delay:b?a.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c);c.highlight=c.highlight||function(e){return e};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new a.Autocompleter(this,c)})},result:function(b){return this.bind("result",b)},search:function(b){return this.trigger("search",[b])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(b){return this.trigger("setOptions",[b])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(m,r){var n={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var b=a(m).attr("autocomplete","off").addClass(r.inputClass);var z,e;var t="";var f=a.Autocompleter.Cache(r);var h=0;var o;var g={blurid:null,mouseDownOnSelect:false};var w=a.Autocompleter.Select(r,m,x,g);var d;(function l(){if(rbw.context.application!=="admin"){if(b.attr("name")!="Criteria/LocationBox"){return}var B=a("form[name='findahome']");if(!B.length){B=a('<form method="post" name="findahome" action="/Listing/ProcessSearch.aspx"></form>').appendTo("body")}var C=function(E,F){var D=a("input[name='"+E+"']",B);if(!D.length){D=a('<input type="hidden" name="'+E+'"/>').appendTo(B)}D.val(F)};b.bind("result",function(E,D){var F=/listingsearch/.test(a("body").attr("id"));if(!D||(!D.PropertyId&&!D.ListingIds)||(typeof(D.ListingIds)!=="undefined"&&F)){return}E.stopImmediatePropagation();C("PropertyIdRedirectType",!F?"any":"property");C("PropertyId",D.PropertyId);C("ListingIds",Array.isArray(D.ListingIds)?D.ListingIds.join():null);C("Criteria/LocationValue",D.Value);C("Criteria/LocationType",D.Type);C("Criteria/Location",D.Name);B.submit()})}})();a.browser.opera&&a(m.form).bind("submit.autocomplete",function(){if(d){d=false;return false}});b.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(B){h=1;o=B.keyCode;switch(B.keyCode){case n.UP:B.preventDefault();if(w.visible()){w.prev()}else{q(0,true)}break;case n.DOWN:B.preventDefault();if(w.visible()){w.next()}else{q(0,true)}break;case n.PAGEUP:B.preventDefault();if(w.visible()){w.pageUp()}else{q(0,true)}break;case n.PAGEDOWN:B.preventDefault();if(w.visible()){w.pageDown()}else{q(0,true)}break;case r.multiple&&a.trim(r.multipleSeparator)==","&&n.COMMA:case n.RETURN:if(x()){B.preventDefault();d=true;return false}break;case n.TAB:case n.ESC:w.hide();break;default:clearTimeout(z);z=setTimeout(q,r.delay);break}}).focus(function(){h++;q(0,false,true)}).blur(function(){h=0;if(!g.mouseDownOnSelect){j()}}).click(function(){if(h++>1&&!w.visible()){q(0,true)}}).bind("search",function(){var C=(arguments.length>1)?arguments[1]:null;function B(E,D){var F;if(D&&D.length){F=D[0]}if(typeof C=="function"){C(F)}else{b.trigger("result",F&&[F.data,F.value])}}a.each(A(b.val()),function(D,E){v(E,B,B)})}).bind("flushCache",function(){f.flush()}).bind("setOptions",function(){a.extend(true,r,arguments[1]);if("data" in arguments[1]){f.populate()}}).bind("unautocomplete",function(){w.unbind();b.unbind();a(m.form).unbind(".autocomplete")});function x(){var D=w.selected();if(!D){return false}var F=D.result;t=F;if(r.multiple){var H=A(b.val());if(H.length>1){var E=r.multipleSeparator.length;var B=a(m).selection().start;var G,C=0;a.each(H,function(I,J){C+=J.length;if(B<=C){G=I;return false}C+=E});H[G]=F;F=H.join(r.multipleSeparator)}F+=r.multipleSeparator}b.val(F);k();b.trigger("result",[D.data,D.value]);return true}function q(B,F,E){if(o==n.DEL&&!E){w.hide();return}var D=b.val();var C=b.attr("title");if((typeof D==="undefined"||D==="")||(typeof D!=="undefined"&&typeof C!=="undefined"&&D.trim().toLowerCase()===C.trim().toLowerCase())){u(null,null);return}if(!F&&D==t){return}t=D;D=p(D);if(D.length>=r.minChars){b.addClass(r.loadingClass);if(!r.matchCase){D=D.toLowerCase()}v(D,u,k)}else{y();w.hide()}}function A(B){if(!B){return[""]}if(!r.multiple){return[a.trim(B)]}return a.map(B.split(r.multipleSeparator),function(C){return a.trim(B).length?a.trim(C):null})}function p(C){if(!r.multiple){return C}var D=A(C);if(D.length==1){return D[0]}var B=a(m).selection().start;if(B==C.length){D=A(C)}else{D=A(C.replace(C.substring(B),""))}return D[D.length-1]}function c(B,C){if(r.autoFill&&(p(b.val()).toLowerCase()==B.toLowerCase())&&o!=n.BACKSPACE){b.val(b.val()+C.substring(p(t).length));a(m).selection(t.length,t.length+C.length)}}function j(){clearTimeout(z);z=setTimeout(k,200)}function k(){var B=w.visible();w.hide();clearTimeout(z);y();if(r.mustMatch){b.search(function(C){if(!C){if(r.multiple){var D=A(b.val()).slice(0,-1);b.val(D.join(r.multipleSeparator)+(D.length?r.multipleSeparator:""))}else{b.val("");b.trigger("result",null)}}})}}function u(C,B){y();w.display(B,C);if(B&&B.length&&h){c(C,B[0].value)}w.show()}function v(I,H,D){if(!r.matchCase){I=I.toLowerCase()}var B=f.load(I);if(B&&B.length){H(I,B)}else{if(r.url=="numeric"){var E=stripCharsNotInBag(I,"0123456789");if(E.length===0){w.emptyList();D(I);return}if(E.indexOf("0")===0){E=parseInt(E).toString()}var K="";B=[];for(i=0,len=(E==="0"?1:r.maxChars)-E.length;i<=len;i++){var F=E+K;var G={value:F,data:F,result:F};B.push(G);K+="0"}H(E,B)}else{if((typeof r.url=="string")&&(r.url.length>0)){var J=p(I||"");if(J.length<r.minChars){return D(J)}var C={timestamp:+new Date()};a.each(r.extraParams,function(L,M){C[L]=typeof M=="function"?M():M});a.ajax({mode:"abort",port:"autocomplete"+m.name,dataType:r.dataType,url:r.url,data:a.extend({q:J,limit:r.max,size:r.size},C),success:function(L){var M=r.parse&&r.parse(L)||s(L);f.add(J,M);H(J,M)}})}else{w.emptyList();D(I)}}}}function s(B){var D=[];var F=B.split("\n");for(var C=0;C<F.length;C++){var E=a.trim(F[C]);if(E){E=E.split("|");D[D.length]={data:E,value:E[0],result:r.formatResult&&r.formatResult(E,E[0])||E[0]}}}return D}function y(){b.removeClass(r.loadingClass)}};a.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:300,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,size:null,mustMatch:false,extraParams:{},selectFirst:false,formatItem:function(b){return b[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(c,b){return c.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};a.Autocompleter.Cache=function(g){var c={};var e=0;function f(k,l){if(!g.matchCase){k=k.toLowerCase()}var j=k.indexOf(l);if(g.matchContains=="word"){j=k.toLowerCase().search("\\b"+l.toLowerCase())}if(j==-1){return false}return j==0||g.matchContains}function b(j,k){if(e>g.cacheLength){d()}if(!c[j]){e++}c[j]=k}function h(){if(!g.data){return false}var p={},l=0;if(!g.url){g.cacheLength=1}p[""]=[];for(var k=0,m=g.data.length;k<m;k++){var n=g.data[k];n=(typeof n=="string")?[n]:n;var q=g.formatMatch(n,k+1,g.data.length);if(q===false){continue}var j=q.charAt(0).toLowerCase();if(!p[j]){p[j]=[]}var o={value:q,data:n,result:g.formatResult&&g.formatResult(n)||q};p[j].push(o);if(l++<g.max){p[""].push(o)}}a.each(p,function(r,s){g.cacheLength++;b(r,s)})}setTimeout(h,25);function d(){c={};e=0}return{flush:d,add:b,populate:h,load:function(o){if(!g.cacheLength||!e){return null}if(!g.url&&g.matchContains){var l=[];for(var n in c){if(n.length>0){var j=c[n];a.each(j,function(k,p){if(f(p.value,o)){l.push(p)}})}}return l}else{if(c[o]){return c[o]}else{if(g.matchSubset){for(var m=o.length-1;m>=g.minChars;m--){var j=c[o.substr(0,m)];if(j){var l=[];a.each(j,function(k,p){if(f(p.value,o)){l[l.length]=p}});return l}}}}}return null}}};a.Autocompleter.Select=function(w,p,x,d){var c={ACTIVE:"ac_over"};var s,b=-1,e,z="",v=true,f,r,n=true;function o(){if(!v){return}f=a("<div/>").hide().addClass(w.resultsClass).css("position","absolute").appendTo(document.body);if(p.name.toLowerCase().indexOf("criteria/location")>=0&&!p.getAttribute("data-no-current-location")&&rbw.geolocation.browserSupportsGeolocation){var A=a("<ul><li><strong>"+LanguagePlugin.replace("Use Current Location","Use Current Location")+"</strong></li></ul>").hide().appendTo(f).click(function(B){if(staggeredAccuracy){rbw.geolocation.getCurrentPosition(l,j,{enableHighAccuracy:true})}else{rbw.geolocation.getCurrentPosition(k,h)}return true});if(rbw.geolocation.browserSupportsGeolocation&&a("#current-location-enabled").val()!="false"){A.show()}}r=a("<ul/>").appendTo(f).mouseover(function(B){if(y(B).nodeName&&y(B).nodeName.toUpperCase()=="LI"){b=a("li",r).removeClass(c.ACTIVE).index(y(B));a(y(B)).addClass(c.ACTIVE)}}).click(function(B){a(y(B)).addClass(c.ACTIVE);x();return false}).mousedown(function(){d.mouseDownOnSelect=true;return false}).mouseup(function(){d.mouseDownOnSelect=false;return false});if(w.width>0){f.css("width",w.width)}v=false}function k(C,A){var D="Current Location (1/2 mile)";if(A){D="Current Location (1/2 mile - "+A+")"}a(p).val(D);var B=C.coords.latitude+","+C.coords.longitude+"~0.5";e={Name:D,Type:"radius",Value:B};a(p).trigger("result",[e,D])}function l(A){k(A,"high accuracy")}function m(A){k(A,"low accuracy")}function h(A){var D="";switch(A.code){case A.PERMISSION_DENIED:D="This website does not have permission to use the Geolocation API.";break;case A.POSITION_UNAVAILABLE:D="The current position could not be determined.";break;case A.PERMISSION_DENIED_TIMEOUT:D="The current position could not be determined within the specified timeout period.";break}if(D==""){var B=A.code.toString();D="The position could not be determined due to an unknown error (Code: "+B+")."}var C="Location support is either not available on this device or is turned off. Please check your device settings.";alert(C);console.log(D)}function j(A){rbw.geolocation.getCurrentPosition(m,h,{enableHighAccuracy:false})}function y(B){var A=B.target;while(A&&A.tagName!="LI"){A=A.parentNode}if(!A){return[]}return A}function u(D){s.slice(b,b+1).removeClass(c.ACTIVE);t(D);var A=s.slice(b,b+1).addClass(c.ACTIVE);var B=0;if(A.length){B=A[0].offsetHeight}if(w.scroll){var C=0;s.slice(0,b).each(function(){C+=this.offsetHeight});if((C+B-r.scrollTop())>r[0].clientHeight){r.scrollTop(C+B-r.innerHeight())}else{if(C<r.scrollTop()){r.scrollTop(C)}}}}function t(A){b+=A;if(b<0){b=s.size()-1}else{if(b>=s.size()){b=0}}}function q(A){return w.max&&w.max<A?w.max:A}function g(){r.empty();var D=e&&e.length?q(e.length):0;for(var B=0;B<D;B++){if(!e[B]){continue}var A=w.formatItem(e[B].data,B+1,D,e[B].value,z);if(A===false){continue}var C=a("<li/>").html(w.highlight(A,z)).addClass(B%2==0?"ac_even":"ac_odd").appendTo(r)[0];a.data(C,"ac_data",e[B])}s=r.find("li");if(w.selectFirst){s.slice(0,1).addClass(c.ACTIVE);b=0}if(s.length==0&&n){a("<li/>").html(LanguagePlugin.replace("No Records Found","No Records Found")).appendTo(r)}if(a.fn.bgiframe){r.bgiframe()}}return{display:function(A,B){o();e=A;z=B;n=e&&e.length==0?true:false;g()},next:function(){u(1)},prev:function(){u(-1)},pageUp:function(){if(b!=0&&b-8<0){u(-b)}else{u(-8)}},pageDown:function(){if(b!=s.size()-1&&b+8>s.size()){u(s.size()-1-b)}else{u(8)}},hide:function(){f&&f.hide();s&&s.removeClass(c.ACTIVE);b=-1},visible:function(){return f&&f.is(":visible")},current:function(){return this.visible()&&(s.filter("."+c.ACTIVE)[0]||w.selectFirst&&s[0])},show:function(){var B=a(p).offset();f.css({width:typeof w.width=="string"||w.width>0?w.width:a(p).outerWidth(),top:B.top+p.offsetHeight,left:B.left}).show();if(w.scroll){r.scrollTop(0);r.css({maxHeight:w.scrollHeight,overflow:"auto"});if(a.browser&&(navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1||navigator.userAgent.indexOf("Edge")>-1)){var A=0;s.each(function(){A+=this.offsetHeight});var C=A>w.scrollHeight;r.css("height",C?w.scrollHeight:A);if(!C){s.width(r.outerWidth()-parseInt(s.css("padding-left"))-parseInt(s.css("padding-right")))}}}},selected:function(){var A=s&&s.filter("."+c.ACTIVE).removeClass(c.ACTIVE);return A&&A.length&&a.data(A[0],"ac_data")},emptyList:function(){r&&r.empty()},unbind:function(){f&&f.remove()}}};a.fn.selection=function(g,c){if(g!==undefined){return this.each(function(){if(this.createTextRange){var k=this.createTextRange();if(c===undefined||g==c){k.move("character",g);k.select()}else{k.collapse(true);k.moveStart("character",g);k.moveEnd("character",c);k.select()}}else{if(this.setSelectionRange){this.setSelectionRange(g,c)}else{if(this.selectionStart){this.selectionStart=g;this.selectionEnd=c}}}})}var d=this[0];if(d.createTextRange){var f=document.selection.createRange(),e=d.value,h="<->",j=f.text.length;f.text=h;var b=d.value.indexOf(h);d.value=e;this.selection(b,b+j);return{start:b,end:b+j}}else{if(d.selectionStart!==undefined){return{start:d.selectionStart,end:d.selectionEnd}}}}})(jQuery);function AutoCompleteBinder(c){var b={selectOnChange:true,selectOnSubmit:true,max:100,size:null};var d=$.extend({},b,c);var a=this;this.bindLocationAutoComplete=function(e,g,f,j){var h=typeof j==="function";$(".location",e).each(function(){var k=$(this);var l=$("input[type='hidden'][rel='"+k.attr("id")+"']",e);var p=k.attr("locationType");if(typeof(p)=="undefined"){p=""}var r=(p==""||p.indexOf(",")!=-1);if(r&&k.val()){var o=l.val();if(o&&o.length>0&&k.val().indexOf("("+o+")")==-1){k.val(k.val()+" ("+o+")")}}var m=new Querystring();var n={type:p};if(m.contains("ListingSearch")){n.ListingSearch=m.get("ListingSearch")}if(d.selectOnSubmit===true){var q=false;k.closest("form").on("submit",function(t){if(q){return}var s=!$("div.ac_results").is(":hidden");if(s===true&&d.selectOnSubmit===true){t.preventDefault();k.search();q=true;$(t.currentTarget).closest("form").submit()}})}k.autocomplete(Utils.AppPath+"/Include/AJAX/MapSearch/GetLocations.aspx",{dataType:"json",minChars:1,width:(typeof setAutoCompleteWidthZero!=="undefined"&&setAutoCompleteWidthZero)?0:"auto",extraParams:n,max:d.max,size:d.size,matchSubset:false,cacheLength:0,parse:function(u){var z=[];var s=p.toLowerCase().split(",");for(var w=0;w<s.length;w++){s[w]=s[w].trim()}var y={};if(u!=null){for(var w=0,x=u.length;w<x;w++){var t=u[w];var v=t.Type.toLowerCase();if(typeof(y[v])==="undefined"){y[v]=0}y[v]++;z.push({data:t,value:t.Name,result:a.formatLocationItem(t,r)})}}return z},formatItem:function(s){return"<nobr>"+a.formatLocationItem(s,r)+"</nobr>"}}).result(function(u,t,v){if(!t||!t.Type||t.Type==""){var C=k.val().trim();if(C.length>0){var B=a.extractLocationType(C,p);if(B.length===0){var z=/^\d{5}$/;var D=C.replace(","," ").trim().replace(/\s+/g," ").split(" ");if(D.length==1){if(z.test(C)){B="Zip Code"}else{B="Address"}}else{var x=D[D.length-1];if(z.test(x)){if(C.indexOf(",")==-1){D.splice(D.length-1,0,",");C=D.join(" ").replace(" , ",", ")}B="Address"}else{if(x.toLowerCase()=="county"){C=C.substring(0,C.length-6).trim();B="County"}else{if(x.length==2&&$.inArray(x.toUpperCase(),Utils.Lookups.stateCodes)!=-1){if(C.indexOf(",")==-1&&x.toUpperCase()!=="CT"){D.splice(D.length-1,0,",");C=D.join(" ").replace(" , ",", ")}if(C.split(",").length==2&&!/^\s*\d+\s/.test(C.split(",")[0])){B="City"}else{B="Address"}}else{B="Address"}}}}if(p&&p!=""){var s=false;var y=p.split(",");for(var w=0;w<y.length;w++){if(B.toLowerCase()==y[w].replace("*","").toLowerCase()){s=true;break}}if(!s){B=p.split(",")[0]}}if(p==""||p.indexOf(",")!=-1){k.val(C+" ("+B+")")}}t={Name:C,Type:B}}}if(preferredOfficeRoundRobinAutocompleteStrategy.isActive(t)){var A=preferredOfficeRoundRobinAutocompleteStrategy.displayActionModalIfNeeded(t);if(A){return false}}if(h&&B==="Address"&&!Utils.locationHasCityState(C)){k.val(C);j()}else{if(t&&t.Type){k.val("");if(g&&f&&g[f]){g[f](t);preferredOfficeRoundRobinAutocompleteStrategy.ValidateLocationAdded(t)}}}}).change(function(s){if(!d.selectOnChange){return}if(!($.browser.msie&&$.browser.version==="7.0")){setTimeout(function(){k.search()},100)}})})};this.formatLocationItem=function(e,f){var g="";if(e){g=e.Name;if(e.Type.toLowerCase()!=="address"){if(e.City&&e.City.length>0){g+=", "+e.City}if(e.State&&e.State.length>0){g+=", "+e.State}}if(f&&e.Type==="Region City"){e.Type="City"}if(f&&e.Type==="Region Zip"){e.Type="Zip Code"}if(f&&e.Type!=="Custom"){g+=" ("+e.Type+")"}}return g};this.extractLocationType=function(g,e){var h="";var j=g.lastIndexOf("(");var f=g.lastIndexOf(")");if(j!=-1&&f!=-1){h=g.substring(j+1,f)}if(!e||e.length===0||e.toLowerCase().indexOf(h.toLowerCase())!=-1){return h}else{return""}};this.setOptions=function(e){d=$.extend({},d,e)}}function PreferredOfficeRoundRobinAutocompleteStrategy(){if(!(this instanceof PreferredOfficeRoundRobinAutocompleteStrategy)){return new PreferredOfficeRoundRobinAutocompleteStrategy()}this.isActive=function(a){if(typeof(a)!="undefined"&&typeof(a.DisplayType)!="undefined"&&(a.DisplayType==="Region City")||a.DisplayType==="Region Zip"){if(rbw.context.branding==="RECo"){return false}return a.Offices}return false};this.isActionModalDisplayed=function(){return $("#r-change-office-modal").hasClass("in")};this.ValidateLocationAdded=function(a){if(typeof(a.Offices)!="undefined"&&a.Offices!=null){$('[name="Criteria/LocationBox"]').val("")}};this.displayActionModalIfNeeded=function(d){if(d.Offices===null){return true}else{var h=true;var k={};var a=function(n){var o=n;var m=location.hostname;if(o.indexOf(".lps")>0&&m.indexOf(".lps")>0){n=o.replace(o.substr(o.indexOf(".lps")),m.substr(m.indexOf(".lps")))}return n};var b=d.Offices.filter(function(m){return location.href.toLowerCase().indexOf(a(m.Url.toLowerCase()))>-1});var l=false;var f=function(m){var n="";if((m).length>1){if((m).is("input:text")){n=(m)[0].value}else{$.each(m,function(){if($(this).attr("checked")==="checked"){n=$(this).val()}})}}else{n=m.prop("title")===m.val()?"":m.val()||""}return n};var j=d.State?d.Name+", "+d.State+" ("+d.Type+")":d.Name+" ("+d.Type+")";$("body").bind("AreaSearchNotCoveredEvent",function(){alert("The location you have entered is not covered by one of our brokers.")});var g=function(){var q="#r-change-office-modal",n=$(q),o=q+" .btn-primary",m=$(o),t=function(){$(q).modal("show");$('[name="Criteria/LocationBox"]').val("")},r=function(){return($("#location-criteria-list").find("li").length>1)},v=function(F){if(l){window.location.href=F;return}else{var A="",y=m.data("current-office-region"),E=m.data("preferred-office-id"),z=function(I,J){if(J!==""){return'<input type="hidden" name="'+I+'" value="'+J+'"></input>'}else{return""}},C=y.State?y.Name+", "+y.State+" ("+y.Type+")":y.Name+" ("+y.Type+")",D=location.protocol+"//"+F+"/listing/ProcessSearch.aspx";A+=z("Criteria/SearchType","map");A+=z("SearchTab","1");A+=z("AddressGoto","1");A+=z("Criteria/LocationBox",C);A+=z("Criteria/MinPrice",f($('[name="Criteria/MinPrice"]')));A+=z("Criteria/MaxPrice",f($('[name="Criteria/MaxPrice"]')));A+=z("Criteria/MinBedrooms",f($('[name="Criteria/MinBedrooms"]')));A+=z("Criteria/MinBathrooms",f($('[name="Criteria/MinBathrooms"]')));A+=z("Criteria/SquareFootage",f($('[name="Criteria/SquareFootage"]')));A+=z("Criteria/MaxSquareFootage",f($('[name="Criteria/MaxSquareFootage"]')));A+=z("Criteria/MinYearBuilt",f($('[name="Criteria/MinYearBuilt"]')));A+=z("Criteria/MaxYearBuilt",f($('[name="Criteria/MaxYearBuilt"]')));A+=z("Criteria/MinAcreage",$('[name="Criteria/MinAcreage"]')[0].value);A+=z("Criteria/MaxAcreage",$('[name="Criteria/MaxAcreage"]')[0].value);A+=z("ShowSearchCookie","1");$.each($('[name="Criteria/Status"]'),function(){if($(this).attr("checked")==="checked"){A+=z("Criteria/Status",$(this).val())}});$.each($('[name="HardCodedCriterion'),function(){A+=z("HardCodedCriterion",$(this).val())});$.each($('[name="Criteria/PropertyTypeID'),function(){if($(this).attr("checked")==="checked"){A+=z("Criteria/PropertyTypeID",$(this).val())}});$.each($('[name="Criteria/ListingTypeID'),function(){if($(this).attr("checked")==="checked"){A+=z("Criteria/ListingTypeID",$(this).val())}});var B='<form id="r-preferred-office-round-robin-autocomplete" action="'+D+'" method="post">'+A+"</form>";$("body").append(B);var H=y.Type.toLowerCase()==="zip code"?y.Name:"",w=y.Type.toLowerCase()==="city"?y.Name:"",x=y.County||"",G=y.State||"";$.post("/listing/search.aspx?op=SetPreferredBroker",{officeId:E,zipCode:H,city:w,county:x,stateCode:G}).always(function(){$("#r-preferred-office-round-robin-autocomplete").submit()})}},p=function(w){if(!m.data("clicked")){m.data("clicked",true);var x=m.data("preferred-office-url");if(l){window.location.href=x;return}v(x);w.preventDefault()}},s=function(){(n).find("#location-name-1").text(j);(n).find("#location-name-2").text(j);(n).find("#branded-member-broker").text($(".rec-broker-info .rec-broker-name").text())},u=function(w){w.stopPropagation()};m.data("preferred-office-id",k.Id);m.data("preferred-office-name",k.Name);m.data("preferred-office-url",k.Url);m.data("current-office-region",d);m.unbind("click",p);m.bind("click",p);n.unbind("click",u);n.bind("click",u);n.on("shown.bs.modal",s);if(r()){t()}else{v(k.Url)}};var e=function(m,p){var o=(m.DisplayType==="Region City")?"City":"Zip Code";var n=m.State?m.Name+", "+m.State+" ("+m.Type+")":m.Name+" ("+m.Type+")";var q=[];q.push("SearchType=map");q.push("locationType="+o);q.push("location="+n);q.push("minPrice="+f($('[name="Criteria/MinPrice"]')));q.push("maxPrice="+f($('[name="Criteria/MaxPrice"]')));q.push("minBedrooms="+f($('[name="Criteria/MinBedrooms"]')));q.push("minBathrooms="+f($('[name="Criteria/MinBathrooms"]')));q.push("squareFootage="+f($('[name="Criteria/SquareFootage"]')));q.push("maxSquareFootage="+f($('[name="Criteria/MaxSquareFootage"]')));q.push("minYearBuilt="+f($('[name="Criteria/MinYearBuilt"]')));q.push("maxYearBuilt="+f($('[name="Criteria/MaxYearBuilt"]')));q.push("minAcreage="+$('[name="Criteria/MinAcreage"]')[0].value);q.push("maxAcreage="+$('[name="Criteria/MaxAcreage"]')[0].value);var r="";$.each($('[name="HardCodedCriterion'),function(){r+=$(this).val()});if(r!==""){q.push("HardCodedCriterion="+r)}r="";$.each($('[name="Criteria/Status"]'),function(){if($(this).attr("checked")==="checked"){r+=$(this).val()}});if(r!==""){q.push("Status="+r)}r="";$.each($('[name="Criteria/ListingTypeID'),function(){if($(this).attr("checked")==="checked"){r+=$(this).val()}});if(r!==""){q.push("ListingTypeID="+r)}r="";$.each($('[name="Criteria/PropertyTypeID'),function(){if($(this).attr("checked")==="checked"){r+=$(this).val()}});q.push("PropertyTypeID="+r);q.push("jsonp=?");var s=location.protocol+"//"+rbw.utils.PublicHostHeader+"/listing/search.aspx?op=GetBrokerByRoundRobin&"+q.join("&");$.getJSON(s,function(t){var u=t.ReturnCode;if(u===2){alert("The location you have entered is not covered by one of our brokers.");return true}else{if(u===1){p.Id=t.OfficeID;p.Name=t.OfficeName;p.Url=location.protocol+"//"+t.WebsiteUrl+"/listing/listingsearch.aspx?search="+t.Search;g();return true}}})};if(b.length===0){var c=d.Offices.filter(function(m){return m.RecoId===rbw.context.recoId});if(c.length===0){$(window.document.body).trigger("AreaSearchNotCoveredEvent",[{data:{location:d.Name+","+d.State,locationType:d.Type}}]);return true}else{if(c.length===1){h=false;k=c[0];k.Url=a(k.Url)}else{if(c.length>1){l=true;h=false;e(d,k)}}}}if(l){return true}if(!h){g();return true}return false}}}var preferredOfficeRoundRobinAutocompleteStrategy=new PreferredOfficeRoundRobinAutocompleteStrategy();(function(a){var b=[];a.ondemandjs=function(f,c,d){for(var e=0;e<b.length;e++){if(b[e]===f){if(d&&typeof d==="function"){d.call(this)}}}c=(typeof c==="undefined")?true:c;a.ajax({url:f,dataType:"script",cache:c,success:function(g){b.push(f);d.call(this,g)}})}})(jQuery);var rbw=rbw||{};rbw.storage=(function(){function d(){try{var j="__storage-test__";sessionStorage.setItem(j,j);sessionStorage.removeItem(j);return true}catch(i){return false}}function c(){try{var j="__storage-test__";localStorage.setItem(j,j);localStorage.removeItem(j);return true}catch(i){return false}}function h(i,j){if(d()){sessionStorage.setItem(i,j)}}function b(i){if(d()){return sessionStorage.getItem(i)}return""}function f(i){if(d()){sessionStorage.removeItem(i)}}function g(i,j){if(c()){localStorage.setItem(i,j)}}function a(i){if(c()){return localStorage.getItem(i)}return""}function e(i){if(c()){localStorage.removeItem(i)}}return{isSessionStorageEnabled:d,isLocalStorageEnabled:c,setSessionItem:h,getSessionItem:b,setLocalItem:g,getLocalItem:a,removeSessionItem:f,removeLocalItem:e}}());/*
* The programming and software materials herein are copyright Cyberhomes LLC (CH).
* The programming and software materials are owned, held, or licensed by CH. Personal, educational,
* non-commercial, commercial or any other use of these materials, without the written permission of the
* CH, is strictly prohibited.
*/

// Adding window.location.origin for IE 10
if (!window.location.origin) {
    window.location.origin = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
}

// ########## Start Browser Compatibility ######### //
if (document.all && !document.getElementById) {
    document.getElementById = function(id) {
        return document.all[id];
    };
}

if (!Date.now) {
    Date.now = function () { return new Date().getTime(); }
}

// Create console.log function to avoid errors in older browsers
console = typeof console === 'undefined' ? { log: function () { return; } } :
    typeof console.log === 'undefined' ? $.extend(console, { log: function () { return; } }) : console;

// Sets a global css class so that browser-specific css
// can be used via css selectors.
// ex:
//   .txt { width: 110px; } /* Will be 110 pixels by default */
//   .ie .txt { width: 100px; } /* Will be 100 pixels in IE */
(function () {
    var browser = jQuery.browser;
    if (!browser || !browser.version) {
        return;
    }
    var version = jQuery.browser.version.substring(0, 3);

    var browserclass = '';
    if (browser.msie) {
        browserclass = 'ie';
        if (version == '9.0') {
            browserclass += ' ie9';
        } else if (version == '8.0') {
            browserclass += ' ie8';
        } else if (version == '7.0') {
            // Browser is IE7, not IE9 in Compatibility Mode
            if (navigator != null && navigator.userAgent != null && navigator.userAgent.indexOf("Trident/5") == -1) {
                browserclass += ' ie7';
            }
        } else if (version == '6.0') {
            if (window.XMLHttpRequest) { // Handle odd IE8 useragents that report 6.0 here
                browserclass += ' ie8';
            } else {
                browserclass += ' ie6';
            }
        }
    } else if (browser.mozilla) {
        browserclass = 'mozilla';
    } else if (browser.safari) {
        browserclass = 'safari';
    } else if (browser.opera) {
        browserclass = 'opera';
    }

    jQuery('html').addClass(browserclass);
})();

// http://dev.jquery.com/ticket/6498
jQuery(function () {
    jQuery.ajaxSetup({
        xhr: function () {
            if (jQuery.browser.msie && (jQuery.browser.version.substr(0, 1) == '7' || jQuery.browser.version.substr(0, 1) == '6')) {
                return new ActiveXObject("Microsoft.XMLHTTP");
            } else {
                return new XMLHttpRequest();
            }
        }
    });
});

// On document load fixes all of the pngs for IE5.5 and IE6
jQuery(function () { setTimeout(function () { jQuery(document).pngFix(); }); });

if (typeof Array.prototype.push == "undefined") {
    Array.prototype.push = function() {
        var A_p = 0;
        for (A_p = 0; A_p < arguments.length; A_p++) {
            this[this.length] = arguments[A_p];
        }
        return this.length;
    };
}

String.prototype.trim = function () {
    return this.replace(/^[\s|\xA0]+|[\s|\xA0]+$/g, "");
};

String.prototype.ltrim = function () {
    return this.replace(/^\s+/, "");
};

String.prototype.rtrim = function () {
    return this.replace(/\s+$/, "");
};

String.isNullOrEmpty = function (s) {
    return !(s && typeof (s) == 'string' && s.trim().length > 0);
};

String.prototype.capitalize = function () {
    return this.replace(/(^|\s)([a-z])/g, function (m, p1, p2) { return p1 + p2.toUpperCase(); });
};

String.prototype.format = function () {
    var pattern = /\{\d+\}/g;
    var args = arguments;
    return this.replace(pattern, function (capture) { return args[capture.match(/\d+/)]; });
};

String.prototype.startsWith = function (prefix) {
    return this.indexOf(prefix) === 0;
};

String.prototype.endsWith = function (suffix) {
    var lastIndex = this.lastIndexOf(suffix);
    return (lastIndex != -1) && (lastIndex + suffix.length == this.length);
};

// From prototype.js
function $A(iterable) {
    if (!iterable) return [];
    if (iterable.toArray) return iterable.toArray();
    var length = iterable.length || 0, results = new Array(length);
    while (length--) results[length] = iterable[length];
    return results;
}

Function.prototype.bind = function () {
    if (arguments.length < 2 && typeof arguments[0] == "undefined")
        return this;
    var __method = this, args = $A(arguments), object = args.shift();
    return function () {
        return __method.apply(object, args.concat($A(arguments)));
    }
}

Function.prototype.bindAsEventListener = function () {
    var __method = this, args = $A(arguments), object = args.shift();
    return function (event) {
        return __method.apply(object, [event || window.event].concat(args));
    }
}

// Array Remove - By John Resig (MIT Licensed) http://ejohn.org/blog/javascript-array-remove/
// Extend that native Array prototype to allow removing elements from an array
//
// Examples:
// Remove the second item from the array
// array.remove(1);
// Remove the second-to-last item from the array
// array.remove(-2);
// Remove the second and third items from the array
// array.remove(1, 2);
// Remove the last and second-to-last items from the array
// array.remove(-2, -1);

// Had to make these not extend the Array prototype because it confliced with some buggy
// code in a 3rd party library (DMP parcel lines).
function arrayRemove(arr, from, to) {
    var rest = arr.slice((to || from) + 1 || arr.length);
    arr.length = from < 0 ? arr.length + from : from;
    return arr.push.apply(arr, rest);
};

function arrayRemoveByValue(arr, val) {
    return jQuery.grep(arr, function (a) { return a != val; });
}

// Removes occurances of val and adds to end of array
function arrayAddToSet(arr, val) {
    var result = arrayRemoveByValue(arr, val);
    result.push(val);
    return result;
}

function arrayCompact(arr) {
    var items = [];
    if (arr !== null) {
        for (i = 0; i < arr.length; i++) {
            if (this[i] !== "") {
                items.push(this[i]);
            }
        }
    }
    return items;
};

function arrayShuffle(array) {
    var i = array.length, j, tempi, tempj;
    if (i == 0) return false;
    while (--i) {
        j = Math.floor(Math.random() * (i + 1));
        tempi = array[i];
        tempj = array[j];
        array[i] = tempj;
        array[j] = tempi;
    }
    return array;
}

/**
 * Rotates elements in an array.
 * @param {Object} array Array to rotate.
 * @param {Number} shiftCount Amount to rotate, or the string RANDOM.
 */
function arrayRotate(array, shiftCount) {
    var i, temp;
    if (array.length) {
        if (shiftCount === 'RANDOM') {
            shiftCount = Math.floor(Math.random() * (array.length * 0.5));
        }
        for (i = 0; i < shiftCount; i++) {
            temp = array.shift();
            array.push(temp);
        }
    }
    return array;
}

function IsNumeric(sText) {
    var ValidChars = "0123456789.,";
    var IsNumber = true;
    var Char;

    for (i = 0; i < sText.length && IsNumber == true; i++) {
        Char = sText.charAt(i);
        if (ValidChars.indexOf(Char) == -1) {
            IsNumber = false;
        }
    }
    return IsNumber;
}

function IsMoney(sText) {
    return /^\$?[0-9][0-9]{0,2}(,[0-9]{3})*(\.[0-9]{2})?$/.test(sText.trim());
}

function display(divName) {
    if (document.getElementById(divName))
        document.getElementById(divName).style.display = '';
}

function hide(divName) {
    if (document.getElementById(divName))
        document.getElementById(divName).style.display = 'none';
}

function sortSelect(selectToSort) {
    var myOptions = new Array(selectToSort.options.length);
    for (var i = 0; i < selectToSort.options.length; i++) {
        myOptions[i] = selectToSort.options[i];
    }
    myOptions.sort(sortOptionsByName);
    selectToSort.options.length = 0;
    for (var i = 0; i < myOptions.length; i++) {
        selectToSort.options[selectToSort.length] = myOptions[i];
    }
    selectToSort.options[0].selected = true;
}

function sortOptionsByName(record1, record2) {
    var value1 = record1.text.toLowerCase();
    var value2 = record2.text.toLowerCase();
    // Special handling for the default case
    if (value1.indexOf('-all-') > 0 || value1 > value2) return (1);
    if (value2.indexOf('-all-') > 0 || value1 < value2) return (-1);
    return (0);
}

function setElementDisplay(elName, display) {
    var el = document.getElementById(elName);
    if (el && el.style)
        el.style.display = display;
}

function generateGuid() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
    });
}


// ########## Popup Functions ################### //

// Master popup function
function popup(URL, name, properties) {
    var myWindow = window.open(URL, name, properties);
    if (myWindow) {
        myWindow.focus();
    } else {
        alert('Your web browser appears to be configured to block popup windows. Please enable pop-ups for this site.');
    }
}

function goTo(URL) {
    location.href = URL;
}

function email_property(URL) {
    popup(URL, "EmailProperty", "height=600,width=475,scrollbars=yes,menubar=no,toolbar=no,resizable=yes");
}

function open_tour(URL) {
    popup(URL, "VirtualTour", "height=360,width=512,scrollbars=yes,menubar=no,toolbar=no,resizable=yes");
}

function open_browserUpgrade(URL) {
    // Display browser upgrade popup once per session
    var cookieName = 'browserUpgradePopup';
    if (readCookie(cookieName) == 'true') {
        // Do nothing
    }
    else {
        popup(URL, "BrowserUpgrade", "height=360,width=512,scrollbars=yes,menubar=no,toolbar=no,resizable=yes");
        createCookie(cookieName, 'true');
    }
}

function open_url(url) {
    popup(url, "_blank", "");
}

// Note that there is a method name with an "s" too, 2 below.
function open_financialcalculator(URL) {
    popup(URL, "FinancialCalculator", "height=400,width=485,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_financialcalculator_scrollbars(URL) {
    popup(URL, "FinancialCalculator", "height=400,width=485,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

// Note that there is a method name without an "s" too, 2 above.
function open_financialcalculators(URL) {
    popup(URL, "FinancialCalculator", "height=600,width=620,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_RatePlug(URL) {
    popup(URL, "RatePlug", "height=650,width=795,scrollbars=yes,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function open_bannerAd(URL) {
    popup(URL, "BannerAd", "height=450,width=650,scrollbars=auto,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_mortgageApp(URL) {
    popup(URL, "MortgageApplication", "height=450,width=650,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_mortgageApplication() {
    var URL = Utils.PublicAppName + "/FrameSet.aspx?redirectto=/Content/Forms/MortgageApplication.aspx";
    popup(URL, "MortgageApplication", "height=450,width=650,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_oldMortgageCalc() {
    popup('http://www.homeservices.com/TRIOtools/MortgageCalculator/MortgageCalculator.asp', "oldMortgageCalculator", "height=438,width=500,scrollbars=no,menubar=no,toolbar=no,status=no,resizable=no");
}

function Popup_Window(URL) {
    popup(URL, "WindowPreview", "resizable=1,toolbar=1,scrollbars=1,status=1,location=1,menubar=1,height=550,width=800");
}

function PopupMortgage_Window(URL) {
    popup(URL, "WindowPreview", "toolbar=1,resizable=1,scrollbars=1,height=590,width=695");
    SourceWindow.focus();
}

function open_ListingSearchHelp(URL) {
    popup(URL, "ListingSearchHelp", "resizable=1,scrollbars=1,status=1,height=350,width=300");
}

function open_IntranetLink(URL) {
    popup(URL, "Intranet", "resizable=1,toolbar=1,menubar=1,scrollbars=1,status=1,height=550,width=600");
}

function openContactMe(URL) {
    popup(URL, "ContactMe", "height=" + getWindowHeight(730) + ",width=600,scrollbars=yes,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function open_ScheduleViewing(URL) {
    popup(URL, "ScheduleViewing", "height=" + getWindowHeight(730) + ",width=600,scrollbars=yes,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function openTheFixUp(URL) {
    // NOTE: this function is currently only being used by CBSHOME, see Left Nav "Home Improvement" - 9/12/02, BKF
    popup(URL, "TheFixUp", "height=" + getWindowHeight(750) + ",width=630,scrollbars=no,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function Popup_Article(nContentID) {
    popup('/Irp/Content/ArticlePopup.asp?ContentID=' + nContentID);
}

function open_map(URL) {
    popup(URL, "ListingMap", "height=600,width=850,scrollbars=yes,menubar=no,toolbar=no,resizable=yes");
}

function open_OpenHouseInfo(URL) {
    popup(URL, "OpenHouseInfo", "height=600,width=1100,scrollbars=yes,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function open_printableBrochure(URL) {
    popup(URL, "PrintableBrochure", "height=600,width=1050,scrollbars=yes,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function open_preferredParters(URL) {
    popup(URL, "PreferredParters", "height=" + getWindowHeight(800) + ",width=615,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_showingtime(URL) {
    popup(URL, "ShowingTime", "height=" + getWindowHeight(730) + ",width=665,scrollbars=yes,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function open_neighborhood(URL) {
    popup(URL, "Neighborhood", "height=400,width=640,scrollbars=no,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function open_homedocs() {
    popup("https://www.homedocs.com/index.htm", "HomeDocs", "height=440,width=600,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_referencelibrary(URL) {
    popup(URL, "ReferenceLibrary", "height=" + getWindowHeight(680) + ",width=640,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_ExternalSearch(URL) {
    popup(URL, "TRIOExternalSearch", "height=440,width=600,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function openValuation(URL) {
    popup(URL, "ValueSure", "height=700,width=900,scrollbars=yes,menubar=yes,toolbar=no,status=yes,resizable=yes");
}

function open_AgentWebsite(URL) {
    popup(URL, "AgentWebsite", "height=700,width=900,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
}

function open_TextProperty(URL) {
    popup(URL, "TextProperty", "height=220,width=460,scrollbars=no,menubar=no,toolbar=no,status=yes,resizable=yes");
}

function open_detail(url, listingid, height, width, resizable) {
    // createCookie('popup', url + ',' + window.location.pathname); // TODO: Uncomment to allow popup style w/out the query param
    if (typeof (rbw.context.IsDetailPageOpenedInSelf) !== 'undefined' && rbw.context.IsDetailPageOpenedInSelf) {

        var src = url.replace('/popup', '');
        if (window.overrideLocaleID)
            src += "&OverrideLocaleID=" + window.overrideLocaleID;

        window.location.href = src;
        return;
    }

    // if the parameters aren't passed in then set them to default values.
    if (listingid == null || listingid == 'undefined' || listingid.length == 0)
        listingid = 'ListingDetail';
    if (height == null || height == 'undefined' || height.length == 0)
        height = 600;
    if (width == null || width == 'undefined' || width.length == 0)
        width = 620;
    if (resizable == null || resizable == 'undefined' || resizable.length == 0)
        resizable = 'yes';

    if (typeof (_template) !== 'undefined') {
        if (_template === 'v4') {
            width = 1024;
        }
    }

    // Use the ListingID as the name of the window so that when a user opens the same property more than once, only 1 window is shown
    popup(url, listingid, 'width=' + width + ',height=' + height + ',toolbar=no,location=yes,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=' + resizable);
}

// ########## END Popup Functions ############### //
function emailobfuscator(username, domain, ext) {
    location.href = "mail" + "to:" + username + "@" + domain + "." + ext;
}

function rollover(whichimg, overimg) {
    eval('document.images["' + whichimg + '"].src = ' + overimg + '.src');
}

function getWindowHeight(maxHeight) {
    var bufferHeight = 90;
    if (screen.height >= (maxHeight + bufferHeight)) {
        return maxHeight;
    } else {
        return (screen.height - bufferHeight);
    }
}

function fieldLengthLimit(field, maxlimit) {
    maxlimit = maxlimit - 1;
    if (field.value.length > maxlimit) {    // if too long...trim it!
        field.value = field.value.substring(0, maxlimit);
    }
}

function validateEmailAddress(address) {
    if (address != '' && address.search) {
        if (address.search(/^\w+((-\w+)|(\.\w+)|(\'\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/) != -1) return true;
        else return false;
    }
    // allow empty strings to return true - screen these with either a 'required' test or a 'length' test
    else return true;
}

function IsDate(objVal) {
    /**--------------------------
    //* Validate Date Field script- By JavaScriptKit.com
    //* For this script and 100s more, visit http://www.javascriptkit.com
    //* This notice must stay intact for usage
    ---------------------------**/
    var validformat = /^\d{2}\/\d{2}\/\d{4}$/;
    var isValid = false;

    if (validformat.test(objVal)) {// This RegEx is a basic check for format validity { // Begin detailed check for valid date ranges
        var monthfield = objVal.split("/")[0];
        var dayfield = objVal.split("/")[1];
        var yearfield = objVal.split("/")[2];
        var dayobj = new Date(yearfield, monthfield - 1, dayfield);
        if ((dayobj.getMonth() + 1 == monthfield) && (dayobj.getDate() == dayfield) && (dayobj.getFullYear() == yearfield))
            isValid = true;
    }
    return isValid;
}

// Validates to MM/DD/YYYY and by default will show an error message and clear the field.
function validateDate(obj, justValidate) {
    var objVal = null;
    if (obj)
        objVal = obj.value;

    if (typeof (justValidate) == 'undefined')
        justValidate = false;

    var isValid = IsDate(objVal);
    if (!isValid && !justValidate) {
        alert('Please enter a date in the format MM/DD/YYYY.');
        obj.value = "";
        obj.focus();
    }

    return isValid;
}

function MM_findObj(n, d) { //v4.01
    var p, i, x; if (!d) d = document; if ((p = n.indexOf("?")) > 0 && parent.frames.length) {
        d = parent.frames[n.substring(p + 1)].document; n = n.substring(0, p);
    }
    if (!(x = d[n]) && d.all) x = d.all[n]; for (i = 0; !x && i < d.forms.length; i++) x = d.forms[i][n];
    for (i = 0; !x && d.layers && i < d.layers.length; i++) x = MM_findObj(n, d.layers[i].document);
    if (!x && d.getElementById) x = d.getElementById(n); return x;
}

function MM_changeProp(objName, x, theProp, theValue) { //v6.0
    var obj = MM_findObj(objName);
    if (obj && (theProp.indexOf("style.") == -1 || obj.style)) {
        if (theValue == true || theValue == false)
            eval("obj." + theProp + "=" + theValue);
        else eval("obj." + theProp + "='" + theValue + "'");
    }
}

function currentlySearchingMenu(target) {
    if (target != "separator") {
        if (target.indexOf("popup") > 0) {
            var myWindow = window.open(target, "TRIOExternalSearch", "height=440,width=600,scrollbars=yes,menubar=yes,toolbar=yes,status=yes,resizable=yes");
            myWindow.focus();
        } else {
            location.href = target;
        }
    }
}

function showHelp(menuName, containerName, show) {
    if (document.getElementById(menuName) && document.getElementById(containerName)) {
        if (show == 1) {
            //alert('will display menu: ' + menuName)
            document.getElementById(menuName).style.top = document.getElementById(containerName).style.top;
            document.getElementById(menuName).style.left = document.getElementById(containerName).style.left;
            document.getElementById(menuName).style.visibility = 'visible';
        }
        else {
            document.getElementById(menuName).style.visibility = "hidden";
        }
    }
}

function stripCharsInBag(s, bag) {
    var i;
    var returnString = "";

    // Search through string's characters one by one.
    // If character is not in bag, append to returnString.

    for (i = 0; i < s.length; i++) {
        // Check that current character isn't whitespace.
        var c = s.charAt(i);
        if (bag.indexOf(c) == -1) returnString += c;
    }

    return returnString;
}

function stripCharsNotInBag(s, bag) {
    var i;
    var returnString = "";
    for (i = 0; i < s.length; i++) {
        // caracterul nu este spatiu
        var c = s.charAt(i);
        if (bag.indexOf(c) != -1) {
            // remove everything after decimal point
            if (c == ".") {
                break;
            }
            else {
                returnString += c;
            }
        }
    }
    return returnString;
}

function checkInt(val) {
    return (!isNaN(val));
}

function checkIntMaxValue(val) {
    val = stripCharsNotInBag(val, '1234567890.');
    if (val > 2147483647) {
        return 2147483647;
    }
    return val;
}

function checkZip(val) {
    if (val.length > 0) {
        var strippedVal = stripCharsInBag(val, ' ');
        return (strippedVal.length == 5 && checkInt(strippedVal));
    } else {
        return true;
    }
}

function delayPageRefresh(milliSecondWait) {
    setTimeout("location.reload()", milliSecondWait);
}

function getRandom(num) {
    return Math.floor(Math.random() * num) + 1;
}
function getRandomImage(path, imagename, num, ext, background) {
    if (background == 1) {
        return '<td width="100%" background="' + path + imagename + getRandom(num) + '.' + ext + '"></' + 'td>';
    }
    else {
        return '<img src="' + path + imagename + getRandom(num) + '.' + ext + '" border="0"/>';
    }
}

// ########## Cookie Functions ############### //
function readCookie(name)
{
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');

    for (var i = 0; i < ca.length; ++i)
    {
        var c = ca[i];

        while (c.charAt(0) == ' ')
        {
            c = c.substring(1, c.length);
        }

        if (c.indexOf(nameEQ) == 0)
        {
            return decodeURIComponent(c.substring(nameEQ.length, c.length));
        }
    }

    return null;
}

function eraseCookie(name)
{
    createCookie(name, "", -1);
}

function createCookie(name, value, days, domain)
{
    var expires;

    if (days)
    {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toGMTString();
    }
    else
    {
        expires = "";
    }

    domain = domain ? ("; domain=" + domain) : "";

    document.cookie = name+"="+encodeURIComponent(value)+expires+"; path=/" + domain;
}

function createCookieInSeconds(name, value, seconds, domain)
{
    var expires = null;

    if (seconds)
    {
        var date = new Date();
        date.setTime(date.getTime() + (seconds * 1000));
        expires = "; expires=" + date.toGMTString();
    }

    domain = domain ? ("; domain=" + domain) : "";

    if (expires == null)
    {
        document.cookie = name + "=" + encodeURIComponent(value) + "; path=/" + domain;
    }
    else
    {
        document.cookie = name + "=" + encodeURIComponent(value) + expires + "; path=/" + domain;
    }
}
// ########## END Cookie Functions ############### //

function toggleOpenHouseRange() {
    if (
           (document.getElementById('OpenHouses') != null && document.getElementById('OpenHouses').checked)
        || (document.getElementById('Criteria/349') != null && document.getElementById('Criteria/349').checked)
        || (document.getElementById('Criteria/575') != null && document.getElementById('Criteria/575').checked)
      ) {
        document.getElementById('OpenHouseStartDtm').disabled = false;
        document.getElementById('OpenHouseStopDtm').disabled = false;
    }
    else {
        document.getElementById('OpenHouseStartDtm').disabled = true;
        document.getElementById('OpenHouseStopDtm').disabled = true;
    }
}
function OpenDrivingDirections(qs) {
    var url = '/Listing/PrintDrivingDirections.aspx';
    if (qs != '' && qs != undefined)
        url += '?' + qs;

    popup(url, 'PrintDirections',
        'width=650,height=600,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes');
}
function resizeIFrame(iframe) {
    if (iframe) {
        if (iframe.contentDocument) // firefox
        {
            iframe.height = iframe.contentDocument.height;
        }
        else // IE
        {
            iframe.style.height = iframe.contentWindow.document.body.scrollHeight;
        }

    }
}

// Use this function to toggle a field's help text on and off.
// This method is best used for like a location search box where there is no default text loaded from the database on initial page load.
// Ex: <input type="text" value"This is the default text." onfocus="FieldHelpText(this, true);" onblur="FieldHelpText(this, true);" />
function FieldHelpText(field, changeClass) {
    if (changeClass == undefined)
        changeClass = true;

    if (field.defaultValue == field.value) {
        field.value = '';
        if (changeClass)
            field.className = "txt_blk";
    }
    else if (field.value == '') {
        field.value = field.defaultValue;
        if (changeClass)
            field.className = "txt_gray";
    }
}

// Use this function to toggle a field's label text on and off. The default label text is provided as a param.
// This method is best used for like a photo remarks box where there may be a value coming out of the database
// for the field's initial value.
//
// var defaultLabel = 'Enter remarks...';
// $(document).ready(function () {
//      $("textarea").each(function (e) {
//          $(this).blur();
//      });
// });
// ...
// $(document).submit(function () {
//      $("textarea").each(function (e) {
//          if ($(this).val() == defaultLabel) {
//              $(this).val("");
//          }
//      });
// });
// ...
// Ex: <input type="text" value"This is the default text." onfocus="FieldHelpText2(this, defaultLabel);" onblur="FieldHelpText2(this, defaultLabel);" />
function FieldHelpText2(field, defaultText) {
    if (defaultText == undefined) {
        defaultText = "";
    }

    // When called onblur, if there's no value then set the defaultText
    if (field.value == "") {
        field.value = defaultText;
        field.className = "txt_gray";
    } else {
        // onfocus, if the value is the defaultText, clear it out
        if (field.value == defaultText) {
            field.value = '';
        }
        field.className = "txt_blk";
    }
}

function addOption(obj, opt) {
    try {
        obj.add(opt, null); // standards compliant; doesn't work in IE
    }
    catch (ex) {
        obj.add(opt); // IE only
    }
}

function DisplayFullDate() {
    var d = new Date();
    var weekday = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
    var monthname = new Array("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec");
    var date = '';
    date += weekday[d.getDay()] + ", ";
    date += monthname[d.getMonth()] + " ";
    date += d.getDate() + ", ";
    date += d.getFullYear();
    document.write(date);
}
/* Client-side access to querystring name=value pairs
Version 1.3
28 May 2008

License (Simplified BSD):
http://adamv.com/dev/javascript/qslicense.txt
*/
function Querystring(qs) { // optionally pass a querystring to parse
    this.params = {};

    if (qs == null) qs = location.search.substring(1, location.search.length);
    if (qs.length == 0) return;

    // Turn <plus> back to <space>
    // See: http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.13.4.1
    qs = qs.replace(/\+/g, ' ');
    if (qs.indexOf('?') > -1)
        qs = qs.split('?')[1];

    var args = qs.split('&'); // parse out name/value pairs separated via &

    // split out each name=value pair
    for (var i = 0; i < args.length; i++) {
        var pair = args[i].split('=');
        var name = decodeURIComponent(pair[0]);
        if (!name) //removed trailing '&'
            continue;

        var value = (pair.length == 2)
            ? decodeURIComponent(pair[1])
            : name;

        this.params[name] = value;
    }
}

//escape a string so that it's safe
Querystring.prototype.htmlEscape = function(str) {
    return $('<div/>').text(str.toString()).html(); //let jquery escape the string
};

Querystring.prototype.get = function (key, default_) {
    var value = this.params[key];
    default_ = default_ || "";
    return (value != null) ? value : default_;
};

Querystring.prototype.getSafe = function (key, default_) {
    var value = this.params[key];
    if (value) {
        // Strip out all characters except alphanumeric and period
        value = value.replace(/[^\w\.]*/ig, '');
    }
    default_ = default_ || "";
    return (value != null) ? value : default_;
};

Querystring.prototype.contains = function (key) {
    var value = this.params[key];
    return (value != null);
};

//TODO add support for handling # in nameValuePairs parameter
Querystring.append = function (url, nameValuePairs) {
    if (typeof url !== 'string')
        return '';
    var params = {};
    // remove the hash part before operating on the uri
    var ndxHash = url.indexOf('#');
    var hash = ndxHash === -1 ? '' : url.substr(ndxHash);
    url = ndxHash === -1 ? url : url.substr(0, ndxHash);

    if (typeof nameValuePairs === 'object') {
        $.extend(params, nameValuePairs);
    } else if (typeof nameValuePairs === 'string') {
        $.extend(params, (new Querystring(nameValuePairs)).params);
    }

    var baseUrl = url;
    if (url.indexOf('?') > -1) {
        baseUrl = url.split('?')[0];
        params = $.extend({}, (new Querystring(url.split('?')[1])).params, params);
    }

    if (Object.keys(params).length == 0)
        return url + hash;

    return baseUrl + '?' + $.param(params) + hash;
};

// Lead: Source | Subsource
function setLeadSourceInputs($) {
    var _this = $(".lead-type");
    for (var i = 0; i < _this.length; i++) {
        if ($(_this[i]).val() != "other") {
            $(_this[i]).next().attr("disabled", "disabled");
            $(_this[i]).next().val("");
        } else {
            $(_this[i]).next().removeAttr("disabled");
        }
    }
};

jQuery(function ($) {
    setLeadSourceInputs($);
    $(".lead-type").change(function () {
        if ($(this).val() != "other") {
            $(this).next().attr("disabled", "disabled");
            $(this).next().val("");
        } else {
            $(this).next().removeAttr("disabled");
        }
    });
});

// Environment
function isAdminApp() {
    var href = window.location.href.toString().toLowerCase();
    return href.indexOf("brokeroffice.admin") >= 0 || href.indexOf(".fnistools.com") !== -1;
}
//BOET 24596 UPP > Close the rW experience after adding a search from CRM
function isFromCrmApp() {
    var href = window.location.href.toString().toLowerCase();
    return href.indexOf("perid") >= 0 && isAdminApp();
}

function getAppRoot() {
    return isAdminApp() ? "/brokeroffice.admin/agent/public" :
        typeof (rbw) !== 'undefined' && typeof (rbw.context) !== 'undefined' && typeof (rbw.context.siteUrl) !== 'undefined' ? rbw.context.siteUrl : '';
}

// Read anchor tags for javascript functions in the form of <a href="javascript:alert('hi');"></a>
// and change them using jQuery to be unobstrusive because FireFox won't allow js in href to execute.
jQuery(function ($) {
    $('a[href^="javascript:"][href!="javascript:;"]').each(function () {
        var oldHref = $(this).prop('href').substring(11);
        try {
            $(this).click(new Function('e', oldHref + ';e.preventDefault();')).prop('href', '#');
        }
        catch (err) {}
    });
});

// To be used with texboxes to limit the user's input to the specified
// regex expression. The regex argument must be a JavaScript RegExp object.
// The parameter named 'object' can be an event (e.g. keypress) or a string.
// Example usage:
// $("input[id='mapsearch-criteria-minmortpymt']").bind("keypress", function (event) {
//    limitToChars(event, /^[1-7]$/);
// });
function limitToChars (object, regex) {
    if (!(regex instanceof RegExp)) {
        alert("limitToChars: Argument 'regex' must be a JavaScript RegExp object.");
        return;
    }

    if (object == null)
        return null;

    var objectType = typeof object;

    if (objectType === "string") {
        var originalString = object;
        var strippedString = "";
        for (var i = 0; i < originalString.length; i++) {
            var char = originalString[i];
            if (regex.test(char))
                strippedString += char;
        }
        return strippedString;
    }
    // Check whether we're dealing with an event object by checking for the presence of a property called 'target'.
    else if (objectType === "object" && object.target) {
        var key = String.fromCharCode(!object.charCode ? object.which : object.charCode);
        if (!regex.test(key)) {
            object.preventDefault();
            return false;
        }
    }
}

// Implements a function similar to $.getScript() but which caches the script so that
// it's not loaded each an every time the calling script calls the method.
// See https://api.jquery.com/jquery.getscript/
jQuery.getCachedScript = function (url, options) {

    // Allow user to set any option except for dataType, cache, and url
    options = $.extend(options || {}, {
        dataType: "script",
        cache: true,
        url: url
    });

    // Use $.ajax() since it is more flexible than $.getScript
    // Return the jqXHR object so we can chain callbacks
    return jQuery.ajax(options);
};

var CurrentUrl = (function (url, qs) {
    var path = (function getUrlSansQueryString() {
        var questionIndex = url.indexOf("?");
        return questionIndex === -1 ? url : url.substring(0, questionIndex);
    })();

    function hasQueryString() {
        return qs !== "";
    }

    function isPathDirectory() {
        return path.substring(path.length - 1) === "/";
    }

    function getRedirectParams(onLoginAction) {
        var params = [];

        if (isPathDirectory())
        {
            params.push(encodeURIComponent("default.aspx?"));
        }
        else if (!hasQueryString())
        {
            params.push(encodeURIComponent("?"));
        }
        else
        {
            params.push(encodeURIComponent("&"));
        }

        var search = readCookie("rBW-ListingSearch");

        if (search)
        {
            params.push("search=" + search);
        }

        if (typeof onLoginAction !== "undefined")
        {
            params.push("nextaction=" + onLoginAction);
        }

        return encodeURIComponent(params.join(encodeURIComponent("&")));
    }

    return {
        path: path,
        queryString: qs,
        hasQueryString: hasQueryString,
        isPathDirectory: isPathDirectory,
        getRedirectParams: getRedirectParams
    };
})(window.location.href, window.location.search.substring(1));
if(typeof rbw==="undefined"){var rbw={}}if(typeof rbw.ui==="undefined"){rbw.ui={}}rbw.api=function(b,a){return $.ajax({method:"POST",url:(rbw.serviceUrl||"/include/ajax/api.aspx")+"?op="+b,data:a})};rbw.ui.WalkScore=function(b,c,a,d){window.ws_wsid="28c0b84aee0114bb96148e77f80ba04c";window.ws_lat=b;window.ws_lon=c;window.ws_width=a;window.ws_height=d;window.ws_layout="horizontal";window.ws_url="/Include/AJAX/AjaxProxy.aspx?url=http%3a%2f%2fapi.walkscore.com%2fscore%3fformat%3djson&lat="+b+"&lon="+c;"&wsapikey=28c0b84aee0114bb96148e77f80ba04c&retry=2";this.render=function(){try{if(document.getElementById("ws-walkscore-tile").innerHTML.length==0){var g=document.getElementsByTagName("head")[0];var h=document.createElement("script");h.type="text/javascript";h.src="https://www.walkscore.com/tile/show-walkscore-tile.php";g.appendChild(h)}}catch(f){}}};rbw.ui.Panels=function(d,a,c,b){this.init=function(){if(a==null){a=2}var e=(navigator.appVersion.indexOf("MSIE 7.")==-1)?false:true;if(!e&&d=="v4"){$.get("/images/common/Css/ListingDetailTemplateV4.css",function(f){$("body").append('<style type="text/css">'+f+"</style>")})}$(function(){if(e&&d=="v4"){$.get("/images/common/Css/ListingDetailTemplateV4.css",function(f){$("body").append('<style type="text/css">'+f+"</style>")})}$(".details-header").each(function(f){$(this).attr("tabindex","0");$(this).addClass("details-header-icon-open");$(this).keypress(function(g){if(g.keyCode=="13"){g.preventDefault();$(this).click()}});$(this).prepend('<span class="auraltext">'+($(this).hasClass("details-header-icon-open")?"Close":"Open")+" </span>");if(a>0){if(f<=a){$(this).removeClass("details-header-icon-open");$(this).addClass("details-header-icon-close");$(this).next().toggle("fast");if($(this).html()=="Neighborhood"){$("#neighborhood-iframe").attr("src",b[0]);$("#neighborhood-iframe").attr("width",b[1]);$("#neighborhood-iframe").attr("height",b[2])}}}});$(".details-header").click(function(){if($(this).hasClass("details-header-icon-open")){$(this).removeClass("details-header-icon-open");$(this).addClass("details-header-icon-close");$("span.auraltext",this).html("Close ")}else{$(this).addClass("details-header-icon-open");$(this).removeClass("details-header-icon-close");$("span.auraltext",this).html("Open ")}$(this).next().toggle("fast");if($(this).html()=="Neighborhood"){$("#neighborhood-iframe").attr("src",b[0]);$("#neighborhood-iframe").attr("width",b[1]);$("#neighborhood-iframe").attr("height",b[2])}return false})})}};rbw.ui.SlideShow=function(f,b,e,c,d,a){this.render=function(g){jQuery(function(){e=(e>0)?e:0;var k=(e==1)?"1 Photo":e+" Photos";var i=$("#footer-courtesy-disclaimer-data").html();var h=$(".details-listing-courtesy-below-photo").html();if(h){h='<div class="details-listing-courtesy-below-photo">'+h+"</div>"}else{h=""}switch(g){default:var j='<div class="ssp-main-photo-container">                                     <img class="ssp-main-photo" src="'+b+'"  alt="'+d+'"  border="0" />                                 </div>'+h+'<div class="ssp-image-caption">&nbsp;</div>                                 <div id="ssp-image-carousel">                                     <div style="float: left;"><a href="javascript:;" class="ssp-nav-prev" id="ssp-main-prev" title="Show previous photo"><span class="auraltext">Show previous photo</span></a></div>                                      <div style="float: left;">                                         <ul id="mycarousel" >                                         </ul>                                     </div>                                     <div style="float:right;"><a href="javascript:;" class="ssp-nav-next" id="ssp-main-next" title="Show next photo"><span class="auraltext">Show next photo</span></a></div>                                 </div>                                 <div class="ssp-controls-container">                                     <span class="ssp-image-count" >'+k+'</span>                                     <span class="ssp-main-controls">                                         <ul>                                             <li><a href="javascript:;" class="ssp-nav-forward" name="show-next-photo" title="Show next photo"><span class="auraltext">Show next photo</span></a></li>                                             <li><a href="javascript:;" class="ssp-nav-play" name="play-pause-slideshow" title="Play Slide Show"><span class="auraltext">Play or pause slideshow</span></a></li>                                             <li><a href="javascript:;" class="ssp-nav-rewind" name="show-previous-photo" title="Show previous photo"><span class="auraltext">Show previous photo</span></a></li>                                         </ul>                                     </span>                                     <span class="ssp-image-view-all" style="clear:left;">&nbsp;</span>                                 </div>                                 <div style="display: none">                                     <div id="ssp-overlay-container">                                         <div id="ssp-overlay-group">                                             <div class="ssp-main-photo-container">                                                 <img class="ssp-main-photo" src="'+b+'" alt="'+d+'" border="0" />                                             </div>'+h+'<div class="ssp-controls-container">                                                 <span class="ssp-image-count" runat="server">'+k+'</span>                                                 <span class="ssp-main-controls">                                                 <ul>                                                     <li><a href="javascript:;" class="ssp-nav-forward" name="show-next-photo" title="Show next photo"><span class="auraltext">Show next photo</span></a></li>                                                     <li><a href="javascript:;" class="ssp-nav-play" name="play-pause-slideshow" title="Play or pause slideshow"><span class="auraltext">Play or pause slideshow</span></a></li>                                                     <li><a href="javascript:;" class="ssp-nav-rewind" name="show-previous-photo" title="Show previous photo"><span class="auraltext">Show previous photo</span></a></li>                                                 </ul>                                                 </span>                                                 <span style="clear:left;"></span>                                             </div>                                             <div class="ssp-image-caption">&nbsp;</div>                                             <div class="ssp-overlay-map-link">                                                 <a id="MapThisProperty" href="'+c+'" ToolTip="Get map and directions"><span></span>map / directions</a>                                             </div>                                         </div>                                         <div id="ssp-all-images-container"></div>                                         <div id="ssp-overlay-footer-text">'+i+"</div>                                     </div>                                 </div>";$("#"+a).html(j);break}jQuery("#mycarousel").jcarousel({scroll:1,visible:5,size:f.getItemList().length,initCallback:f.initCallback,itemLoadCallback:{onBeforeAnimation:f.itemLoadCallback},itemVisibleInCallback:{onBeforeAnimation:f.itemVisibleInCallback},itemVisibleOutCallback:{onBeforeAnimation:f.itemVisibleOutCallback},buttonNextHTML:null,buttonPrevHTML:null});jQuery(".ssp-see-all").colorbox({close:"",inline:true,href:"#ssp-overlay-container"}).bind("cbox_complete",function(){f.setImage();$(this).colorbox.resize();$("#Master_SlideShow_MapThisProperty").focus();$("#cboxClose").attr("tabindex","0").attr("title","Close Slideshow Overlay").keypress(function(l){if(l.keyCode=="13"){l.preventDefault();jQuery(".ssp-see-all").colorbox.close()}}).bind("cbox_closed",function(){jQuery("a[name='listingdetail_all_photos']").focus()})})})}};rbw.ui.PropertyDetailMap=function(a,b,c){this.render=function(){if(_template=="v4"){$(function(){var d=new BingMap({startingMidLat:a,startingMidLong:b,startingZoom:16,mapView:"r",centerPin:true,showBubble:false,disableMouseWheel:true,container:"listing-detail-map-box",backend:rbw.context.mapProvider});d.load()})}}};rbw.ui.ComparableSales=function(e){var c="/Images/Common/Map/Images/";var b="55E68A07-FEFC-4C78-A16A-C10B937174CE_1";var a=e;this.render=function(){a=a.replace(new RegExp(",","g")," ");f(a,b)};this.init=function(){document.write('<div id="listing-detail-comparable-sales" >                             <div class="header"><h4>Recently sold properties</h4></div>                             <div id="comparable-sales-list"></div>                             <div class="header" ><h4>Map of recently sold properties</h4></div>                             <div id="comparable-sales-map"></div>                             <div class="header"><h4>Number of Single Family Properties Sold</h4></div>                             <div id="comparable-sales-chart" ><div id="lblSubHeader"></div></div>                         </div>');return this};function i(z){try{var s=z.PropertyData.Assessment.Latitude;var v=z.PropertyData.Assessment.Longitude;var u="";var x=z.PropertyData.ComparableSales.ComparableSale.length;if(x>0){if(x>10){x=10}var j="row-odd";var q='<table border="0" width="100%" cellspacing="0" >                                 <tr>                                     <td></td>                                     <td><label>Street Address</label></td>                                     <td><label>City</label></td>                                     <td><label>Beds</label></td>                                     <td><label>Baths</label></td>                                     <td><label>Price</label></td>                                     <td><label>Sold Date<label></td>                                 </tr>';for(var r=0;r<x;r++){var l=z.PropertyData.ComparableSales.ComparableSale[r].Bedrooms;var t=z.PropertyData.ComparableSales.ComparableSale[r].Latitude;var w=z.PropertyData.ComparableSales.ComparableSale[r].Longitude;var k=z.PropertyData.ComparableSales.ComparableSale[r].Baths;var B=z.PropertyData.ComparableSales.ComparableSale[r].SiteAddress;var n=z.PropertyData.ComparableSales.ComparableSale[r].SiteCity;var y=z.PropertyData.ComparableSales.ComparableSale[r].RecordingDate;var m=Utils.Format.addCommas(z.PropertyData.ComparableSales.ComparableSale[r].BuildingArea);var A=Utils.Format.addCommas(z.PropertyData.ComparableSales.ComparableSale[r].SalePrice);var y=Utils.Format.formatDate(z.PropertyData.ComparableSales.ComparableSale[r].RecordingDate);q+='<tr class="'+j+'" >                             <td><img align="left" src="'+c+"/poi/listing_"+(r+1)+'.gif" /></td>                             <td>'+B+"</td>                             <td>"+n+"</td>                             <td>"+l+"</td>                             <td>"+k+"</td>                             <td>$"+A+"</td>                             <td>"+y+"</td>                          </tr>";u+=t+" "+w+",";j=(j=="row-odd")?"row-even":"row-odd"}q+="</table>";$("#comparable-sales-list").html(q)}else{h("list");h("map")}var o=new BingMap({startingMidLat:s,startingMidLong:v,startingZoom:15,mapView:"r",showBubble:false,showScalebar:false,disableMouseWheel:true,container:"comparable-sales-map",backend:rbw.context.mapProvider});o.load(function(){if(u.length>10){setTimeout(function(){d(o,u,s,v)},500)}})}catch(p){}}function d(j,m,l,n){try{j.startAddingPins("Subject",false);j.addPin("Subject","1_1",l,n,1,"Listing","");j.endAddingPins("Subject");j.showPins("Subject");j.plotComps(m)}catch(k){console.log(k.toString())}}function g(l,k){$("#"+k).html(l.DataCollections[0].Visualization);var j=new LPSChart();j.chartSetup()}function f(j,k){var m="128_1";var l=new LPS().Request(k,j,m,"Result1");this.Result1=function(n){if(n.Status=="OK"){i(n);l.Dispose();m="256_1";l=new LPS().Request(k,j,m,"Result3");this.Result3=function(o){if(o.Status=="OK"){g(o,"comparable-sales-chart");l.Dispose()}else{h("chart");return}}}else{h("list");h("map");return}}}function h(j){var k="<h5>Data is not available for this property</h5>";switch(j){case"list":$("#comparable-sales-list").html(k);break;case"chart":$("#comparable-sales-chart").html(k);break;case"map":$("#comparable-sales-map").removeAttr("class").removeAttr("style");$("#comparable-sales-map").html(k);break}}};rbw.ui.SavedListingActions=function(b,a){this.render=function(d){if(d&&typeof(a)!="undefined"&&!isNaN(a)&&a>0){var j=new Querystring();var k=j.get("orig_httpreferer");if(rbw.utils.isAdminSite()){k=encodeURIComponent("/brokeroffice.admin/agent/clientlist.aspx?cid="+jQuery('input[name="selectedCustomerID"]').val())}var f;var c;if(rbw.utils.isAdminSite()){c="/agent/public/account/savelisting.aspx?savefirst=0&CustomerListing={1}&Sort={2}&orig_httpreferer={3}&first={4}&last={5}&search={6}&listing={7}&Client={8}".format(rbw.utils.AppPath,a,j.get("sort"),k,j.get("first"),j.get("last"),j.get("search"),b,j.get("client"));f="/agent/savedlistinglist.aspx?Action=Delete&amp;CustomerListing={1}&Sort={2}&orig_httpreferer={3}&first={4}&last={5}&search={6}&CustomerId={7}&RedirectToClientDetail=1".format(rbw.utils.AppPath,a,j.get("sort"),k,j.get("first"),j.get("last"),j.get("search"),jQuery("input[name=selectedCustomerID]").val())}else{c="{0}/Account/SaveListing.aspx?savefirst=0&CustomerListing={1}&Sort={2}&orig_httpreferer={3}&first={4}&last={5}&search={6}&listing={7}&Client={8}".format(rbw.utils.AppPath,a,j.get("sort"),k,j.get("first"),j.get("last"),j.get("search"),b,j.get("client"));f="{0}/Account/SavedListingList.aspx?Action=Delete&amp;CustomerListing={1}&Sort={2}&orig_httpreferer={3}&first={4}&last={5}&search={6}".format(rbw.utils.AppPath,a,j.get("sort"),k,j.get("first"),j.get("last"),j.get("search"))}var i="";try{i=d.parent(".lstngSrchRsltsBox-inner").find(".statusData").html().toLowerCase()}catch(g){}var h=[];h.push('<div class="saved-listing-actions sla-'+i+'">');h.push('  <a class="sla-change-notify" href="'+c+'">Change Notifications</a>');h.push('  <a class="sla-delete-property" href="'+f+'" onclick="return confirm(\' Are you sure you want to delete this property?\');">Delete</a>');h.push("</div>");d.append(h.join(""))}}};rbw.ui.StarsRating=function(i,h,d,g,m,n,j,k,e){var a=new rbw.ui.SavedListingActions(h,d);var b=this;var c=typeof(k)!=="undefined"?k:"legacy-widget-rating";var l=typeof e!=="undefined"?e:true;rbw.ui.StarsRating.instance=this;this.render=function(){if(!j){b.draw()}else{if(!window.isStarsScriptLoaded){jQuery("body").append('<script src="/include/js/jquery/jquery.ui.stars.js" type="text/javascript"></script>');jQuery("body").append('<script src="/include/js/jquery/jquery.uni-form.js" type="text/javascript"></script>')}window.isStarsScriptLoaded=1;b.draw();a.render(j)}};this.draw=function(){var o=[];o.push("<div class='"+c+"'>");o.push("<div class='widget-rating' >");o.push("    <h5 class='strong'>"+LanguagePlugin.replace("My Rating","My Rating")+"</h5>");o.push("    <div id='votes"+h+"' class='star-vote-container clearfix'>");o.push("        <input type='radio' name='vote' id='vote1' value='1' />");o.push("        <input type='radio' name='vote' id='vote2' value='2' />");o.push("        <input type='radio' name='vote' id='vote3' value='3' />");o.push("        <input type='radio' name='vote' id='vote4' value='4' />");o.push("        <input type='radio' name='vote' id='vote5' value='5' />");o.push("    </div>");o.push("</div>");o.push("<a id='hiddenLink' class='iframe'></a>");o.push("<input type='hidden' name='Rating' id='Rating"+h+"' value='3' />");o.push("</div>");$(function(){if(j){j.prepend(o.join(""))}$(document.body).bind("SetRatingAfterRedirect",function(q,r){if(h==r.listingId){b.setRating(r.listingId,r.listingId,r.customerListingId,r.ratingValue,r.successCallback)}});f(i,h,d);$("#votes"+h).children().not(":input").hide();try{$("#votes"+h).stars({oneVoteOnly:false,cancelShow:false,cancelClass:(n)?"ui-stars-cancel-small":"ui-stars-cancel",starClass:(n)?"ui-stars-star-small":"ui-stars-star",starOnClass:(n)?"ui-stars-star-on-small":"ui-stars-star-on",starHoverClass:(n)?"ui-stars-star-hover-small":"ui-stars-star-hover",cancelHoverClass:(n)?"ui-stars-cancel-hover-small":"ui-stars-cancel-hover",starDisabledClass:(n)?"ui-stars-star-disabled-small":"ui-stars-star-disabled",callback:function(s,r,q){if(rbw.context.isLoggedIn()||rbw.utils.isAdminSite()){$("#Rating"+h).attr("value",q);b.setRating(i,h,d,q)}else{if(typeof(snaCreate)!=="undefined"){return snaCreate('rbw.ui.StarsRating.instance.setRating("'+i+'", '+h+', "'+d+'", '+q+");")}WidgetLoginUtility.setRatingKeys(i,h,d,q);$("#hiddenLink").colorbox({width:570,height:320,opacity:0.7,close:"<span></span>",iframe:true,scrollbars:false,speed:0,transition:"none"});$("#hiddenLink").attr("href",WidgetLoginUtility.getHref("login"));$("#hiddenLink").attr("tabindex","-1");$("#hiddenLink").click()}}})}catch(p){}$(".ui-stars-star").each(function(){$(this).attr("tabindex","0");$(this).keypress(function(q){if(q.keyCode=="13"){q.preventDefault();$(this).click()}})});$("#txtCounter").attr("tabindex","-1")});if(!j){document.write(o.join(""))}if(g){$(".widget-rating").css("border","0px");$(".widget-rating").css("background","#ffffff");$(".widget-rating h5").css("display","none")}if(n){$(".widget-rating").attr("class","widget-rating-small")}};this.setRating=function(q,p,o,r){if(l!==true){return}$("body").trigger("listing-rating-event",[{rating:r}]);$.ajax({type:"GET",url:rbw.serviceUrl,data:"op=SetListingRating&listingNumber="+q+"&rating="+r+"&listingId="+p+"&customerListingId="+o+"&guid="+(Math.random().toString(36).substr(2,9)),dataType:"json",contentType:"application/json; charset=utf-8",success:function(s){}})};function f(q,p,o){$(function(){if(rbw.context.isLoggedIn()||rbw.utils.isAdminSite()){if(m>0){$("#Rating"+p).attr("value",m);$("#votes"+p).stars("select",m)}else{if(o>0){$.ajax({type:"GET",url:rbw.serviceUrl,data:"op=GetListingRating&listingNumber="+q+"&listingId="+p+"&customerListingId="+o+"&guid="+(Math.random().toString(36).substr(2,9)),dataType:"json",contentType:"application/json; charset=utf-8",success:function(r){console.log(o+":"+r);$("#Rating"+p).attr("value",r);$("#votes"+p).stars("select",r)}})}}}})}};rbw.ui.HistoryNotes=function(n,j,e,m,k,h,f,l){var d=typeof(l)!=="undefined"?l:"legacy-widget-notes";var b=this;var a=140;var c=LanguagePlugin.replace("Enter your listing note here","Enter your listing note here");rbw.ui.HistoryNotes.instance=this;this.render=function(){$(function(){$(document.body).bind("SetHistoryNotesAfterRedirect",function(o,p){b.setNote(p.recoId,p.listingId,p.customerId,p.personId,p.listingNumber,p.note,p.customerListingId)});$("#txtNote").focus(function(){b.clearWatermark()});$("#txtNote").keyup(function(){var o=parseInt($(this).attr("maxlength"));if($(this).val().length>o){$(this).val($(this).val().substr(0,$(this).attr("maxlength")))}$(this).parent().find(".notes-counter").html(o-$(this).val().length)});g(n,j,e,m,k);$("#btnSubmitNotes").click(function(){if(rbw.context.isLoggedIn()||rbw.utils.isAdminSite()){b.setNote(n,j,e,m,k,$("#txtNote").attr("value"),f)}else{if(typeof(snaCreate)!=="undefined"){return snaCreate("rbw.ui.HistoryNotes.instance.setNote("+n+', "'+j+'", "'+e+'", "'+m+'", "'+k+'", "'+$("#txtNote").attr("value").replace(/"/ig,"")+'", "'+f+'");')}WidgetLoginUtility.setNotesKeys(n,k,j,e,$("#txtNote").attr("value"),f);$("#hiddenLink").colorbox({width:570,height:320,opacity:0.7,close:"<span></span>",iframe:true,scrollbars:false,speed:0,transition:"none"});$("#hiddenLink").attr("href",WidgetLoginUtility.getHref("login"));$("#hiddenLink").click()}})});document.write("<div class='"+d+"'>");document.write("<div id='widget-notes'>");document.write("    <br/><br/><input type='hidden' name='hidWatermark' value='"+c+"'>");document.write("    <h5><label class='auraltext' for='txtNote'>My Notes</label></h5>");document.write("    <textarea id='txtNote' name='txtNote' class='watermark input-block-level' maxlength='140'>");document.write(c);document.write("    </textarea>");document.write("    <div class='row-fluid'><div id='divNotesSubmit' class='pull-right'>");document.write("        <span class='notes-counter'>"+a+"</span>");if(!h){document.write("        <input type='button' class='btn btn-small' id='btnSubmitNotes' name='btnSubmitNotes' value='"+LanguagePlugin.replace("Submit","Submit")+"' /><br/><br/>")}document.write("    </div></div>");document.write("    <div id='widget-note-history'></div>");document.write("</div>");document.write("</div>")};this.setNote=function(u,q,o,t,r,s,p){if(($.trim(s)!=$.trim(c))&&($.trim(s)!="")){$("body").trigger("listing-notes-event");b.saveNote(u,q,o,t,r,s,p).done(function(v){i(v);$("#txtCounter").attr("value",a);$("#txtNote").attr("value","");b.setWatermark()})}else{alert(LanguagePlugin.replace("Please enter a note.","Please enter a note."));this.setWatermark();return false}};this.clearWatermark=function(){$("#txtNote").empty()};this.setWatermark=function(){$("#txtNote").html(c)};this.saveNote=function(u,q,o,t,r,s,p){return $.ajax({type:"GET",url:rbw.serviceUrl,data:"op=SetListingNote&recoId="+u+"&listingId="+q+"&customerId="+o+"&personId="+t+"&listingNumber="+r+"&note="+s+"&customerListingId="+p,dataType:"json",contentType:"application/json; charset=utf-8"})};function g(s,p,o,r,q){var u=window.location.pathname;var t=/SaveListing.aspx/;if(u.match(t)==null){if(rbw.context.isLoggedIn()||rbw.utils.isAdminSite()){$.ajax({type:"GET",url:rbw.serviceUrl,data:"op=GetListingNotes&recoId="+s+"&listingId="+p+"&customerId="+o+"&personId="+r+"&listingNumber="+q,dataType:"json",contentType:"application/json; charset=utf-8",success:function(v){i(v)}})}else{$("#widget-note-history").attr("style","display:none;")}}else{$("#widget-note-history").attr("style","display:none;")}}function i(o){$("#widget-note-history").empty();for(var s=0;s<o.length;s++){var p=new Date(o[s].CreatedDtm);var q;if(window.localizedDateFormat){q=GetLocalizedDate(window.localizedDateFormat,p.getMonth()+1,p.getDate(),p.getFullYear())}else{q=(p.getMonth()+1)+"/"+p.getDate()+"/"+p.getFullYear()}var r="<div id='notes-data'>";r+="       <div><strong>"+LanguagePlugin.replace("{[0]} said on {[1]}","{[0]} said on {[1]}").replace("{[0]}",o[s].FirstName).replace("{[1]}",q)+":</strong></div>";r+="       <div class='note'> - "+o[s].Note+"</div>";r+="   </div>";$("#widget-note-history").append(r)}}};rbw.ui.ListingHistory=function(g,h,f){var a,j="#listingdetail-price-history",i="price-history-retrieved",e=function(){var m=a.find(j);return m.length>0&&m.data(i)!==undefined},k=function(){a.find(j).data(i,"true")};function d(){var m=readCookie("rBW-CurrencyCode");return m}this.render=function(){$(function(){a=$(".ui-page-active").length?$(".ui-page-active"):$("body");if(e()){return}k();$.ajax({type:"GET",url:rbw.serviceUrl,data:"op=GetListingPriceHistory&listingNumber="+g+"&orgId="+h,dataType:"json",contentType:"application/json; charset=utf-8",error:function(){a.find(".price-change-spinner").hide()},success:function(s){a=$(".ui-page-active").length?$(".ui-page-active"):$("body");a.find("#listingdetail-price-history").show();a.find(".price-change-spinner").hide();if(s.length>0){var y=s.length>0?s[s.length-1].Price:0;y=parseFloat(y)<0?0:y;var r=(parseFloat(s[0].Price)>0)?parseFloat(s[0].Price):0;var o=(parseFloat(r)-parseFloat(y))+"";var n="";var p="oddRow";var v='<div id="price-header" >                                             <ul class="inline"><li><label>'+LanguagePlugin.replace("Original Price","Original Price")+":</label>                                             <span>"+WidgetUtility.formatCurrency(y,false)+"</span></li>                                             <li><label>"+LanguagePlugin.replace("Current Price","Current Price")+":</label>                                             <span>"+WidgetUtility.formatCurrency(r,false)+'</span></li>                                             <li><label id="reduction">'+LanguagePlugin.replace("Price Change","Price Change")+':</label>                                             <span class="'+b(r,o)+'">'+WidgetUtility.formatCurrency(o,false)+"</span>                                             <span>"+c(r,o)+'</span></li></ul>                                         </div>                                         <table class="table table-striped table-bordered">                                             <tr id="table-header" >                                                 <th>'+LanguagePlugin.replace("Date","Date")+"</th>                                                 <th>"+LanguagePlugin.replace("Price","Price")+"</th>                                                 <th>"+LanguagePlugin.replace("Change","Change")+"</th>                                                 <th>&nbsp;</th>                                             </tr>";$(document).trigger("listingpricehistory",[{change:o,changeFormatted:WidgetUtility.formatCurrency(o,false)}]);var A=0;for(var w=0;w<s.length;w++){A=(w<(s.length-1))?(s[w+1].Price>0)?s[w+1].Price:0:0;r=(s[w].Price>0)?s[w].Price:0;o=(parseFloat(r)-parseFloat(A))+"";if(parseInt(o)==0){continue}n+='<tr class="details-text-data '+p+'">                                                 <td>&nbsp;'+s[w].ChangeDate+"</td>                                                 <td>"+WidgetUtility.formatCurrency(r,false)+'</td>                                                 <td style="white-space:nowrap"><label class="'+b(r,o)+'">'+l(r,o)+"</label></td>                                                 <td>"+c(r,o)+"</td>                                             </tr>";p=(p=="oddRow")?"evenRow":"oddRow"}var z="";var F="";var x=false;var m=(rbw.utils.AppPath==undefined)?"":rbw.utils.AppPath;if(a.find(".r-app-content").length){x=true;z="/mobile";F="&orig_httpreferer="+encodeURIComponent(window.location.href)}var t='<div id="price-history-email-alert" class="hide-for-mozaic"><label>'+LanguagePlugin.replace("Sign up to receive email alerts if this propertys price changes","Sign up to receive email alerts if this propertys price changes")+"</label>";if(x){t+='<a class="btn btn-primary r-save-property" id="PriceHistoryAlert" data-listing-number="'+g+'" href="'+m+z+"/Account/SaveListing.aspx?Listing="+f+F+'" data-savedlisting-control="scroll-and-show" '+(x?'data-r-savescroll="1"':"")+">"}else{t+='<a class="btn btn-primary r-save-property" id="PriceHistoryAlert" href="javascript:SavePropertyUtility.launchOverlay('+f+')">'}t+='<i class="icon-fire icon-white"></i>'+LanguagePlugin.replace("Get Price Alerts","Get Price Alerts")+"</a></div>";var u="</table>";a.find("#widget-listing-history").append(v+n+u+t);a.find("#ajax-loader").hide();a.find("#widget-listing-history").show();if(typeof overrideSaveListingLinks==="function"){overrideSaveListingLinks()}if(s.length>=2){r=(parseFloat(s[0].Price)>0)?parseFloat(s[0].Price):0;A=0;o=0;var B=new Date(s[0].ChangeDate);for(var w=1;w<s.length;w++){A=parseFloat(s[w].Price)>0?s[w].Price:r;o=(parseFloat(r)-parseFloat(A))+"";if(o!=0){B=new Date(s[w-1].ChangeDate);break}}if(o!=0){var E=(o<0)?"icon-price-decrease":"icon-price-increase";var D=WidgetUtility.formatCurrency(o,false);var C;if(window.localizedDateFormat){C=GetLocalizedDate(window.localizedDateFormat,B.getMonth()+1,B.getDate(),B.getFullYear())}else{C=(B.getMonth()+1)+"/"+B.getDate()+"/"+B.getFullYear()}a.find("#price-change-link i").addClass(E);var q=d();if(q&&q!="USD"){D=D+" USD";$("#price-change-container").css("margin-top","-13px")}a.find("#price-change-amount").html(D);a.find("#price-change-date").html(C);a.find("#price-change-container").show();a.find("#price-change-container").click(function(){a.find("#listingdetail-tabs-tabstrip-detail").click()})}}}else{a.find("#widget-listing-history").show();a.find("#widget-listing-history").html("<div id='no-listing-history'>There is currently no listing history data available.</div>")}}})})};function l(m,n){if(m==n){return""}else{return WidgetUtility.formatCurrency(n,false)}}function c(m,p){var o="<img src='/images/common/search/buttons/redarrow.png' alt='' width='18' />";var n="<img src='/images/common/search/buttons/greenarrow.png' alt='' width='18' />";if((p==0)||(m)==p){return""}else{if(WidgetUtility.IsNegativeNum(p)){return n}else{return o}}}function b(m,n){if((n==0)||(m==n)){return"blackColor"}else{if(WidgetUtility.IsNegativeNum(n)){return"greenColor"}else{return"redColor"}}}};function GetLocalizedDate(b,d,a,g){if(isNaN(d)||isNaN(a)||isNaN(g)){return""}var c=b;if(c.indexOf("MM")>=0){var f=(d/10<1)?"0"+d:d;c=c.replace("MM",f)}if(c.indexOf("dd")>=0){var e=(a/10<1)?"0"+a:a;c=c.replace("dd",e)}c=c.replace("M",d).replace("d",a).replace("yyyy",g);return c}var WidgetUtility=new (function(){this.IsNegativeNum=function(a){if(a.match(/^-\d+$/)){return true}else{return false}};this.formatCurrency=function(c,b){c=c.toString().replace(/\$|\,/g,"");dblValue=parseFloat(c);blnSign=(dblValue==(dblValue=Math.abs(dblValue)));dblValue=Math.floor(dblValue*100+0.50000000001);intCents=dblValue%100;strCents=intCents.toString();dblValue=Math.floor(dblValue/100).toString();if(intCents<10){strCents="0"+strCents}for(var a=0;a<Math.floor((dblValue.length-(1+a))/3);a++){dblValue=dblValue.substring(0,dblValue.length-(4*a+3))+","+dblValue.substring(dblValue.length-(4*a+3))}if(b){return(((blnSign)?"":"-")+"$"+dblValue+"."+strCents)}else{return(((blnSign)?"":"-")+"$"+dblValue)}}});var widget_width=250;var widget_bgColor="#ffffff";var widget_borderColor="#cccccc";var widget_headerBgColor="#ffffff";var widget_headerTextColor="#990000";var widget_textColor="#000000";var welcome_headerText="";var welcome_bodyText="";var welcome_width="100%";function GetChart(a,c,d,e){var b="55E68A07-FEFC-4C78-A16A-C10B937174CE_1";a=a.replace(new RegExp(",","g")," ");GetLPSWidget(a,b,c,d,e)}function GetLPSWidget(b,c,e,f,h){var g="0";switch(e){case 1:g="2097152_1";break;case 2:g="4194304_1";break;case 3:g="2048_1";break;case 4:g="32768_1";break;case 5:g="1024_1";break;case 6:g="256_1";break;case 7:g="8_1";break;case 8:g="4096_1";break}if(g=="0"){return}var d="result"+Math.round(Math.random()*1000000000);var a=new LPS().Request(c,b,g,d);window[d]=function(i){ShowChart(i,f,h);a.Dispose()}}function ShowChart(c,b,d){$("#"+b).html(c.DataCollections[0].Visualization);var a=new LPSChart();a.chartSetup();if(d!=undefined&&d.length>0){$("#"+b+" #lblSubHeader").html(d)}}function GetSolds(a){}function GetNeighborhoodProfile(){}function WelcomeWidget(){document.write('<table cellpadding=5 class="widgetTable" width="'+welcome_width+'" >');document.write('<tr><td class="widgetHeader">'+welcome_headerText+"</td></tr>");document.write('<tr><td class="widgetText">'+welcome_bodyText+"</td></tr>");document.write("</table>")}function WelcomeWidgetCC(){document.write('<table style="border: solid 1px '+widget_borderColor+";background: "+widget_bgColor+';" cellpadding=5 class="widgetTable" width="'+welcome_width+'" >');document.write('<tr><td class="widgetHeader" style="BACKGROUND: '+widget_headerBgColor+'"><font face=Verdana color='+widget_headerTextColor+" size=2><strong>"+welcome_headerText+"</strong></font></td></tr>");document.write('<tr><td class="widgetText"><font color='+widget_textColor+">"+welcome_bodyText+"</font></td></tr>");document.write("</table>")}function IProfileWidget(){document.write('<table cellpadding=5 class="widgetTable" width="'+widget_width+'" >');document.write('<tr><td class="widgetHeader">IPROFILE</td></tr>');document.write('<tr><td class="widgetText"><a href="http://fntimages.fnistools.com/images/recos/1167/documents/iprofile/IProfile_Install_and_quick_user_guide.doc" target="_blank">IProfile Quick User Guide</a></td></tr>');document.write('<tr><td class="widgetText"><a href="http://fntimages.fnistools.com/images/recos/1167/documents/iprofile/iProfileSetup.exe" target="_blank">IProfile Program Installation</a></td></tr>');document.write("</table>")}function IProfileWidgetCC(){document.write('<table style="border: solid 1px '+widget_borderColor+";background: "+widget_bgColor+';" cellpadding=5 class="widgetTable" width="'+widget_width+'" >');document.write('<tr><td class="widgetHeader" style="BACKGROUND: '+widget_headerBgColor+'"><font face=Verdana color='+widget_headerTextColor+" size=2><strong>IPROFILE</strong></font></td></tr>");document.write('<tr><td class="widgetText"><a href="http://fntimages.fnistools.com/images/recos/1167/documents/iprofile/IProfile_Install_and_quick_user_guide.doc" target="_blank">IProfile Quick User Guide</a></td></tr>');document.write('<tr><td class="widgetText"><a href="http://fntimages.fnistools.com/images/recos/1167/documents/iprofile/iProfileSetup.exe" target="_blank">IProfile Program Installation</a></td></tr>');document.write("</table>")}function CyberhomesHomeValuesWidget(){document.write('<div style="text-align:center"><img src="http://fntimages.fnistools.com/images/common/cyberhomes.gif" /><br><b>Click for homes free values</b></div>')}rbw.ui.Overlay=rbw.ui.Overlay||new (function(){var b=this;var a=null;this.setTitle=function(c){if(!jQuery("#colorbox_v139.register").length){jQuery("#colorbox_v139").addClass("register");jQuery("#cbox_v139TopLeft").addClass("content-box-top");jQuery("#cbox_v139TopRight").addClass("content-box-top");jQuery("#cbox_v139MiddleLeft").addClass("content-box-middle-left");jQuery("#cbox_v139Content").addClass("content-box-content");jQuery("#cbox_v139TopCenter").addClass("content-box-top").html('<h3 id="cbox_v139Title"></h3><span class="content-box-close" id="cbox_v139Close">close</span>');jQuery("#cbox_v139MiddleRight").addClass("content-box-middle-right");jQuery("#cbox_v139BottomLeft").addClass("content-box-bottom");jQuery("#cbox_v139BottomCenter").addClass("content-box-bottom");jQuery("#cbox_v139BottomRight").addClass("content-box-bottom");jQuery("#cbox_v139Close").click(function(){rbw.ui.Overlay.close()})}if(jQuery("#cbox_v139Close:hidden").length){jQuery("#cbox_v139Close").show()}jQuery("#cbox_v139Title").html(c)};this.reposition=function(c){if(c&&typeof c.top!="undefined"){try{jQuery("#colorbox_v139").css("top",parseInt(c.top)+"px")}catch(d){}}};this.onloadframe=function(f){var i=jQuery(f);if(typeof i.attr("src")=="undefined"){return}var j;var h=i.contents().find("h3:first");if(h.length){j=h.html();h.remove();b.setTitle(j);if(h.hasClass("noclose")){jQuery("#cbox_v139Close").hide()}}else{b.setTitle("")}if(a&&a.config&&typeof a.config.isCloseable!="undefined"&&!a.config.isCloseable){jQuery("#cbox_v139Close").hide()}var c=i.contents().find("body");c.css("position","absolute");c.css("overflow","hidden");if(a&&a.config&&a.config.html){c.html(a.config.html)}c.hide();c.show();if(i.attr("data-init")=="0"&&c.height()>0){i.attr("data-init","1");jQuery("#colorbox_v139").css("visibility","visible")}if(c.html()!=""&&c.width()!=0){rbw.ui.Overlay.resize()}if(f.name){jQuery(document.body).trigger("onloadiframe",[{name:f.name.replace("cbxframe","")}]);try{var g=f.contentWindow||window.frames[f.name];if(g&&g.jQuery){g.jQuery(g.document.body).trigger("OverlayLoadedEvent",[{}])}}catch(d){}}};this.open=function(f,d,c){if(d){a={id:d,config:c,isVisible:true};var e=null;if(c&&c.top){e=c.top}jQuery.colorbox_v139({close:"",overlayClose:false,transition:"none",staticTopPosition:e,escKey:(c&&typeof c.escKey!="undefined")?c.escKey:true,onClosed:function(){if(c&&c.closeHandler){c.closeHandler()}},speed:0,html:'<iframe name="{0}" width="100%" height="100%" frameborder="0" onload="rbw.ui.Overlay.onloadframe(this)" scrolling="no" data-init="0"></iframe>'.format(d.replace(/-/ig,"")+"cbxframe")});b.resize(1,1);jQuery('iframe[name="{0}cbxframe"]'.format(d.replace(/-/ig,""))).attr("src",f).attr("data-cbxid",d).attr("data-init","0")}};this.isVisible=function(){return a&&a.isVisible};this.getConfig=function(){return a&&a.config};this.resize=function(f,d){if(a&&typeof f=="undefined"){var e=jQuery("iframe[name='{0}cbxframe']".format(a.id.replace(/-/ig,"")));var c=e.contents().find("body");f=c.width();d=c.height()+70}jQuery.colorbox_v139.resize({width:f,height:d});if(a&&a.config){b.reposition(a.config)}};this.close=function(c){a.closeData=c;jQuery.colorbox_v139.close()}})();jQuery(function(){var a=jQuery("#NplayButtonAjaxVer");if(a.length&&typeof(rbw.context.Listing)!="undefined"){window.nMLSid=rbw.context.Listing.ListingNumber;window.nZipCode=rbw.context.Listing.PostalCode;window.nWebURL=Utils.PublicHostHeader;window.ShowOfferDetails="true";window.NPlayOMSURL="";jQuery.getScript("https://www.n-play.com/Scripts/NPlayButton.js")}jQuery("#mapsearch-mainmap").bind("pageinfochange",function(){jQuery(".ratings-widget").each(function(){var b=jQuery(this);if(typeof(b.attr("data-listingnumber"))!="undefined"){new rbw.ui.StarsRating(b.attr("data-listingnumber"),b.attr("data-listingid"),b.attr("data-customerlistingid"),true,null,true,b).render();b.removeAttr("data-listingnumber")}})})});rbw.ui.HtmlEditor=function(d){var c=this;var b="ec-"+d.containerId;this.render=function(e){$(document.body).bind("RadEditorOnLoadEvent",function(h,i){if(i.callerId==d.containerId){if(e.success){e.success()}}});d.viewPathPattern=typeof d.viewPathPattern==="undefined"?"":d.viewPathPattern;var g="/content/htmleditor.aspx?id=My Images&uploadPathPattern={1}&viewPathPattern={2}&cssPaths={3}&callerId={4}".format(encodeURIComponent(d.id),encodeURIComponent(d.uploadPathPattern),encodeURIComponent(d.viewPathPattern),encodeURIComponent(d.cssPaths),encodeURIComponent(d.containerId));if(d.makeUrlsAbsolute){g+="&MakeUrlsAbsolute=1"}var f='<iframe id="{0}" src="about:blank" width="100%" height="640" frameborder="0" scrolling="no"></iframe>'.format(b,g);$(e.containerId).html(f);$("#"+b).attr("src",g);$("#"+b).load(function(){var j=$("#"+b)[0].contentWindow;var h=null;function i(){if(h!==null){clearTimeout(h)}if(j.RadHtmlEditor&&j.RadHtmlEditor.isReady()){var k=d.html;var l=j.RadHtmlEditor.getHtml();if((!l||l.length==0)&&k!=null){if(k.indexOf("\u003c")!==-1&&k.indexOf("\u003e")!==-1){k=unescape(k)}j.RadHtmlEditor.setHtml(k)}return}h=setTimeout(i,100)}i()});$(e.containerId+" select.tokenSelector").change(function(){var h=$(this).val();c.pasteHtml(h);$(this).get(0).selectedIndex=0})};var a=null;this.enableEditing=function(e){if(a!==null){clearTimeout(a);a=null}if($("#"+b).length&&$("#"+b)[0].contentWindow&&$("#"+b)[0].contentWindow.RadHtmlEditor){$("#"+b)[0].contentWindow.RadHtmlEditor.enableEditing(e);return}a=setTimeout(function(){c.enableEditing(e)},100)};this.getHtml=function(){if($("#"+b).length&&$("#"+b)[0].contentWindow&&$("#"+b)[0].contentWindow.RadHtmlEditor){var e=$("#"+b)[0].contentWindow.RadHtmlEditor.getHtml();return e}};this.setHtml=function(e){var f=$("#"+b)[0].contentWindow;return f.RadHtmlEditor.setHtml(e)};this.pasteHtml=function(e){$("#"+b)[0].contentWindow.RadHtmlEditor.pasteHtml(e)}};rbw.ui.TextValidateInput=function(l){var a=l;var j=a.onfailed;var k=a.onsuccess;var i=a.onchecking;var b=a.characterlimitation;var d=a.defaultButtonText==null?"Check":a.defaultButtonText;var h=a.onchange;var e;var c;var p;function g(){if(a.containerId){c=$("#"+l.containerId);var q='                 <div class="content-field" >                     <span name="prefixText"></span>                     <input type="text" class="content-box" style="width: 300px" />                     <span name="suffixText"></span>                     <br />                     <input type="button" class="check-availability-button" value="Check" />                     <div class="validation-box">                            <h2><i></i><span></span></h2>                     </div>               </div>';c.html(q);p=c.find(".validation-box");c.find(".check-availability-button").click(function(){o()})}c.find(".content-field input").change(function(){if(f()==""){m()}});if(a.prefixText!=null){c.find("span[name='prefixText']").html(a.prefixText)}if(a.suffixText!=null){c.find("span[name='suffixText']").html(a.suffixText)}if(a.inputFormName!=null){c.find("input[type='text']").attr("name",a.inputFormName)}if(a.defaultText!=null){c.find("input[type='text']").val(a.defaultText)}c.find("input[type='button']").val(a.defaultButtonText);if(a.extraParams!=null){e=","+a.extraParams}else{e=""}if(a.characterlimitation!=null){c.find(".content-field input").attr("maxlength",b)}if(a.onchange!=null){c.find("input[type='text']").bind("input",function(){a.onchange(this)})}else{c.find("input[type='text']").bind("input",function(){if($(this).val().length==0){c.find("input[type='button']").attr("disabled","disabled")}else{c.find("input[type='button']").removeAttr("disabled")}})}}function f(){return $("#"+l.containerId).find(".content-field input").val()}function n(q){q=q.toLowerCase();if(q=="valid"){p.removeClass("checking").removeClass("invalid").addClass("valid").css("display","block");p.find("span").html(l.successMessage)}else{if(q=="invalid"){p.removeClass("checking").removeClass("valid").addClass("invalid").css("display","block");p.find("span").html(l.failedMessage)}else{if(q=="checking"){p.removeClass("invalid").removeClass("valid").addClass("checking").css("display","block");p.find("span").html("validating...")}}}}function m(){p.removeClass("checking").removeClass("valid").addClass("invalid").css("display","block");p.find("span").html("value cannot be blank")}function o(){var q=f();if(q.trim()==""){m();j()}else{n("checking");i();$.ajax({type:"POST",url:a.serviceUrl,data:"{content:'"+q+"'"+e+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(r){var s=r.d;if(s.Result==false){n("invalid");j(s.Message)}else{n("valid");k(s.Message)}},error:function(s,r){j(r);n("invalid")}})}}g()};rbw.ui.UrlEditor=function(l){var c=l,a,d=null,b;function g(){return $(".content-url-field input").val()}function f(){return b+c.urlRoot}function h(q){return f()+q+"/"+g()}function n(q){q=q.toLowerCase();if(q=="valid"){$("#page-url-validation").attr("class","valid").css("display","block");$("#page-url-validation span").html(l.urlSuccessMessage);$("#page-url-validation p").html("");$("input[name*='btnPublish']").removeAttr("disabled");$("input[name*='btnSaveDraft']").removeAttr("disabled");o()}else{if(q=="invalid"){$("#page-url-validation").attr("class","invalid").css("display","block");$("input[name*='btnPublish']").attr("disabled","disabled");$("input[name*='btnSaveDraft']").attr("disabled","disabled");$(".parent-urls-preview").hide()}else{if(q=="checking"){$("#page-url-validation").attr("class","checking").css("display","block");$("#page-url-validation span").html("Checking to see if that URL is available. Please wait...");$("input[name*='btnPublish']").attr("disabled","disabled");$("input[name*='btnSaveDraft']").attr("disabled","disabled")}}}}function e(s,q){var r="{0}<b>{1}</b>".format(q,s.replace(q,""));return f()+r}function p(){var q=g();if(q!="putTheOldCodeBack"&&q!=""){n("checking");$.ajax({type:"POST",url:"/content/contentedit.aspx/FindArticlesContainingContentUrl",data:"{contentUrl:'"+q+"', websiteID:'"+c.websiteId+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(u){var w=u.d;var s=w.RelatedArticles;var v=new Querystring();var x=parseInt(v.get("ContentID"));if(l.contentId){x=l.contentId}if(!d){d=$("#page-url-validation p")}if(w.Match&&w.RelatedArticles.length>0){var r=w.Match;if(r.ContentID>0&&r.ContentID!=x&&r.ContentID!=l.publishedContentId){var t=[];if(s.length){t.push("<ul>");$.each(s,function(y){if(y>0){t.push("<li><a href='JavaScript:;' class='{0}'>{1}</a></li>".format(this.ContentURL,e(this.ContentURL,q)))}});t.push("</ul>")}if(t.length>0){$("#page-url-validation span").html("This article URL is already taken. Please enter a different URL, or choose one of the following available URLs:");n("invalid")}d.html(t.join(""));$("li a",d).bind("click",function(){$(".content-url-field input").val($(this).get(0).className).focus();n("valid")})}else{n("valid")}}else{n("valid")}},error:function(s,r){$("#page-url-validation span").html("Error validating URL. Please try again in a bit. (Code: "+r+")");n("invalid")}})}else{if(q==""){m()}}a=q}function m(){$("#page-url-validation").attr("class","invalid");$("#page-url-validation span").html("This URL cannot be blank");$("#page-url-validation p").html("");$(".parent-urls-preview").hide();n("invalid")}function o(){$(".content-url-field input text").val($(".content-url-field input").val().toLowerCase());var q=[];$.each($("select.parent-listbox > option:selected"),function(){var r=$(this).attr("data-contenturl");q.push("<li><h3>{0}</h3><div>{1}</div></li>".format($(this).get(0).text,h(r).toLowerCase()))});if(q.length&&g()!=""){$(".parent-urls-preview ul").html(q.join(""));$(".parent-urls-preview").show()}else{$(".parent-urls-preview").hide()}}function i(){if(!l.previewUrlLabel){l.previewUrlLabel="Your customized page URL:"}if(!l.description){l.description=""}if(!l.urlSuccessMessage){l.urlSuccessMessage="This article URL is available"}if(l.containerId){var q='                 <div class="content-url-field" >                     '+l.publicHostHeader+l.urlRoot+'                     <input type="text" id="ContentUrl" name="Content/ContentUrl" style="width: 300px" maxlength="300" />';if(l.websiteId>0){q+="-"+l.websiteId}q+='<span class="required">*</span>                     <div class ="info-hover" style="float:left">                         <div class="bo-admin-info show-left">                             This will be the web address for this page. Use dashes between words (instead of spaces). If you can\'t think of anything special, just use the title you entered above.                         </div>                    </div>                    <br /><br />                     <b>'+l.previewUrlLabel+'</b><br />                     <input type="text" id="ContentCopyUrl" style="width:600px; border:0" />&nbsp;                     <br />                     <br /><br />                     <input type="button" id="check-availability-button" value="Check Availability" />                     <div class ="info-hover" style="float:left">                         <div class="bo-admin-info">                             After entering the URL, click Check Availability to make sure the URL has not already been used (as it must be unique). If it\'s good, the bar below will turn green!                         </div>                    </div>                    <div id="page-url-validation">                         <h2><i></i><span></span></h2>                         <p></p>                         <code></code>                     </div>                 </div>';$("#"+l.containerId).html(q);$("#check-availability-button").click(function(){p()});$("#ContentCopyUrl").click(function(){j()});$("#ContentUrl").keyup(function(){k()})}$('input[name="Content/ContentUrl"]').val(l.defaultUrl);b=l.url;$(".content-url-field input").alphanumeric({allow:"-"});$("select.parent-listbox").change(o);$(".content-url-field input").change(function(){if(g()==""){m()}});p();p();k()}function k(){var q="";if(c.websiteId&&!isNaN(c.websiteId)){var s=parseInt(c.websiteId);if(s>0){q="-"+s}}var r=f()+g()+q;$("#ContentCopyUrl").val(r)}function j(){k();$("#ContentCopyUrl").select();$("#ContentCopyUrl").css("border","none")}i()};var rw=rw||{};rw.ui=rw.ui||{};rw.ui.Carousel=(function(i,e,a){function d(l,k,j){if(!k){return l(j)}return a("<div />").append(a(k).tmpl(j)).html()}function g(l,k,j){j.each(function(){a(this).find("[data-imageurl]").each(function(){var m=a(this),n=m.attr("data-imageurl"),o,p=m.attr("data-imageloaded");if(typeof(p)==="undefined"){o=new e();o.onload=function(){m.find("i").append(d(l,k,{href:n}));m.attr("data-imageloaded","1")};o.src=n}})})}function h(){}function f(j,k){j.parent().find("li").slice(j.index()+k,j.index()+2*k).each(function(){h(a(this))});j.parent().find("li").slice(j.index()-k,j.index()).each(function(){h(a(this))})}function c(j){var k=[];if(j&&j.imagefilepath){k.push('<a data-imageurl="'+j.imagefilepath+'" href="'+j.listingurl+'">');k.push("<i></i>");k.push('<div class="rwlc-address">'+j.address+"</div>");k.push('<div class="rwlc-citystate">'+j.city+", "+j.state+"</div>");k.push('<div class="rwlc-price">'+j.price+"</div>");k.push('<div class="rwlc-bedbath">'+j.beds);if(j.baths!==""){if(j.beds!==""){k.push(", ")}k.push(j.baths)}k.push("</div></a>")}else{k.push('<a href="JavaScript:;"><i></i><div></div></a>')}return k.join("")}function b(j){return'<img src="'+j.href+'" width="100%" height="100%" />'}return{init:function(m){var r=[],s,D,K=[],A=m.rows?m.visible:1,N=m.rows?(1):(m.visible||3),z=m.items,k=z.length<=N?false:(typeof(m.circular)!=="undefined"?m.circular:true),J=m.scroll||N,L=m.start||0,l=N,I=m.rows||1,E="",H="",M="",q="",C=m.itemTemplateCallback||c,u=m.imageTemplateCallback||b,B=m.itemTemplate||null,t=m.imageTemplate||null,G=m.vertical?M:E,F=m.vertical?q:H,w=k?N:0,v=(k?N:0)+N,y,x,o,n,p=[];if(I>1){J=1}if(B){B=a("#"+B)}if(t){t=a("#"+t)}r.push('<div class="nav prev"><a href="JavaScript:;">'+G+'</a></div><div class="rwlc-slot-container"><ul>');for(s=0;s<z.length;s+=A){K=[];for(D=0;D<A;D+=1){if(z[s+D]){z[s+D].bedsbaths=z[s+D].beds;if(z[s+D].bedsbaths&&z[s+D].baths!==""){z[s+D].bedsbaths+=", "}z[s+D].bedsbaths+=z[s+D].baths}K.push(d(C,B,z[s+D]))}r.push("<li>"+K.join("")+"</li>")}r.push('</ul></div><div class="nav next"><a href="JavaScript:;">'+F+"</a></div>");m.context.html(r.join("")).addClass(m.vertical?"rwlc-vertical":"rwlc-horizontal");y=a(".rwlc-slot-container a").outerWidth(true);x=a(".rwlc-slot-container a").outerHeight(true);n=x;if(A>1){l=Math.ceil(m.visible/I);p=[];o=y*l;n=x*I;p.push("#"+m.context.attr("id")+" ul { list-style: none; }");p.push("#"+m.context.attr("id")+" li a { float: left !important; overflow: hidden !important; }");a("head").append("<style>"+p.join("")+"</style>");m.context.find("li").css({width:o+"px",height:n+"px"});m.context.css("width","1px").css("width","auto")}if(!m.vertical){m.context.css("height",n+"px")}setTimeout(function(){m.context.find(".rwlc-slot-container").jCarouselLite({btnNext:"#"+m.context.attr("id")+" .next",btnPrev:"#"+m.context.attr("id")+" .prev",afterEnd:function(j){g(u,t,j);if(m.afterEnd){m.afterEnd(j)}},beforeStart:function(j){f(j,J)},visible:N,scroll:J,circular:k,start:L,auto:m.auto||null,vertical:m.vertical||false});g(u,t,m.context.find("li").slice(w,v))},100)}}}(this,this.Image,this.jQuery));rw.ui.JumpSearchLoader=(function(a){return{load:function(b){var d=b.domain||"",e=b.jumpSearchId,c=typeof(b.criteria)!=="undefined"?("&"+a.param(b.criteria)):"",f=b.maxResults||50;a.ajax({url:d+"/listing/jumpsearchlistings.aspx?MaxResults="+f+"&JumpSearch="+e+c,dataType:"jsonp",success:function(g){if(b.success){b.success(g)}else{b.items=g.listing;if(b.items&&b.items.length>0){rw.ui.Carousel.init(b)}}}})}}}(this.jQuery));(function($){$(function(){$("[data-widget]").each(function(){var $widget=$(this),type=$widget.attr("data-widget"),domain=$widget.attr("data-domain"),jumpSearchId=$widget.attr("data-jumpsearchid"),key,temp,criteriaSupports={"Criteria-City":{},"Criteria-State":{},"Criteria-Zip":{},"Criteria-MinBaths":{},"Criteria-MinBeds":{},"Criteria-MinPrice":{},"Criteria-MaxPrice":{},"Criteria-PropertyType":{},"Criteria-WebsiteID":{},"Criteria-ExcludeListingID":{}},criteria={},visible=parseInt($widget.attr("data-visible")||3,10),vertical=$widget.attr("data-vertical")||false,itemTemplateCallback=$widget.attr("data-itemtemplatecb"),imageTemplateCallback=$widget.attr("data-imagetemplatecb"),itemTemplate=$widget.attr("data-itemtemplate"),imageTemplate=$widget.attr("data-imagetemplate"),rows=parseInt($widget.attr("data-rows")||1,10),scroll=parseInt($widget.attr("data-scroll")||visible,10),auto=parseInt($widget.attr("data-auto")||5000,10),config={context:$widget,visible:parseInt(visible||3,10),vertical:vertical,circular:typeof($widget.attr("data-circular"))==="undefined"?true:$widget.attr("data-circular")==="true",itemTemplateCallback:createTemplateFunction(itemTemplateCallback),imageTemplateCallback:createTemplateFunction(imageTemplateCallback),itemTemplate:itemTemplate,imageTemplate:imageTemplate,scroll:scroll,auto:auto>0?auto:null};for(key in criteriaSupports){temp=$widget.attr("data-"+key.toLowerCase());if(typeof(temp)!=="undefined"){criteria[key]=temp;if(temp.indexOf("${")===0){temp=temp.replace("${","").replace("}","");temp=eval("rbw.context."+temp);criteria[key]=temp}switch(key){case"Criteria-Zip":case"Criteria-MinBaths":case"Criteria-MinBeds":case"Criteria-MinPrice":case"Criteria-MaxPrice":case"Criteria-ExcludeListingID":criteria[key]=temp.toString().replace(/[^0-9-.]/g,"");break}}}if(rows>1){config.rows=rows}function createTemplateFunction(functionName){if(typeof(functionName)!=="undefined"){return new Function("a","return "+functionName+"(a)")}return null}switch(type){case"carousel":rw.ui.JumpSearchLoader.load({domain:domain,jumpSearchId:jumpSearchId,criteria:criteria,success:function(responseData){var items=[];var appRoot=getAppRoot();for(var i in responseData.listing){var listing=responseData.listing[i];if(listing.listingid!=criteria["Criteria-ExcludeListingID"]){listing.listingurl=appRoot+listing.listingurl;items.push(listing)}}if(items.length>0){config.items=items;rw.ui.Carousel.init(config)}}});break}})})}(this.jQuery));rw.ui.PropertyHistory=(function(b,a){return{callBackPropertyHistory:function(f){var g=f.PropertyData.SalesHistory.length,h=f.PropertyData.AssessmentHistory.length,c=false,e=0,d=[];if(g>0){d.push("<table  class='facts-table' id='sales-table'>");d.push("<tr class='table-header'><td>Sales Date</td><td align='right'>Sales Price</td></tr>");if(g>5){g=5}for(e=0;e<g;e+=1){if(f.PropertyData.SalesHistory[e].SalesPrice>0){d.push("<tr><td>");d.push(b.Utils.Format.formatDate(f.PropertyData.SalesHistory[e].RecordingDate));d.push("</td><td align='right'>$");d.push(b.Utils.Format.addCommas(f.PropertyData.SalesHistory[e].SalesPrice));d.push("</td></tr>");c=true}}d.push("</table>");a("#sales-value").html(d.join(""))}if(g<=0||c===false){a("#sales-value").html("<i>Sales History is not available for this property</i>")}if(h>0){d=[];d.push("<table  class='facts-table' id='tax-table'>");d.push("<tr class='table-header'><td>Tax Year</td><td>Improvements + Land</td><td align='right'>Total</td></tr>");if(h>5){h=5}for(e=0;e<h;e+=1){d.push("<tr><td>");d.push(f.PropertyData.AssessmentHistory[e].AssessmentYear);d.push("</td><td>$");d.push(b.Utils.Format.addCommas(f.PropertyData.AssessmentHistory[e].AssessedImprovementValue));d.push("+ $");d.push(b.Utils.Format.addCommas(f.PropertyData.AssessmentHistory[e].AssessedLandValue));d.push(" =</td><td align='right'>$");d.push(b.Utils.Format.addCommas(f.PropertyData.AssessmentHistory[e].AssessedTotalValue));d.push("</tr>")}d.push("</table>");a("#tax-value").html(d.join(""))}else{a("#tax-value").html("<i>Tax Info is not available for this property</i>")}},init:function(e){var d,g="128_1",f,c=e.address;if(b.location.host.indexOf(".bankofamerica.com")>-1){d="F0B19CF4-07E2-48FA-94AE-FCED83758B36_1"}else{d="55E68A07-FEFC-4C78-A16A-C10B937174CE_1"}c=c.replace(new RegExp(",","g")," ");f=new LPS().Request(d,c,g,"rw.ui.PropertyHistory.callBackPropertyHistory")}}}(this,this.jQuery));rbw.ui.AgentAutoComplete=function(){this.render=function(a){if(a){$(function(){$("body").append('<script type="text/javascript" src="/include/js/jquery/jquery.autocomplete.js"></script>');var b='<div id="auto-complete-agent">                             <span>Already have an agent?</span>                             <br />                             <input type="radio" value="1" name="HasAgent" id="agent-yes" /> Yes                             <input type="radio" value="0" name="HasAgent" id="agent-no" /> No<br />                             <div class="auto-complete-textbox">                             <span >Agent: (last name, first name) </span><br />                             <input type="text" id="AgentAutoComplete" />                             <input type="hidden" name="AgentPersonID" id="AgentPersonID" />                             </div>                             </div>';$("#HtmlAgentAutoComplete").html(b)})}},this.init=function(a){if(a){$(function(){$("#auto-complete-agent").show();$("#agent-yes").click(function(){$(".auto-complete-textbox").show()});$("#agent-no").click(function(){$(".auto-complete-textbox").hide()});$("#AgentAutoComplete").autocomplete(rbw.serviceUrl+"?op=GetAgentsByRECoID",{dataType:"json",extraParams:{firstName:function(){if($("#AgentAutoComplete").val().indexOf(",")>-1){return $("#AgentAutoComplete").val().split(",")[1].trim()}else{return""}},lastName:function(){if($("#AgentAutoComplete").val().indexOf(",")>-1){return $("#AgentAutoComplete").val().split(",")[0].trim()}else{return $("#AgentAutoComplete").val()}}},minChars:2,max:50,cacheLength:0,parse:function(b){var d=[];for(var c=0;c<b.length;c++){d[d.length]={data:b[c],value:b[c].Value,result:b[c].Name}}return d},formatItem:function(b){return b.Name},delay:500}).focus(function(){if(self!==top){$("html, body").animate({scrollTop:$("#AgentAutoComplete").offset().top},2000)}}).result(function(c,b){$("#AgentPersonID").val(b.Value)})})}}};rbw.ui.FullscreenOverlay=(function(a){return{overlayFullScreen:function(){a("body").append('<div id="fullscreen-overlay" style="width: 100%; height: 100%; position: fixed; top: 0; left: 0; z-index: 10000; border: none;margin: 0;padding: 0;background: rgb(30, 30, 30);background: rgba(0,0,0,0.9);z-index: 10000 !important;"><div id="fullscreen-message" style="position:absolute; top: 42%; left: 50%; margin-left: -100px; background-color:#000; color: #fff; font-size: 14px; border-radius: 6px;padding: 20px 30px;"><img src="/images/common/photo-loading-spinner-inverse.gif" /> Processing...</div></div>')},removeOverlayFullScreen:function(){a("#fullscreen-message,#fullscreen-overlay").remove()}}})(jQuery);$(function(){verifyInvalidListing()});function verifyInvalidListing(){if(window.location.hash.substring(1).trim().toLocaleLowerCase().replace(/ /g,"").indexOf("invalidlisting")>-1){if($("#invalidListingPopup").length==0){var c=window.location.protocol+"//"+window.location.host+"/listing/listingsearch.aspx";var b="";if(window.location.href.toLowerCase().indexOf("listingsearch.aspx")>=0){b="The listing you have requested is no longer available to view. Click the OK button to search for other properties. Thank you."}else{if(window.location.href.toLowerCase().indexOf("/mobile/")>0){b='The listing you have requested is no longer available to view.                         If you would like to search for other properties, please click <a href="'+c+'" onclick="$(\'.invalid-listing-footer button\').click();">HERE</a>.                         Thank you.'}else{if(window.location.href.toLowerCase().indexOf("vowexpired")>=0){if(confirm("You do not yet have full access to our site because you have not completed your site registration by agreeing to our Terms of Use.\n\nPlease click OK below and we will resend you an acceptance e-mail where you can confirm your registration.\n\nThank you.")){$.ajax({url:"/account/vowactivate.aspx",data:"email=1",success:function(d){alert("Email has been re-sent");return}});return}else{b='The listing you have requested is no longer available to view.                                 If you would like to search for other properties, please click <a href="'+c+'" onclick="$(\'.invalid-listing-footer button\').click();">HERE</a>.                                 Or click the OK button for an overview of the City information and properties for sale.                                 Thank you.'}}else{b='The listing you have requested is no longer available to view.                         If you would like to search for other properties, please click <a href="'+c+'" onclick="$(\'.invalid-listing-footer button\').click();">HERE</a>.                         Or click the OK button for an overview of the City information and properties for sale.                         Thank you.'}}}var a='<!-- Pop up for invalid listing -->                         <div id="invalidListingPopup" tabindex="-1" role="dialog" style="z-index:20000">                            <div class="nvalid-listing-dlg">                                <div class="invalid-listing-content">                                    <div style="padding: 20px">'+b+'</div>                                    <div class="invalid-listing-footer">                                        <button type="button" class="btn btn-primary" style="width:100px" aria-hidden="true" data-dismiss="modal">Ok</button>                                    </div>                                </div>                            </div>                        </div>';$("body").prepend(a)}$("<style type='text/css'>                #invalidListingPopup {                    background-color: white;                    margin-left: -280px; /* negative half of width below */                    top: 10%;                    left: 50%;                    width: 560px;                    /*border: 1px solid rgba(0,0,0,0.3);*/                    webkit-border-radius: 6px;                    -moz-border-radius: 6px;                    border-radius: 6px;                    z-index: 19001;                }                                                #invalidListingPopup .invalid-listing-footer {                    text-align: right;                    border-top: 1px solid #ddd;                    padding: 0;                }                #invalidListingPopup button {                    float:right;                    margin: 15px;                }                .invalidListingPopup-modal-backdrop {                    position: fixed;                    top: 0;                    right: 0;                    bottom: 0;                    left: 0;                    z-index: 19000;                    background-color: black;                    opacity: .8;                    position: absolute;                    width: 100%;                    height: 100%;                }            </style>").appendTo("head");if($(".modal-backdrop").length==0){$("body").prepend("<div class='modal-backdrop fade in invalidListingPopup-modal-backdrop'></div>")}if($("body").innerWidth()<=$("#invalidListingPopup").width()){$("#invalidListingPopup").width($("body").innerWidth()-15);$("#invalidListingPopup").css("margin-left",-$("#invalidListingPopup").width()/2)}$("#invalidListingPopup").css("opacity",1);$("#invalidListingPopup").css("position","absolute");$("#invalidListingPopup").css("margin-top",-($("#invalidListingPopup").height()/2*0.1));$("#invalidListingPopup .btn-primary[data-dismiss=modal], .modal-backdrop").click(function(){$("#invalidListingPopup").animate({marginTop:"-=1000px"},"slow",null,function(){$("#invalidListingPopup").remove();$(".modal-backdrop").animate({opacity:0},"slow",null,function(){$(".modal-backdrop").remove()})})});$("#invalidListingPopup").show()}};function rBWUtils(){var b=this;this.Format=new format();this.BrowserCompat=new browserCompat();this.Logger=new logger();this.AppName=null;var c=window.location.toString();if(c.toLowerCase().indexOf("/brokeroffice.admin")!=-1){this.AppName="brokeroffice.admin"}else{this.AppName="public"}this.PublicAppName="";if(window.location.hostname.indexOf("-dev")!=-1){this.PublicAppName="/public"}this.Lookups=new (function(){this.stateCodes=["AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]});var a={};a.Alabama="AL";a.Alaska="AK";a.Arizona="AZ";a.Arkansas="AR";a.California="CA";a.Colorado="CO";a.Connecticut="CT";a["District Of Columbia"]="DC";a.Delaware="DE";a.Florida="FL";a.Georgia="GA";a.Hawaii="HI";a.Idaho="ID";a.Illinois="IL";a.Indiana="IN";a.Iowa="IA";a.Kansas="KS";a.Kentucky="KY";a.Louisiana="LA";a.Maine="ME";a.Maryland="MD";a.Massachusetts="MA";a.Michigan="MI";a.Minnesota="MN";a.Mississippi="MS";a.Missouri="MO";a.Montana="MT";a.Nebraska="NE";a.Nevada="NV";a["New Hampshire"]="NH";a["New Jersey"]="NJ";a["New Mexico"]="NM";a["New York"]="NY";a["North Carolina"]="NC";a["North Dakota"]="ND";a.Ohio="OH";a.Oklahoma="OK";a.Oregon="OR";a.Pennsylvania="PA";a["Rhode Island"]="RI";a["South Carolina"]="SC";a["South Dakota"]="SD";a.Tennessee="TN";a.Texas="TX";a.Utah="UT";a.Vermont="VT";a.Virginia="VA";a.Washington="WA";a["West Virginia"]="WV";a.Wisconsin="WI";a.Wyoming="WY";this.getStateCodeFromName=function(e){var d=e.toLowerCase().capitalize();if(a[d]){return a[d]}return null};this.getStateCodes=function(){return a};this.isState=function(e){if(!e||e.length!=2){return false}e=e.toUpperCase();for(var d=0;d<Utils.Lookups.stateCodes.length;d++){if(Utils.Lookups.stateCodes[d]==e){return true}}return false};this.isStateName=function(d){if(!d){return false}d=d.toLowerCase().capitalize();return a[d]?true:false};this.isAdminSite=function(){return window.location.hostname.toLowerCase().indexOf("fnistools.com")!=-1};this.parseCityState=function(e){var d=/ *(.+) *, *(\w{2}) */.exec(e);return d?{city:d[1],state:d[2]}:void (0)};this.locationHasCityState=function(f){var g=f.replace(","," ").trim().replace(/\s+/g," ").split(" ");if(g.length<2){return false}var d=false;var e=/^\d{5}$/;var h=g[g.length-1];if(e.test(h)){h=g[g.length-2];d=true}if(h.length==2&&$.inArray(h.toUpperCase(),Utils.Lookups.stateCodes)!=-1){if(d){if(g.length>2){h=g[g.length-3]}else{h=""}}else{h=g[g.length-2]}if(h.length&&!/^\d.+$/.test(h)){return true}}return false};this.generateUUID=function(){var e=new Date().getTime();if(window.performance&&typeof window.performance.now==="function"){e+=performance.now()}var f="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var g=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(d==="x"?g:(g&3|8)).toString(16)});return f};this.getIpLocationAsync=function(e,d){Utils.Logger.warn("Utils.getIpLocationAsync deprecated - use geolocation.getIpLocationAsync");rbw.geolocation.getIpLocationAsync(e,d)},this.eraseIpLocationCookie=function(){Utils.Logger.warn("Utils.eraseIpLocationCookie deprecated - use geolocation.eraseIpLocationCookie");rbw.geolocation.eraseIpLocationCookie()},this.getLocationFromIpLocation=function(d){Utils.Logger.warn("Utils.getLocationFromIpLocation deprecated - use geolocation.getLocationFromIpLocation");return rbw.geolocation.getLocationFromIpLocation(d)};this.dateDiff=function(d,f,h){if(!d||!f){return null}if(Object.prototype.toString.call(d)!=="[object Date]"||Object.prototype.toString.call(f)!=="[object Date]"){Utils.Logger.warn("Utils.dateDiff - Non-date objects passed as parameters");return null}var j=1000;if(typeof h!=="undefined"){if(h==="MILLISECOND"){j=1}else{if(h==="SECOND"){j=1000}else{if(h==="MINUTE"){j=1000*60}else{if(h==="HOUR"){j=1000*60*60}else{if(h==="DAY"){j=1000*60*60*24}}}}}}var e=d.getTime();var g=f.getTime();var i=g-e;return Math.round(i/j)}}var Utils=Utils?Utils:new rBWUtils();if(typeof rbw=="undefined"){var rbw={}}if(typeof rbw.Utils=="undefined"){rbw.Utils=Utils}if(typeof rbw.utils=="undefined"){rbw.utils=Utils}if(typeof rbw.context=="undefined"){rbw.context={}}rbw.context.isLoggedIn=function(){return rbw.context.isAuthenticated};function format(){}format.prototype.addCommas=function(b){var d=window.numberGroupSeparator||",";var a=window.numberDecimalSeparator||".";b+="";b=b.replace(/,/g,"");b=b.replace(/\$/g,"");var e=b.split(".");var f=e[0];var g=e.length>1?a+e[1]:"";var c=/(\d+)(\d{3})/;if(d.length>0){while(c.test(f)){f=f.replace(c,"$1"+d+"$2")}}return f+g};function escapeRegExp(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}format.prototype.parseToEnUSFormat=function(b){var e=window.numberGroupSeparator||",";var a=window.numberDecimalSeparator||".";var d=new RegExp(escapeRegExp(window.numberGroupSeparator),"g");var c=new RegExp(escapeRegExp(window.numberDecimalSeparator),"g");b=b.replace(d,"").replace(c,".");return b};format.prototype.formatCurrency=function(a){a+="";a=a.replace(/,/g,"");a=a.replace(/\$/g,"");var c=a.split(".");var d=c[0];var e=c.length>1?"."+c[1]:"";var b=/(\d+)(\d{3})/;while(b.test(d)){d=d.replace(b,"$1,$2")}return d+e};format.prototype.formatDate=function(c){if(c&&c.getDate!=null){return(c.getMonth()+1)+"/"+c.getDate()+"/"+c.getFullYear()}else{if(c&&c.length===8){var d=c.substring(0,4);var b=c.substring(4,6);var a=c.substring(6,8);return b+"/"+a+"/"+d}else{throw Error("value: Parameter is invalid.")}}};function browserCompat(){}browserCompat.prototype.attachEvent=function(c,b,a){if(c){if(b.substring(0,2)=="on"){b=b.substring(2,b.length)}if(c.addEventListener){c.addEventListener(b,a,false)}else{if(c.attachEvent){c.attachEvent("on"+b,a)}}}};browserCompat.prototype.containsDOM=function(b,a){var d=false;do{if((d=b==a)){break}try{a=a.parentNode}catch(c){break}}while(a!=null);return d};browserCompat.prototype.checkMouseEnter=function(a,b){if(a.contains&&b.fromElement){return !a.contains(b.fromElement)}else{if(b.relatedTarget){return !this.containsDOM(a,b.relatedTarget)}}};browserCompat.prototype.checkMouseLeave=function(a,b){if(a.contains&&b.toElement){return !a.contains(b.toElement)}else{if(b.relatedTarget){return !this.containsDOM(a,b.relatedTarget)}}};function logger(){this.log=function(){if(typeof console=="object"&&typeof console.log=="function"){for(var a=0,b=arguments.length;a<b;a++){console.log(arguments[a])}}};this.warn=function(){if(typeof console=="object"&&typeof console.log=="function"){for(var a=0,b=arguments.length;a<b;a++){console.warn(arguments[a])}}};this.error=function(){if(typeof console=="object"&&typeof console.log=="function"){for(var a=0,b=arguments.length;a<b;a++){console.error(arguments[a])}}}};if(typeof window.rbw==="undefined"){window.rbw={}}if(typeof window.rbw.utils==="undefined"){window.rbw.utils={}}(function(){var b=0,p=5,n,m=0,d=/function\s*([\w\-$]+)?\s*\(/i;var o={error:1,warning:2,information:3};function v(y,w){try{if(!window.console){return}switch(w){case rbw.utils.logType.error:window.console.error(y);break;case rbw.utils.logType.warning:window.console.warn(y);break;default:window.console.log(y)}}catch(x){}}function g(x){if(!x||!(x instanceof Error)){return null}var A="";try{A=x.message||x.description||"(No message)";if(A.indexOf("Script error")===0){v("Error on cross-domain script, couldn't notify server.",rbw.utils.logType.warning);return null}else{var B=(s(x))||f();var z=h(x.FileName||x.sourceUrl,B);var w=x.columnNumber;if(!w&&window.event){w=window.event.errorCharacter}return[A,"File: "+z,"Line: "+(x.lineNumber||x.line||0),"Col:"+(w||0),"Stack: "+B]}}catch(y){v("Error creating error info: "+A,rbw.utils.logType.warning);return null}}function r(A,C,w){if(b++>p){v("Too many errors reported, not logging to server.",rbw.utils.logType.warning);return}try{if(typeof(A)==="undefined"){return}var y=Array.isArray(A)?A:A instanceof Error?g(A):null;if(y==null){return}var z=Array.prototype.join.call(A,"\n");C=typeof C==="undefined"?true:C;if(C){var B=new Image(),D="/include/ajax/api.aspx?op=LogError&ce="+encodeURIComponent(z).substring(0,2048);B.crossOrigin="anonymous";B.src=D}if(typeof w!=="undefined"){v(z,w)}}catch(x){v("Error logging to server: "+x.message,rbw.utils.logType.warning);return}}function l(){m+=1;try{window.setTimeout(function(){m-=1})}catch(w){m-=1}}function i(z){var x=z;try{var w=document.createElement("a");w.href=z;var y=w.pathname;if(typeof y!=="undefined"&&y!=null&&y.length>0){x=y}}catch(e){}return x}function h(D,A){var x=D;try{x=x||window.location.href||"";if(x.toLowerCase().indexOf("http")===0){x=i(x)}if(x===""||x.indexOf("undefined")!==-1){var C=typeof A==="undefined"||A==null||typeof A.split==="undefined"?[]:A.split("\n");if(C.length>1){var B=C[1];var z="";if(B.indexOf("(")!==-1&&B.indexOf(")")!==-1){var y=/\((https?:)?([^)]+)\)/i;var w=y.exec(B);if(w.length>2){z=w[1];B=w[2]}else{if(w.length>1){B=w[1]}}}if(B.indexOf(":")!==-1){B=B.substr(0,B.indexOf(":"))}x=i(z+B)}}if(x.indexOf("/")!==0){x="/"+x}}catch(e){}return x}function s(x){try{return x.stack||x.backtrace||x.stacktrace}catch(w){return""}}function f(){var D;var C=10;var w="[anonymous]";try{throw new Error("")}catch(z){D=s(z)}if(!D){try{var B=[];var x=arguments.callee.caller.caller;while(x&&B.length<C){var A=d.test(x.toString())?RegExp.$1||w:w;B.push(A);x=x.caller}D=B.join("\n")}catch(y){D=""}}return D}function t(A){try{if(A){var w=A.attributes;if(w){var z="<"+A.nodeName.toLowerCase();for(var y=0;y<w.length;y++){z+=" "+w[y].name+'="'+w[y].value+'"'}return z+">"}else{return A.nodeName}}}catch(x){return""}return""}function c(x){try{var y=[];if(x.type&&x.type.length){y.push(x.type)}if(x.which&&x.which.length){y.push(x.which)}var z=t(x.target);if(z&&z.length){y.push(z)}return y.length>0?y.join(", "):""}catch(w){return""}}function q(z,y,x){try{var A=z[y];var B=x(A);z[y]=B}catch(w){v("Error on polyfill for "+y+": "+w.message,rbw.utils.logType.warning)}}q(window,"onerror",function(w){return function e(D,G,C,x,A){try{var E=D||"(No message)";if(E.indexOf("Script error")===0){v("Error on cross-domain script, couldn't notify server.",rbw.utils.logType.warning)}else{if(!m){if(!x&&window.event){x=window.event.errorCharacter}var F=(A&&s(A))||f();var B=h(G,F);var z=[E,"File: "+B,"Line: "+(C||0),"Col:"+(x||0),"Stack: "+F];if(n){z.push("Last event: "+c(n))}r(z)}}if(w){w(D,G,C,x,A)}}catch(y){v("Error on polyfill for window.onerror: "+y.message,rbw.utils.logType.warning)}}});function u(y,x){try{if(typeof y!=="function"){return y}if(!y.wrapper){y.wrapper=function(A){if(x&&x.eventHandler){n=A}try{return y.apply(this,arguments)}catch(z){r(z,true);l();throw z}};y.wrapper.wrapper=y.wrapper}return y.wrapper}catch(w){return y}}var k=function(e){return function(w,x){return e(u(w),x)}};try{q(window,"setTimeout",k)}catch(a){v("Error on polyfill for window.setTimeout: "+a.message,rbw.utils.logType.warning)}try{q(window,"setInterval",k)}catch(a){v("Error on polyfill for window.setInterval: "+a.message,rbw.utils.logType.warning)}try{if(window.requestAnimationFrame){q(window,"requestAnimationFrame",k)}}catch(a){v("Error on polyfill for window.requestAnimationFrame: "+a.message,rbw.utils.logType.warning)}var j=function(e){return function(x,z,w,A){try{if(z&&z.handleEvent){z.handleEvent=u(z.handleEvent,{eventHandler:true})}}catch(y){v("Err on hijacking handleEvent: "+y.message,rbw.utils.logType.warning)}return e.call(this,x,u(z,{eventHandler:true}),w,A)}};"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(x){try{var y=window[x]&&window[x].prototype;if(y&&y.hasOwnProperty&&y.hasOwnProperty("addEventListener")){q(y,"addEventListener",j);q(y,"removeEventListener",j)}}catch(w){r(w,true,rbw.utils.logType.warning)}});window.rbw.utils.reportError=r;window.rbw.utils.logType=o})();function StringBuilder(){var a=[""];this.append=function(b){if(b){a.push(b)}return this};this.clear=function(){a.length=1;return this};this.toString=function(){return a.join("")}};(function(a,C,af){var A={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},z="colorbox",Z="cbox",x=Z+"Element",J=Z+"_open",I=Z+"_load",G=Z+"_complete",E=Z+"_cleanup",F=Z+"_closed",K=Z+"_purge",P=(typeof a.browser!=="undefined"&&a.browser.makeSimpleExpr&&a.support.opacity)||(a("html").hasClass("lt-ie9")),Q=P&&(typeof a.browser!=="undefined"&&a.browser.version<7)||(a("html").hasClass("lt-ie7")),H=Z+"_IE6",m,c,v,e,t,h,p,b,o,u,i,j,k,s,f,q,l,n,d,g,ac,N,O,T,U,D,M,Y,X,w,y,V,aa,B="div";function r(aj,ai,ag){var ah=C.createElement(aj);if(ai){ah.id=Z+ai}if(ag){ah.style.cssText=ag}return a(ah)}function L(ag){var ah=o.length,ai=(M+ag)%ah;return(ai<0)?ah+ai:ai}function ab(ah,ag){return Math.round((/%/.test(ah)?((ag==="x"?u.width():u.height())/100):1)*parseInt(ah,10))}function R(ag){return ac.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(ag)}function W(){var ag;ac=a.extend({},a.data(D,z));for(ag in ac){if(a.isFunction(ac[ag])&&ag.slice(0,2)!=="on"){ac[ag]=ac[ag].call(D)}}ac.rel=ac.rel||D.rel||"nofollow";ac.href=ac.href||a(D).attr("href");ac.title=ac.title||D.title;if(typeof ac.href==="string"){ac.href=a.trim(ac.href)}}function ae(ah,ag){a.event.trigger(ah);if(ag){ag.call(D)}}function ad(){var al,ag=Z+"Slideshow_",ai="click."+Z,aj,ak,ah;if(ac.slideshow&&o[1]){aj=function(){q.text(ac.slideshowStop).unbind(ai).bind(G,function(){if(M<o.length-1||ac.loop){al=setTimeout(aa.next,ac.slideshowSpeed)}}).bind(I,function(){clearTimeout(al)}).one(ai+" "+E,ak);c.removeClass(ag+"off").addClass(ag+"on");al=setTimeout(aa.next,ac.slideshowSpeed)};ak=function(){clearTimeout(al);q.text(ac.slideshowStart).unbind([G,I,E,ai].join(" ")).one(ai,function(){aa.next();aj()});c.removeClass(ag+"on").addClass(ag+"off")};if(ac.slideshowAuto){aj()}else{ak()}}else{c.removeClass(ag+"off "+ag+"on")}}function S(ah){if(!y){D=ah;W();o=a(D);M=0;if(ac.rel!=="nofollow"){o=a("."+x).filter(function(){var ai=a.data(this,z).rel||this.rel;return(ai===ac.rel)});M=o.index(D);if(M===-1){o=o.add(D);M=o.length-1}}if(!X){X=w=true;c.show();if(ac.returnFocus){try{D.blur();a(D).one(F,function(){try{this.focus()}catch(ai){}})}catch(ag){}}m.css({opacity:+ac.opacity,cursor:ac.overlayClose?"pointer":"auto"}).show();ac.w=ab(ac.initialWidth,"x");ac.h=ab(ac.initialHeight,"y");aa.position();if(Q){u.bind("resize."+H+" scroll."+H,function(){m.css({width:u.width(),height:u.height(),top:u.scrollTop(),left:u.scrollLeft()})}).trigger("resize."+H)}ae(J,ac.onOpen);g.add(s).hide();d.html(ac.close).show()}aa.load(true)}}aa=a.fn[z]=a[z]=function(ai,ah){var ag=this;ai=ai||{};aa.init();if(!ag[0]){if(ag.selector){return ag}ag=a("<a/>");ai.open=true}if(ah){ai.onComplete=ah}ag.each(function(){a.data(this,z,a.extend({},a.data(this,z)||A,ai));a(this).addClass(x)});if((a.isFunction(ai.open)&&ai.open.call(ag))||ai.open){S(ag[0])}return ag};aa.init=function(){if(!c){if(!a("body")[0]){a(aa.init);return}u=a(af);c=r(B).attr({id:z,"class":P?Z+(Q?"IE6":"IE"):""});m=r(B,"Overlay",Q?"position:absolute":"").hide();v=r(B,"Wrapper");e=r(B,"Content").append(i=r(B,"LoadedContent","width:0; height:0; overflow:hidden"),k=r(B,"LoadingOverlay").add(r(B,"LoadingGraphic")),s=r(B,"Title"),f=r(B,"Current"),l=r(B,"Next"),n=r(B,"Previous"),q=r(B,"Slideshow").bind(J,ad),d=r(B,"Close"));v.append(r(B).append(r(B,"TopLeft"),t=r(B,"TopCenter"),r(B,"TopRight")),r(B,false,"clear:left").append(h=r(B,"MiddleLeft"),e,p=r(B,"MiddleRight")),r(B,false,"clear:left").append(r(B,"BottomLeft"),b=r(B,"BottomCenter"),r(B,"BottomRight"))).find("div div").css({"float":"left"});j=r(B,false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(m,c.append(v,j));N=t.height()+b.height()+e.outerHeight(true)-e.height();O=h.width()+p.width()+e.outerWidth(true)-e.width();T=i.outerHeight(true);U=i.outerWidth(true);c.css({"padding-bottom":N,"padding-right":O}).hide();l.click(function(){aa.next()});n.click(function(){aa.prev()});d.click(function(){aa.close()});g=l.add(n).add(f).add(q);m.click(function(){if(ac.overlayClose){aa.close()}});a(C).bind("keydown."+Z,function(ag){var ah=ag.keyCode;if(X&&ac.escKey&&ah===27){ag.preventDefault();aa.close()}if(X&&ac.arrowKey&&o[1]){if(ah===37){ag.preventDefault();n.click()}else{if(ah===39){ag.preventDefault();l.click()}}}})}};aa.remove=function(){c.add(m).remove();c=null;a("."+x).removeData(z).removeClass(x)};aa.position=function(ak,ah){var al=0,ag=0,aj=c.offset();u.unbind("resize."+Z);c.css({top:-99999,left:-99999});if(ac.fixed&&!Q){c.css({position:"fixed"})}else{al=u.scrollTop();ag=u.scrollLeft();c.css({position:"absolute"})}if(ac.right!==false){ag+=Math.max(u.width()-ac.w-U-O-ab(ac.right,"x"),0)}else{if(ac.left!==false){ag+=ab(ac.left,"x")}else{ag+=Math.round(Math.max(u.width()-ac.w-U-O,0)/2)}}if(ac.bottom!==false){al+=Math.max(u.height()-ac.h-T-N-ab(ac.bottom,"y"),0)}else{if(ac.top!==false){al+=ab(ac.top,"y")}else{al+=Math.round(Math.max(u.height()-ac.h-T-N,0)/2)}}c.css({top:aj.top,left:aj.left});ak=(c.width()===ac.w+U&&c.height()===ac.h+T)?0:ak||0;v[0].style.width=v[0].style.height="9999px";function ai(am){t[0].style.width=b[0].style.width=e[0].style.width=am.style.width;k[0].style.height=k[1].style.height=e[0].style.height=h[0].style.height=p[0].style.height=am.style.height}c.dequeue().animate({width:ac.w+U,height:ac.h+T,top:al,left:ag},{duration:ak,complete:function(){ai(this);w=false;v[0].style.width=(ac.w+U+O)+"px";v[0].style.height=(ac.h+T+N)+"px";if(ah){ah()}setTimeout(function(){u.bind("resize."+Z,aa.position)},1)},step:function(){ai(this)}})};aa.resize=function(ag){if(X){ag=ag||{};if(ag.width){ac.w=ab(ag.width,"x")-U-O}if(ag.innerWidth){ac.w=ab(ag.innerWidth,"x")}i.css({width:ac.w});if(ag.height){ac.h=ab(ag.height,"y")-T-N}if(ag.innerHeight){ac.h=ab(ag.innerHeight,"y")}if(!ag.innerHeight&&!ag.height){i.css({height:"auto"});ac.h=i.height()}i.css({height:ac.h});aa.position(ac.transition==="none"?0:ac.speed)}};aa.prep=function(aj){if(!X){return}var ag,ak=ac.transition==="none"?0:ac.speed;i.remove();i=r(B,"LoadedContent").append(aj);function ai(){ac.w=ac.w||i.width();ac.w=ac.mw&&ac.mw<ac.w?ac.mw:ac.w;return ac.w}function ah(){ac.h=ac.h||i.height();ac.h=ac.mh&&ac.mh<ac.h?ac.mh:ac.h;return ac.h}i.hide().appendTo(j.show()).css({width:ai(),overflow:ac.scrolling?"auto":"hidden"}).css({height:ah()}).prependTo(e);j.hide();a(Y).css({"float":"none"});if(Q){a("select").not(c.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(E,function(){this.style.visibility="inherit"})}ag=function(){var ar,ao,av=o.length,ap,an="frameBorder",al="allowTransparency",am,au,aq;if(!X){return}function at(){if(P){c[0].style.removeAttribute("filter")}}am=function(){clearTimeout(V);k.hide();ae(G,ac.onComplete)};if(P){if(Y){i.fadeIn(100)}}s.html(ac.title).add(i).show();if(av>1){if(typeof ac.current==="string"){f.html(ac.current.replace("{current}",M+1).replace("{total}",av)).show()}l[(ac.loop||M<av-1)?"show":"hide"]().html(ac.next);n[(ac.loop||M)?"show":"hide"]().html(ac.previous);if(ac.slideshow){q.show()}if(ac.preloading){ar=[L(-1),L(1)];while((ao=o[ar.pop()])){au=a.data(ao,z).href||ao.href;if(a.isFunction(au)){au=au.call(ao)}if(R(au)){aq=new Image();aq.src=au}}}}else{g.hide()}if(ac.iframe){ap=r("iframe")[0];if(an in ap){ap[an]=0}if(al in ap){ap[al]="true"}ap.name=Z+(+new Date());if(ac.fastIframe){am()}else{a(ap).one("load",am)}ap.src=ac.href;if(!ac.scrolling){ap.scrolling="no"}a(ap).addClass(Z+"Iframe").appendTo(i).one(K,function(){ap.src="//about:blank"})}else{am()}if(ac.transition==="fade"){c.fadeTo(ak,1,at)}else{at()}};if(ac.transition==="fade"){c.fadeTo(ak,0,function(){aa.position(0,ag)})}else{aa.position(ak,ag)}};aa.load=function(ah){var ag,aj,ai=aa.prep;w=true;Y=false;D=o[M];if(!ah){W()}ae(K);ae(I,ac.onLoad);ac.h=ac.height?ab(ac.height,"y")-T-N:ac.innerHeight&&ab(ac.innerHeight,"y");ac.w=ac.width?ab(ac.width,"x")-U-O:ac.innerWidth&&ab(ac.innerWidth,"x");ac.mw=ac.w;ac.mh=ac.h;if(ac.maxWidth){ac.mw=ab(ac.maxWidth,"x")-U-O;ac.mw=ac.w&&ac.w<ac.mw?ac.w:ac.mw}if(ac.maxHeight){ac.mh=ab(ac.maxHeight,"y")-T-N;ac.mh=ac.h&&ac.h<ac.mh?ac.h:ac.mh}ag=ac.href;V=setTimeout(function(){k.show()},100);if(ac.inline){r(B).hide().insertBefore(a(ag)[0]).one(K,function(){a(this).replaceWith(i.children())});ai(a(ag))}else{if(ac.iframe){ai(" ")}else{if(ac.html){ai(ac.html)}else{if(R(ag)){a(Y=new Image()).addClass(Z+"Photo").error(function(){ac.title=false;ai(r(B,"Error").text("This image could not be loaded"))}).load(function(){var ak;Y.onload=null;if(ac.scalePhotos){aj=function(){Y.height-=Y.height*ak;Y.width-=Y.width*ak};if(ac.mw&&Y.width>ac.mw){ak=(Y.width-ac.mw)/Y.width;aj()}if(ac.mh&&Y.height>ac.mh){ak=(Y.height-ac.mh)/Y.height;aj()}}if(ac.h){Y.style.marginTop=Math.max(ac.h-Y.height,0)/2+"px"}if(o[1]&&(M<o.length-1||ac.loop)){Y.style.cursor="pointer";Y.onclick=function(){aa.next()}}if(P){Y.style.msInterpolationMode="bicubic"}setTimeout(function(){ai(Y)},1)});setTimeout(function(){Y.src=ag},1)}else{if(ag){j.load(ag,ac.data,function(ak,al,am){ai(al==="error"?r(B,"Error").text("Request unsuccessful: "+am.statusText):a(this).contents())})}}}}}};aa.next=function(){if(!w&&o[1]&&(M<o.length-1||ac.loop)){M=L(1);aa.load()}};aa.prev=function(){if(!w&&o[1]&&(M||ac.loop)){M=L(-1);aa.load()}};aa.close=function(){if(X&&!y){y=true;X=false;ae(E,ac.onCleanup);u.unbind("."+Z+" ."+H);m.fadeTo(200,0);c.stop().fadeTo(300,0,function(){c.add(m).css({opacity:1,cursor:"auto"}).hide();ae(K);i.remove();setTimeout(function(){y=false;ae(F,ac.onClosed)},1)})}};aa.element=function(){return a(D)};aa.settings=A;a(C).on("click","."+x,function(ag){if(!(ag.which>1||ag.shiftKey||ag.altKey||ag.metaKey)){ag.preventDefault();S(this)}});aa.init()}(jQuery,document,this));(function(a,C,af){var A={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},z="colorbox_v139",Z="cbox_v139",x=Z+"Element",J=Z+"_open",I=Z+"_load",G=Z+"_complete",E=Z+"_cleanup",F=Z+"_closed",K=Z+"_purge",P=(typeof a.browser!=="undefined"&&a.browser.makeSimpleExpr&&a.support.opacity)||(a("html").hasClass("lt-ie9")),Q=P&&(typeof a.browser!=="undefined"&&a.browser.version<7)||(a("html").hasClass("lt-ie7")),H=Z+"_IE6",m,c,v,e,t,h,p,b,o,u,i,j,k,s,f,q,l,n,d,g,ac,N,O,T,U,D,M,Y,X,w,y,V,aa,B="div";function r(aj,ai,ag){var ah=C.createElement(aj);if(ai){ah.id=Z+ai}if(ag){ah.style.cssText=ag}return a(ah)}function L(ag){var ah=o.length,ai=(M+ag)%ah;return(ai<0)?ah+ai:ai}function ab(ah,ag){return Math.round((/%/.test(ah)?((ag==="x"?u.width():u.height())/100):1)*parseInt(ah,10))}function R(ag){return ac.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(ag)}function W(){var ag;ac=a.extend({},a.data(D,z));for(ag in ac){if(a.isFunction(ac[ag])&&ag.slice(0,2)!=="on"){ac[ag]=ac[ag].call(D)}}ac.rel=ac.rel||D.rel||"nofollow";ac.href=ac.href||a(D).attr("href");ac.title=ac.title||D.title;if(typeof ac.href==="string"){ac.href=a.trim(ac.href)}}function ae(ah,ag){a.event.trigger(ah);if(ag){ag.call(D)}}function ad(){var al,ag=Z+"Slideshow_",ai="click."+Z,aj,ak,ah;if(ac.slideshow&&o[1]){aj=function(){q.text(ac.slideshowStop).unbind(ai).bind(G,function(){if(M<o.length-1||ac.loop){al=setTimeout(aa.next,ac.slideshowSpeed)}}).bind(I,function(){clearTimeout(al)}).one(ai+" "+E,ak);c.removeClass(ag+"off").addClass(ag+"on");al=setTimeout(aa.next,ac.slideshowSpeed)};ak=function(){clearTimeout(al);q.text(ac.slideshowStart).unbind([G,I,E,ai].join(" ")).one(ai,function(){aa.next();aj()});c.removeClass(ag+"on").addClass(ag+"off")};if(ac.slideshowAuto){aj()}else{ak()}}else{c.removeClass(ag+"off "+ag+"on")}}function S(ah){if(!y){D=ah;W();o=a(D);M=0;if(ac.rel!=="nofollow"){o=a("."+x).filter(function(){var ai=a.data(this,z).rel||this.rel;return(ai===ac.rel)});M=o.index(D);if(M===-1){o=o.add(D);M=o.length-1}}if(!X){X=w=true;c.show();if(ac.returnFocus){try{D.blur();a(D).one(F,function(){try{this.focus()}catch(ai){}})}catch(ag){}}m.css({opacity:+ac.opacity,cursor:ac.overlayClose?"pointer":"auto"}).show();ac.w=ab(ac.initialWidth,"x");ac.h=ab(ac.initialHeight,"y");aa.position();if(Q){u.bind("resize."+H+" scroll."+H,function(){m.css({width:u.width(),height:u.height(),top:u.scrollTop(),left:u.scrollLeft()})}).trigger("resize."+H)}ae(J,ac.onOpen);g.add(s).hide();d.html(ac.close).show()}aa.load(true)}}aa=a.fn[z]=a[z]=function(ai,ah){var ag=this;ai=ai||{};aa.init();if(!ag[0]){if(ag.selector){return ag}ag=a("<a/>");ai.open=true}if(ah){ai.onComplete=ah}ag.each(function(){a.data(this,z,a.extend({},a.data(this,z)||A,ai));a(this).addClass(x)});if((a.isFunction(ai.open)&&ai.open.call(ag))||ai.open){S(ag[0])}return ag};aa.init=function(){if(!c){if(!a("body")[0]){a(aa.init);return}u=a(af);c=r(B).attr({id:z,"class":P?Z+(Q?"IE6":"IE"):""});m=r(B,"Overlay",Q?"position:absolute":"").hide();v=r(B,"Wrapper");e=r(B,"Content").append(i=r(B,"LoadedContent","width:0; height:0; overflow:hidden"),k=r(B,"LoadingOverlay").add(r(B,"LoadingGraphic")),s=r(B,"Title"),f=r(B,"Current"),l=r(B,"Next"),n=r(B,"Previous"),q=r(B,"Slideshow").bind(J,ad),d=r(B,"Close"));v.append(r(B).append(r(B,"TopLeft"),t=r(B,"TopCenter"),r(B,"TopRight")),r(B,false,"clear:left").append(h=r(B,"MiddleLeft"),e,p=r(B,"MiddleRight")),r(B,false,"clear:left").append(r(B,"BottomLeft"),b=r(B,"BottomCenter"),r(B,"BottomRight"))).find("div div").css({"float":"left"});j=r(B,false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(m,c.append(v,j));N=t.height()+b.height()+e.outerHeight(true)-e.height();O=h.width()+p.width()+e.outerWidth(true)-e.width();T=i.outerHeight(true);U=i.outerWidth(true);c.css({"padding-bottom":N,"padding-right":O}).hide();l.click(function(){aa.next()});n.click(function(){aa.prev()});d.click(function(){aa.close()});g=l.add(n).add(f).add(q);m.click(function(){if(ac.overlayClose){aa.close()}});a(C).bind("keydown."+Z,function(ag){var ah=ag.keyCode;if(X&&ac.escKey&&ah===27){ag.preventDefault();aa.close()}if(X&&ac.arrowKey&&o[1]){if(ah===37){ag.preventDefault();n.click()}else{if(ah===39){ag.preventDefault();l.click()}}}})}};aa.remove=function(){c.add(m).remove();c=null;a("."+x).removeData(z).removeClass(x)};aa.position=function(ak,ah){var al=0,ag=0,aj=c.offset();u.unbind("resize."+Z);c.css({top:-99999,left:-99999});if(ac.fixed&&!Q){c.css({position:"fixed"})}else{al=u.scrollTop();ag=u.scrollLeft();c.css({position:"absolute"})}if(ac.right!==false){ag+=Math.max(u.width()-ac.w-U-O-ab(ac.right,"x"),0)}else{if(ac.left!==false){ag+=ab(ac.left,"x")}else{ag+=Math.round(Math.max(u.width()-ac.w-U-O,0)/2)}}if(ac.bottom!==false){al+=Math.max(u.height()-ac.h-T-N-ab(ac.bottom,"y"),0)}else{if(ac.top!==false){al+=ab(ac.top,"y")}else{al+=Math.round(Math.max(u.height()-ac.h-T-N,0)/2)}}c.css({top:aj.top,left:aj.left});ak=(c.width()===ac.w+U&&c.height()===ac.h+T)?0:ak||0;v[0].style.width=v[0].style.height="9999px";function ai(am){t[0].style.width=b[0].style.width=e[0].style.width=am.style.width;k[0].style.height=k[1].style.height=e[0].style.height=h[0].style.height=p[0].style.height=am.style.height}c.dequeue().animate({width:ac.w+U,height:ac.h+T,top:al,left:ag},{duration:ak,complete:function(){ai(this);w=false;v[0].style.width=(ac.w+U+O)+"px";v[0].style.height=(ac.h+T+N)+"px";if(ah){ah()}setTimeout(function(){u.bind("resize."+Z,aa.position)},1)},step:function(){ai(this)}})};aa.resize=function(ag){if(X){ag=ag||{};if(ag.width){ac.w=ab(ag.width,"x")-U-O}if(ag.innerWidth){ac.w=ab(ag.innerWidth,"x")}i.css({width:ac.w});if(ag.height){ac.h=ab(ag.height,"y")-T-N}if(ag.innerHeight){ac.h=ab(ag.innerHeight,"y")}if(!ag.innerHeight&&!ag.height){i.css({height:"auto"});ac.h=i.height()}i.css({height:ac.h});aa.position(ac.transition==="none"?0:ac.speed)}};aa.prep=function(aj){if(!X){return}var ag,ak=ac.transition==="none"?0:ac.speed;i.remove();i=r(B,"LoadedContent").append(aj);function ai(){ac.w=ac.w||i.width();ac.w=ac.mw&&ac.mw<ac.w?ac.mw:ac.w;return ac.w}function ah(){ac.h=ac.h||i.height();ac.h=ac.mh&&ac.mh<ac.h?ac.mh:ac.h;return ac.h}i.hide().appendTo(j.show()).css({width:ai(),overflow:ac.scrolling?"auto":"hidden"}).css({height:ah()}).prependTo(e);j.hide();a(Y).css({"float":"none"});if(Q){a("select").not(c.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(E,function(){this.style.visibility="inherit"})}ag=function(){var ar,ao,av=o.length,ap,an="frameBorder",al="allowTransparency",am,au,aq;if(!X){return}function at(){if(P){c[0].style.removeAttribute("filter")}}am=function(){clearTimeout(V);k.hide();ae(G,ac.onComplete)};if(P){if(Y){i.fadeIn(100)}}s.html(ac.title).add(i).show();if(av>1){if(typeof ac.current==="string"){f.html(ac.current.replace("{current}",M+1).replace("{total}",av)).show()}l[(ac.loop||M<av-1)?"show":"hide"]().html(ac.next);n[(ac.loop||M)?"show":"hide"]().html(ac.previous);if(ac.slideshow){q.show()}if(ac.preloading){ar=[L(-1),L(1)];while((ao=o[ar.pop()])){au=a.data(ao,z).href||ao.href;if(a.isFunction(au)){au=au.call(ao)}if(R(au)){aq=new Image();aq.src=au}}}}else{g.hide()}if(ac.iframe){ap=r("iframe")[0];if(an in ap){ap[an]=0}if(al in ap){ap[al]="true"}ap.name=Z+(+new Date());if(ac.fastIframe){am()}else{a(ap).one("load",am)}ap.src=ac.href;if(!ac.scrolling){ap.scrolling="no"}a(ap).addClass(Z+"Iframe").appendTo(i).one(K,function(){ap.src="//about:blank"})}else{am()}if(ac.transition==="fade"){c.fadeTo(ak,1,at)}else{at()}};if(ac.transition==="fade"){c.fadeTo(ak,0,function(){aa.position(0,ag)})}else{aa.position(ak,ag)}};aa.load=function(ah){var ag,aj,ai=aa.prep;w=true;Y=false;D=o[M];if(!ah){W()}ae(K);ae(I,ac.onLoad);ac.h=ac.height?ab(ac.height,"y")-T-N:ac.innerHeight&&ab(ac.innerHeight,"y");ac.w=ac.width?ab(ac.width,"x")-U-O:ac.innerWidth&&ab(ac.innerWidth,"x");ac.mw=ac.w;ac.mh=ac.h;if(ac.maxWidth){ac.mw=ab(ac.maxWidth,"x")-U-O;ac.mw=ac.w&&ac.w<ac.mw?ac.w:ac.mw}if(ac.maxHeight){ac.mh=ab(ac.maxHeight,"y")-T-N;ac.mh=ac.h&&ac.h<ac.mh?ac.h:ac.mh}ag=ac.href;V=setTimeout(function(){k.show()},100);if(ac.inline){r(B).hide().insertBefore(a(ag)[0]).one(K,function(){a(this).replaceWith(i.children())});ai(a(ag))}else{if(ac.iframe){ai(" ")}else{if(ac.html){ai(ac.html)}else{if(R(ag)){a(Y=new Image()).addClass(Z+"Photo").error(function(){ac.title=false;ai(r(B,"Error").text("This image could not be loaded"))}).load(function(){var ak;Y.onload=null;if(ac.scalePhotos){aj=function(){Y.height-=Y.height*ak;Y.width-=Y.width*ak};if(ac.mw&&Y.width>ac.mw){ak=(Y.width-ac.mw)/Y.width;aj()}if(ac.mh&&Y.height>ac.mh){ak=(Y.height-ac.mh)/Y.height;aj()}}if(ac.h){Y.style.marginTop=Math.max(ac.h-Y.height,0)/2+"px"}if(o[1]&&(M<o.length-1||ac.loop)){Y.style.cursor="pointer";Y.onclick=function(){aa.next()}}if(P){Y.style.msInterpolationMode="bicubic"}setTimeout(function(){ai(Y)},1)});setTimeout(function(){Y.src=ag},1)}else{if(ag){j.load(ag,ac.data,function(ak,al,am){ai(al==="error"?r(B,"Error").text("Request unsuccessful: "+am.statusText):a(this).contents())})}}}}}};aa.next=function(){if(!w&&o[1]&&(M<o.length-1||ac.loop)){M=L(1);aa.load()}};aa.prev=function(){if(!w&&o[1]&&(M||ac.loop)){M=L(-1);aa.load()}};aa.close=function(){if(X&&!y){y=true;X=false;ae(E,ac.onCleanup);u.unbind("."+Z+" ."+H);m.fadeTo(200,0);c.stop().fadeTo(300,0,function(){c.add(m).css({opacity:1,cursor:"auto"}).hide();ae(K);i.remove();setTimeout(function(){y=false;ae(F,ac.onClosed)},1)})}};aa.element=function(){return a(D)};aa.settings=A;a(C).on("click","."+x,function(ag){if(!(ag.which>1||ag.shiftKey||ag.altKey||ag.metaKey)){ag.preventDefault();S(this)}});aa.init()}(jQuery,document,this));(function(a){a.fn.jCarouselLite=function(e){e=a.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},e||{});return this.each(function(){var q=false,f=e.vertical?"top":"left",r=e.vertical?"height":"width";var j=a(this),u=a("ul",j),t=a("li",u),s=t.size(),x=e.visible,m=0;function g(){m=setInterval(function(){l(i+e.scroll)},e.auto+e.speed)}function h(){clearInterval(m)}if(e.circular){u.prepend(t.slice(s-x-1+1).clone()).append(t.slice(0,x).clone());e.start+=x}var o=a("li",u),n=o.size(),i=e.start;j.css("visibility","visible");o.css({overflow:"hidden","float":e.vertical?"none":"left"});u.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});j.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var p=e.vertical?c(o):d(o);var w=p*n;var k=p*x;o.css({width:o.width(),height:o.height()});u.css(r,w+"px").css(f,-(i*p));j.css(r,k+"px");if(e.btnPrev){a(e.btnPrev).click(function(){return l(i-e.scroll)})}if(e.btnNext){a(e.btnNext).click(function(){return l(i+e.scroll)})}if(e.btnGo){a.each(e.btnGo,function(v,z){a(z).click(function(){return l(e.circular?e.visible+v:v)})})}if(e.mouseWheel&&j.mousewheel){j.mousewheel(function(z,v){return v>0?l(i-e.scroll):l(i+e.scroll)})}if(e.auto){g();a(this).parent().mouseenter(h);a(this).parent().mouseleave(g)}function y(){return o.slice(i).slice(0,x)}function l(v){if(!q){if(e.beforeStart){e.beforeStart.call(this,y())}if(e.circular){if(v<=e.start-x-1){u.css(f,-((n-(x*2))*p)+"px");i=v==e.start-x-1?n-(x*2)-1:n-(x*2)-e.scroll}else{if(v>=n-x+1){u.css(f,-((x)*p)+"px");i=v==n-x+1?x+1:x+e.scroll}else{i=v}}}else{if(v<0||v>n-x){return}else{i=v}}q=true;u.animate(f=="left"?{left:-(i*p)}:{top:-(i*p)},e.speed,e.easing,function(){if(e.afterEnd){e.afterEnd.call(this,y())}q=false});if(!e.circular){a(e.btnPrev+","+e.btnNext).removeClass("disabled");a((i-e.scroll<0&&e.btnPrev)||(i+e.scroll>n-x&&e.btnNext)||[]).addClass("disabled")}}return false}})};function b(e,f){return parseInt(a.css(e[0],f))||0}function d(e){return e[0].offsetWidth+b(e,"marginLeft")+b(e,"marginRight")}function c(e){return e[0].offsetHeight+b(e,"marginTop")+b(e,"marginBottom")}})(jQuery);var CustomFormProcessor=(function(d,a){var b=null,c=new d.Querystring();return{init:function(){if(b){var g=d.location.search.toLowerCase().indexOf("displayinpopup=true")>=0?"true":"false",k=c.get("ListingID"),j=c.get("hideBranding"),i=[],o=d.location.pathname,n=typeof(d.pageTracker)!=="undefined"?d.pageTracker:null,m=new Date().getTime(),f=d.Utils.PublicAppName;if(k){g+="&ListingID="+k}if(j&&j==="1"){g+="&hideBranding=1"}var l="";if(d.overrideLocaleID){l="&OverrideLocaleID="+d.overrideLocaleID}i.push('<form name="'+b.Url+'" action="'+f+"/Content/Forms/PostForm.aspx?displayinpopup="+g+l+'" method="post">');i.push('  <input type="hidden" name="customFormId" value="${Id}" />');i.push('  <input type="hidden" name="TransactionId" value="'+m+'" />');i.push("  {{html FormHtml}}");i.push("</form>");a.template("formTemplate",i.join(""));a.tmpl("formTemplate",b).appendTo("#Master_Viewport");try{n=d.top.pageTracker}catch(h){}if(b.HasFormLoadTracking){if(typeof(n)!=="undefined"){o+=o.indexOf("?")===-1?"?FormTracking=Load&":"&FormTracking=Load&";o+=a("#Master_Viewport form").serialize();n._trackPageview(o);o=d.location.pathname}}if(b.HasFormSubmitTracking){a("#Master_Viewport form").submit(function(){if(typeof(n)!=="undefined"){o+=o.indexOf("?")===-1?"?FormTracking=Submit&":"&FormTracking=Submit&";o+=a(this).serialize();n._trackPageview(o)}return true})}}},setForm:function(e){if(e.Id>0){b=e}}}}(this,this.jQuery));this.jQuery(function(){CustomFormProcessor.init()});var FormsProcessor=(function(b,a){return{load:function(e){var c=b.Utils.PublicAppName,d=e.name;if(d.indexOf("/forms/")===-1){d=c+"/forms/"+d}a.ajax({url:d+"?ResponseContentType=json",dataType:"json",success:function(h){var f=a(e.context),g=null,i={context:f,form:h},k='<input type="hidden" name="customFormId" value="'+h.Id+'" />',j;if(f.is("[data-forms-processor-bound]")){return}else{f.attr("data-forms-processor-bound",true)}f.submit(function(){return false}).html(h.FormHtml+k);g=f.find('[data-form-type="submit"]');if(!g.length){b.alert('Please include a button or hyperlink with the attribute [data-form-type="submit"] that will submit the form when clicked.');return}if(e.success){e.success(i)}if(h.HasFormLoadTracking){if(typeof(b.pageTracker)!=="undefined"){j=b.location.pathname;j+=j.indexOf("?")===-1?"?":"&";j+=f.serialize();j+="&tracktype=load";b.pageTracker._trackPageview(j)}if(typeof(b.pageTracker)!=="undefined"){j=e.name;j+=j.indexOf("?")===-1?"?FormTracking=Load&":"&FormTracking=Load&";j+=f.serialize();b.pageTracker._trackPageview(j)}}g.click(function(){if(e.actions&&e.actions.submit){if(!e.actions.submit(i)){return}}if(h.HasFormSubmitTracking){if(typeof(b.pageTracker)!=="undefined"){j=b.location.pathname;j+=j.indexOf("?")===-1?"?":"&";j+=f.serialize();j+="&tracktype=submit";b.pageTracker._trackPageview(j)}if(typeof(b.pageTracker)!=="undefined"){j=e.name;j+=j.indexOf("?")===-1?"?FormTracking=Submit&":"&FormTracking=Submit&";j+=f.serialize();b.pageTracker._trackPageview(j)}}function l(){var m=c+"/content/forms/postform.aspx?ResponseContentType=json";if(e.uniqueClientKey!=""){m+="&UniqueClientKey="+e.uniqueClientKey}m+="&v="+(new Date());if(e.allowMobileRedirect===false){m+="&mobile=no"}return m}a.ajax({url:l(),type:"POST",dataType:"json",data:f.serialize()+"&validstamp="+encodeURIComponent(h.SubmissionKey),success:function(m){if(m.IsSuccess){if(e.actions&&e.actions.confirmation){e.actions.confirmation(m.Content,i)}}else{b.alert("Error: \n"+m.Content)}}})})}})}}}(this,this.jQuery));(function(a){a.fn.titlelabel=function(c){var b={label:"title",nullClass:"empty"};var c=a.extend(b,c);return this.each(function(){var d=a(this);if(this.tagName=="SELECT"){d.change(function(){var e=d.find("option:selected");if(e.val()==""){d.addClass(c.nullClass)}else{d.removeClass(c.nullClass)}});d.change()}else{d.focus(function(){if(d.val()==d.attr(c.label)){d.val("");d.removeClass(c.nullClass)}});d.blur(function(){if(d.val()==""||d.val()==d.attr(c.label)){d.val(d.attr(c.label));d.addClass(c.nullClass)}});d.blur()}})};a.fn.cleartitlelabel=function(){return this.each(function(){var b=a(this);if(b.val()==b.attr("title")){b.val("");b.removeClass("empty")}})}})(jQuery);(function(i,O,l,n){var j=function(e){function o(a,b){var c=j.defaults.columns,d=a.aoColumns.length,c=i.extend({},j.models.oColumn,c,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:b?b:l.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.oDefaults:d});a.aoColumns.push(c);if(a.aoPreSearchCols[d]===n||null===a.aoPreSearchCols[d]){a.aoPreSearchCols[d]=i.extend({},j.models.oSearch)}else{if(c=a.aoPreSearchCols[d],c.bRegex===n&&(c.bRegex=!0),c.bSmart===n&&(c.bSmart=!0),c.bCaseInsensitive===n){c.bCaseInsensitive=!0}}r(a,d,null)}function r(a,b,c){var d=a.aoColumns[b];c!==n&&null!==c&&(c.mDataProp&&!c.mData&&(c.mData=c.mDataProp),c.sType!==n&&(d.sType=c.sType,d._bAutoType=!1),i.extend(d,c),p(d,c,"sWidth","sWidthOrig"),c.iDataSort!==n&&(d.aDataSort=[c.iDataSort]),p(d,c,"aDataSort"));var h=d.mRender?S(d.mRender):null,f=S(d.mData);d.fnGetData=function(a,b){var c=f(a,b);return d.mRender&&b&&""!==b?h(c,b,a):c};d.fnSetData=ta(d.mData);a.oFeatures.bSort||(d.bSortable=!1);!d.bSortable||-1==i.inArray("asc",d.asSorting)&&-1==i.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableNone,d.sSortingClassJUI=""):d.bSortable||-1==i.inArray("asc",d.asSorting)&&-1==i.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortable,d.sSortingClassJUI=a.oClasses.sSortJUI):-1!=i.inArray("asc",d.asSorting)&&-1==i.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableAsc,d.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==i.inArray("asc",d.asSorting)&&-1!=i.inArray("desc",d.asSorting)&&(d.sSortingClass=a.oClasses.sSortableDesc,d.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function k(a){if(!1===a.oFeatures.bAutoWidth){return !1}ca(a);for(var b=0,c=a.aoColumns.length;b<c;b++){a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}}function G(a,b){var c=v(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function t(a,b){var c=v(a,"bVisible"),c=i.inArray(b,c);return -1!==c?c:null}function w(a){return v(a,"bVisible").length}function v(a,b){var c=[];i.map(a.aoColumns,function(a,h){a[b]&&c.push(h)});return c}function D(a){for(var b=j.ext.aTypes,c=b.length,d=0;d<c;d++){var h=b[d](a);if(null!==h){return h}}return"string"}function y(a,b){for(var c=b.split(","),d=[],h=0,f=a.aoColumns.length;h<f;h++){for(var g=0;g<f;g++){if(a.aoColumns[h].sName==c[g]){d.push(g);break}}}return d}function H(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++){b+=a.aoColumns[c].sName+","}return b.length==d?"":b.slice(0,-1)}function ua(a,b,c,d){var h,f,g,e,s;if(b){for(h=b.length-1;0<=h;h--){var m=b[h].aTargets;i.isArray(m)||E(a,1,"aTargets must be an array of targets, not a "+typeof m);f=0;for(g=m.length;f<g;f++){if("number"===typeof m[f]&&0<=m[f]){for(;a.aoColumns.length<=m[f];){o(a)}d(m[f],b[h])}else{if("number"===typeof m[f]&&0>m[f]){d(a.aoColumns.length+m[f],b[h])}else{if("string"===typeof m[f]){e=0;for(s=a.aoColumns.length;e<s;e++){("_all"==m[f]||i(a.aoColumns[e].nTh).hasClass(m[f]))&&d(e,b[h])}}}}}}}if(c){h=0;for(a=c.length;h<a;h++){d(h,c[h])}}}function J(a,b){var c;c=i.isArray(b)?b.slice():i.extend(!0,{},b);var d=a.aoData.length,h=i.extend(!0,{},j.models.oRow);h._aData=c;a.aoData.push(h);for(var f,h=0,g=a.aoColumns.length;h<g;h++){c=a.aoColumns[h],"function"===typeof c.fnRender&&c.bUseRendered&&null!==c.mData?I(a,d,h,T(a,d,h)):I(a,d,h,x(a,d,h)),c._bAutoType&&"string"!=c.sType&&(f=x(a,d,h,"type"),null!==f&&""!==f&&(f=D(f),null===c.sType?c.sType=f:c.sType!=f&&"html"!=c.sType&&(c.sType="string")))}a.aiDisplayMaster.push(d);a.oFeatures.bDeferRender||da(a,d);return d}function va(a){var b,c,d,h,f,g,e,s,m;if(a.bDeferLoading||null===a.sAjaxSource){e=a.nTBody.childNodes;b=0;for(c=e.length;b<c;b++){if("TR"==e[b].nodeName.toUpperCase()){s=a.aoData.length;e[b]._DT_RowIndex=s;a.aoData.push(i.extend(!0,{},j.models.oRow,{nTr:e[b]}));a.aiDisplayMaster.push(s);g=e[b].childNodes;d=f=0;for(h=g.length;d<h;d++){if(m=g[d].nodeName.toUpperCase(),"TD"==m||"TH"==m){I(a,s,f,i.trim(g[d].innerHTML)),f++}}}}}e=U(a);g=[];b=0;for(c=e.length;b<c;b++){d=0;for(h=e[b].childNodes.length;d<h;d++){f=e[b].childNodes[d],m=f.nodeName.toUpperCase(),("TD"==m||"TH"==m)&&g.push(f)}}h=0;for(e=a.aoColumns.length;h<e;h++){m=a.aoColumns[h];null===m.sTitle&&(m.sTitle=m.nTh.innerHTML);f=m._bAutoType;s="function"===typeof m.fnRender;var o=null!==m.sClass,k=m.bVisible,r,n;if(f||s||o||!k){b=0;for(c=a.aoData.length;b<c;b++){d=a.aoData[b],r=g[b*e+h],f&&"string"!=m.sType&&(n=x(a,b,h,"type"),""!==n&&(n=D(n),null===m.sType?m.sType=n:m.sType!=n&&"html"!=m.sType&&(m.sType="string"))),"function"===typeof m.mData&&(r.innerHTML=x(a,b,h,"display")),s&&(n=T(a,b,h),r.innerHTML=n,m.bUseRendered&&I(a,b,h,n)),o&&(r.className+=" "+m.sClass),k?d._anHidden[h]=null:(d._anHidden[h]=r,r.parentNode.removeChild(r)),m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,r,x(a,b,h,"display"),d._aData,b,h)}}}if(0!==a.aoRowCreatedCallback.length){b=0;for(c=a.aoData.length;b<c;b++){d=a.aoData[b],C(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,b])}}}function K(a,b){return b._DT_RowIndex!==n?b._DT_RowIndex:null}function ea(a,b,c){for(var b=L(a,b),d=0,a=a.aoColumns.length;d<a;d++){if(b[d]===c){return d}}return -1}function Y(a,b,c,d){for(var h=[],f=0,g=d.length;f<g;f++){h.push(x(a,b,d[f],c))}return h}function x(a,b,c,d){var h=a.aoColumns[c];if((c=h.fnGetData(a.aoData[b]._aData,d))===n){return a.iDrawError!=a.iDraw&&null===h.sDefaultContent&&(E(a,0,"Requested unknown parameter "+("function"==typeof h.mData?"{mData function}":"'"+h.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),h.sDefaultContent}if(null===c&&null!==h.sDefaultContent){c=h.sDefaultContent}else{if("function"===typeof c){return c()}}return"display"==d&&null===c?"":c}function I(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function S(a){if(null===a){return function(){return null}}if("function"===typeof a){return function(b,d,h){return a(b,d,h)}}if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,d,h){var f=h.split("."),g;if(""!==h){var e=0;for(g=f.length;e<g;e++){if(h=f[e].match(V)){f[e]=f[e].replace(V,"");""!==f[e]&&(a=a[f[e]]);g=[];f.splice(0,e+1);for(var f=f.join("."),e=0,i=a.length;e<i;e++){g.push(b(a[e],d,f))}a=h[0].substring(1,h[0].length-1);a=""===a?g:g.join(a);break}if(null===a||a[f[e]]===n){return n}a=a[f[e]]}}return a};return function(c,d){return b(c,d,a)}}return function(b){return b[a]}}function ta(a){if(null===a){return function(){}}if("function"===typeof a){return function(b,d){a(b,"set",d)}}if("string"===typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,d,h){var h=h.split("."),f,g,e=0;for(g=h.length-1;e<g;e++){if(f=h[e].match(V)){h[e]=h[e].replace(V,"");a[h[e]]=[];f=h.slice();f.splice(0,e+1);g=f.join(".");for(var i=0,m=d.length;i<m;i++){f={},b(f,d[i],g),a[h[e]].push(f)}return}if(null===a[h[e]]||a[h[e]]===n){a[h[e]]={}}a=a[h[e]]}a[h[h.length-1].replace(V,"")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Z(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++){b.push(a.aoData[d]._aData)}return b}function fa(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);A(a)}function ga(a,b){for(var c=-1,d=0,h=a.length;d<h;d++){a[d]==b?c=d:a[d]>b&&a[d]--}-1!=c&&a.splice(c,1)}function T(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},x(a,b,c,"display"))}function da(a,b){var c=a.aoData[b],d;if(null===c.nTr){c.nTr=l.createElement("tr");c.nTr._DT_RowIndex=b;c._aData.DT_RowId&&(c.nTr.id=c._aData.DT_RowId);c._aData.DT_RowClass&&i(c.nTr).addClass(c._aData.DT_RowClass);for(var h=0,f=a.aoColumns.length;h<f;h++){var g=a.aoColumns[h];d=l.createElement(g.sCellType);d.innerHTML="function"===typeof g.fnRender&&(!g.bUseRendered||null===g.mData)?T(a,b,h):x(a,b,h,"display");null!==g.sClass&&(d.className=g.sClass);g.bVisible?(c.nTr.appendChild(d),c._anHidden[h]=null):c._anHidden[h]=d;g.fnCreatedCell&&g.fnCreatedCell.call(a.oInstance,d,x(a,b,h,"display"),c._aData,b,h)}C(a,"aoRowCreatedCallback",null,[c.nTr,c._aData,b])}}function wa(a){var b,c,d;if(0!==a.nTHead.getElementsByTagName("th").length){b=0;for(d=a.aoColumns.length;b<d;b++){if(c=a.aoColumns[b].nTh,c.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(c.setAttribute("tabindex",a.iTabIndex),c.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&i(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=c.innerHTML){c.innerHTML=a.aoColumns[b].sTitle}}}else{var h=l.createElement("tr");b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,c.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&i(c).addClass(a.aoColumns[b].sClass),h.appendChild(c)}i(a.nTHead).html("")[0].appendChild(h);W(a.aoHeader,a.nTHead)}i(a.nTHead).children("tr").attr("role","row");if(a.bJUI){b=0;for(d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh;h=l.createElement("div");h.className=a.oClasses.sSortJUIWrapper;i(c).contents().appendTo(h);var f=l.createElement("span");f.className=a.oClasses.sSortIcon;h.appendChild(f);c.appendChild(h)}}if(a.oFeatures.bSort){for(b=0;b<a.aoColumns.length;b++){!1!==a.aoColumns[b].bSortable?ha(a,a.aoColumns[b].nTh,b):i(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone)}}""!==a.oClasses.sFooterTH&&i(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot){c=P(a,null,a.aoFooter);b=0;for(d=a.aoColumns.length;b<d;b++){c[b]&&(a.aoColumns[b].nTf=c[b],a.aoColumns[b].sClass&&i(c[b]).addClass(a.aoColumns[b].sClass))}}}function X(a,b,c){var d,h,f,g=[],e=[],i=a.aoColumns.length,m;c===n&&(c=!1);d=0;for(h=b.length;d<h;d++){g[d]=b[d].slice();g[d].nTr=b[d].nTr;for(f=i-1;0<=f;f--){!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1)}e.push([])}d=0;for(h=g.length;d<h;d++){if(a=g[d].nTr){for(;f=a.firstChild;){a.removeChild(f)}}f=0;for(b=g[d].length;f<b;f++){if(m=i=1,e[d][f]===n){a.appendChild(g[d][f].cell);for(e[d][f]=1;g[d+i]!==n&&g[d][f].cell==g[d+i][f].cell;){e[d+i][f]=1,i++}for(;g[d][f+m]!==n&&g[d][f].cell==g[d][f+m].cell;){for(c=0;c<i;c++){e[d+c][f+m]=1}m++}g[d][f].cell.rowSpan=i;g[d][f].cell.colSpan=m}}}}function z(a){var b=C(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==i.inArray(!1,b)){F(a,!1)}else{var c,d,b=[],h=0,f=a.asStripeClasses.length;c=a.aoOpenRows.length;a.bDrawing=!0;a.iInitDisplayStart!==n&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,A(a));if(a.bDeferLoading){a.bDeferLoading=!1,a.iDraw++}else{if(a.oFeatures.bServerSide){if(!a.bDestroying&&!xa(a)){return}}else{a.iDraw++}}if(0!==a.aiDisplay.length){var g=a._iDisplayStart;d=a._iDisplayEnd;a.oFeatures.bServerSide&&(g=0,d=a.aoData.length);for(;g<d;g++){var e=a.aoData[a.aiDisplay[g]];null===e.nTr&&da(a,a.aiDisplay[g]);var s=e.nTr;if(0!==f){var m=a.asStripeClasses[h%f];e._sRowStripe!=m&&(i(s).removeClass(e._sRowStripe).addClass(m),e._sRowStripe=m)}C(a,"aoRowCallback",null,[s,a.aoData[a.aiDisplay[g]]._aData,h,g]);b.push(s);h++;if(0!==c){for(e=0;e<c;e++){if(s==a.aoOpenRows[e].nParent){b.push(a.aoOpenRows[e].nTr);break}}}}}else{b[0]=l.createElement("tr"),a.asStripeClasses[0]&&(b[0].className=a.asStripeClasses[0]),c=a.oLanguage,f=c.sZeroRecords,1==a.iDraw&&null!==a.sAjaxSource&&!a.oFeatures.bServerSide?f=c.sLoadingRecords:c.sEmptyTable&&0===a.fnRecordsTotal()&&(f=c.sEmptyTable),c=l.createElement("td"),c.setAttribute("valign","top"),c.colSpan=w(a),c.className=a.oClasses.sRowEmpty,c.innerHTML=ia(a,f),b[h].appendChild(c)}C(a,"aoHeaderCallback","header",[i(a.nTHead).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);C(a,"aoFooterCallback","footer",[i(a.nTFoot).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);h=l.createDocumentFragment();c=l.createDocumentFragment();if(a.nTBody){f=a.nTBody.parentNode;c.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered){for(;c=a.nTBody.firstChild;){a.nTBody.removeChild(c)}}c=0;for(d=b.length;c<d;c++){h.appendChild(b[c])}a.nTBody.appendChild(h);null!==f&&f.appendChild(a.nTBody)}C(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(F(a,!1),a._bInitComplete||$(a))}}function aa(a){a.oFeatures.bSort?Q(a,a.oPreviousSearch):a.oFeatures.bFilter?M(a,a.oPreviousSearch):(A(a),z(a))}function ya(a){var b=i("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=i('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,d=a.sDom.split(""),h,f,g,e,s,m,o,k=0;k<d.length;k++){f=0;g=d[k];if("<"==g){e=i("<div></div>")[0];s=d[k+1];if("'"==s||'"'==s){m="";for(o=2;d[k+o]!=s;){m+=d[k+o],o++}"H"==m?m=a.oClasses.sJUIHeader:"F"==m&&(m=a.oClasses.sJUIFooter);-1!=m.indexOf(".")?(s=m.split("."),e.id=s[0].substr(1,s[0].length-1),e.className=s[1]):"#"==m.charAt(0)?e.id=m.substr(1,m.length-1):e.className=m;k+=o}c.appendChild(e);c=e}else{if(">"==g){c=c.parentNode}else{if("l"==g&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange){h=za(a),f=1}else{if("f"==g&&a.oFeatures.bFilter){h=Aa(a),f=1}else{if("r"==g&&a.oFeatures.bProcessing){h=Ba(a),f=1}else{if("t"==g){h=Ca(a),f=1}else{if("i"==g&&a.oFeatures.bInfo){h=Da(a),f=1}else{if("p"==g&&a.oFeatures.bPaginate){h=Ea(a),f=1}else{if(0!==j.ext.aoFeatures.length){e=j.ext.aoFeatures;o=0;for(s=e.length;o<s;o++){if(g==e[o].cFeature){(h=e[o].fnInit(a))&&(f=1);break}}}}}}}}}}}1==f&&null!==h&&("object"!==typeof a.aanFeatures[g]&&(a.aanFeatures[g]=[]),a.aanFeatures[g].push(h),c.appendChild(h))}b.parentNode.replaceChild(a.nTableWrapper,b)}function W(a,b){var c=i(b).children("tr"),d,h,f,g,e,s,m,j;a.splice(0,a.length);h=0;for(s=c.length;h<s;h++){a.push([])}h=0;for(s=c.length;h<s;h++){f=0;for(m=c[h].childNodes.length;f<m;f++){if(d=c[h].childNodes[f],"TD"==d.nodeName.toUpperCase()||"TH"==d.nodeName.toUpperCase()){var o=1*d.getAttribute("colspan"),k=1*d.getAttribute("rowspan"),o=!o||0===o||1===o?1:o,k=!k||0===k||1===k?1:k;for(g=0;a[h][g];){g++}j=g;for(e=0;e<o;e++){for(g=0;g<k;g++){a[h+g][j+e]={cell:d,unique:1==o?!0:!1},a[h+g].nTr=c[h]}}}}}}function P(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],W(c,b)));for(var b=0,h=c.length;b<h;b++){for(var f=0,g=c[b].length;f<g;f++){if(c[b][f].unique&&(!d[f]||!a.bSortCellsTop)){d[f]=c[b][f].cell}}}return d}function xa(a){if(a.bAjaxDataGet){a.iDraw++;F(a,!0);var b=Fa(a);ja(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Ga(a,b)},a);return !1}return !0}function Fa(a){var b=a.aoColumns.length,c=[],d,h,f,g;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:H(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(f=0;f<b;f++){d=a.aoColumns[f].mData,c.push({name:"mDataProp_"+f,value:"function"===typeof d?"function":d})}if(!1!==a.oFeatures.bFilter){c.push({name:"sSearch",value:a.oPreviousSearch.sSearch});c.push({name:"bRegex",value:a.oPreviousSearch.bRegex});for(f=0;f<b;f++){c.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch}),c.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex}),c.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable})}}if(!1!==a.oFeatures.bSort){var e=0;d=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(f=0;f<d.length;f++){h=a.aoColumns[d[f][0]].aDataSort;for(g=0;g<h.length;g++){c.push({name:"iSortCol_"+e,value:h[g]}),c.push({name:"sSortDir_"+e,value:d[f][1]}),e++}}c.push({name:"iSortingCols",value:e});for(f=0;f<b;f++){c.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}}return c}function ja(a,b){C(a,"aoServerParams","serverParams",[b])}function Ga(a,b){if(b.sEcho!==n){if(1*b.sEcho<a.iDraw){return}a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&fa(a);a._iRecordsTotal=parseInt(b.iTotalRecords,10);a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c=H(a),c=b.sColumns!==n&&""!==c&&b.sColumns!=c,d;c&&(d=y(a,b.sColumns));for(var h=S(a.sAjaxDataProp)(b),f=0,g=h.length;f<g;f++){if(c){for(var e=[],i=0,m=a.aoColumns.length;i<m;i++){e.push(h[f][d[i]])}J(a,e)}else{J(a,h[f])}}a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;z(a);a.bAjaxDataGet=!0;F(a,!1)}function Aa(a){var b=a.oPreviousSearch,c=a.oLanguage.sSearch,c=-1!==c.indexOf("_INPUT_")?c.replace("_INPUT_",'<input type="text" />'):""===c?'<input type="text" />':c+' <input type="text" />',d=l.createElement("div");d.className=a.oClasses.sFilter;d.innerHTML="<label>"+c+"</label>";a.aanFeatures.f||(d.id=a.sTableId+"_filter");c=i('input[type="text"]',d);d._DT_Input=c[0];c.val(b.sSearch.replace('"',"&quot;"));c.bind("keyup.DT",function(){for(var c=a.aanFeatures.f,d=this.value===""?"":this.value,g=0,e=c.length;g<e;g++){c[g]!=i(this).parents("div.dataTables_filter")[0]&&i(c[g]._DT_Input).val(d)}d!=b.sSearch&&M(a,{sSearch:d,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})});c.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(a.keyCode==13){return false}});return d}function M(a,b,c){var d=a.oPreviousSearch,h=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide){f(b)}else{Ha(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<a.aoPreSearchCols.length;b++){Ia(a,h[b].sSearch,b,h[b].bRegex,h[b].bSmart,h[b].bCaseInsensitive)}Ja(a)}a.bFiltered=!0;i(a.oInstance).trigger("filter",a);a._iDisplayStart=0;A(a);z(a);ka(a,0)}function Ja(a){for(var b=j.ext.afnFiltering,c=v(a,"bSearchable"),d=0,h=b.length;d<h;d++){for(var f=0,g=0,e=a.aiDisplay.length;g<e;g++){var i=a.aiDisplay[g-f];b[d](a,Y(a,i,"filter",c),i)||(a.aiDisplay.splice(g-f,1),f++)}}}function Ia(a,b,c,d,h,f){if(""!==b){for(var g=0,b=la(b,d,h,f),d=a.aiDisplay.length-1;0<=d;d--){h=Ka(x(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(h)||(a.aiDisplay.splice(d,1),g++)}}}function Ha(a,b,c,d,h,f){d=la(b,d,h,f);h=a.oPreviousSearch;c||(c=0);0!==j.ext.afnFiltering.length&&(c=1);if(0>=b.length){a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice()}else{if(a.aiDisplay.length==a.aiDisplayMaster.length||h.sSearch.length>b.length||1==c||0!==b.indexOf(h.sSearch)){a.aiDisplay.splice(0,a.aiDisplay.length);ka(a,1);for(b=0;b<a.aiDisplayMaster.length;b++){d.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b])}}else{for(b=c=0;b<a.asDataSearch.length;b++){d.test(a.asDataSearch[b])||(a.aiDisplay.splice(b-c,1),c++)}}}}function ka(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=v(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,h=0,f=d.length;h<f;h++){a.asDataSearch[h]=ma(a,Y(a,d[h],"filter",c))}}}function ma(a,b){var c=b.join("  ");-1!==c.indexOf("&")&&(c=i("<div>").html(c).text());return c.replace(/[\n\r]/g," ")}function la(a,b,c,d){if(c){return a=b?a.split(" "):na(a).split(" "),a="^(?=.*?"+a.join(")(?=.*?")+").*$",RegExp(a,d?"i":"")}a=b?a:na(a);return RegExp(a,d?"i":"")}function Ka(a,b){return"function"===typeof j.ext.ofnSearch[b]?j.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?a.replace(/[\r\n]/g," "):a}function na(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Da(a){var b=l.createElement("div");b.className=a.oClasses.sInfo;a.aanFeatures.i||(a.aoDrawCallback.push({fn:La,sName:"information"}),b.id=a.sTableId+"_info");a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return b}function La(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,c=a._iDisplayStart+1,d=a.fnDisplayEnd(),h=a.fnRecordsTotal(),f=a.fnRecordsDisplay(),g;g=0===f&&f==h?b.sInfoEmpty:0===f?b.sInfoEmpty+" "+b.sInfoFiltered:f==h?b.sInfo:b.sInfo+" "+b.sInfoFiltered;g+=b.sInfoPostFix;g=ia(a,g);null!==b.fnInfoCallback&&(g=b.fnInfoCallback.call(a.oInstance,a,c,d,h,f,g));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++){i(a[b]).html(g)}}}function ia(a,b){var c=a.fnFormatNumber(a._iDisplayStart+1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),h=a.fnRecordsDisplay(),h=a.fnFormatNumber(h),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);a.oScroll.bInfinite&&(c=a.fnFormatNumber(1));return b.replace("_START_",c).replace("_END_",d).replace("_TOTAL_",h).replace("_MAX_",f)}function ba(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised){setTimeout(function(){ba(a)},200)}else{ya(a);wa(a);X(a,a.aoHeader);a.nTFoot&&X(a,a.aoFooter);F(a,!0);a.oFeatures.bAutoWidth&&ca(a);b=0;for(c=a.aoColumns.length;b<c;b++){null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=q(a.aoColumns[b].sWidth))}a.oFeatures.bSort?Q(a):a.oFeatures.bFilter?M(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),A(a),z(a));null!==a.sAjaxSource&&!a.oFeatures.bServerSide?(c=[],ja(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var f=a.sAjaxDataProp!==""?S(a.sAjaxDataProp)(c):c;for(b=0;b<f.length;b++){J(a,f[b])}a.iInitDisplayStart=d;if(a.oFeatures.bSort){Q(a)}else{a.aiDisplay=a.aiDisplayMaster.slice();A(a);z(a)}F(a,false);$(a,c)},a)):a.oFeatures.bServerSide||(F(a,!1),$(a))}}function $(a,b){a._bInitComplete=!0;C(a,"aoInitComplete","init",[a,b])}function oa(a){var b=j.defaults.oLanguage;!a.sEmptyTable&&(a.sZeroRecords&&"No data available in table"===b.sEmptyTable)&&p(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&(a.sZeroRecords&&"Loading..."===b.sLoadingRecords)&&p(a,a,"sZeroRecords","sLoadingRecords")}function za(a){if(a.oScroll.bInfinite){return null}var b='<select size="1" '+('name="'+a.sTableId+'_length"')+">",c,d,h=a.aLengthMenu;if(2==h.length&&"object"===typeof h[0]&&"object"===typeof h[1]){c=0;for(d=h[0].length;c<d;c++){b+='<option value="'+h[0][c]+'">'+h[1][c]+"</option>"}}else{c=0;for(d=h.length;c<d;c++){b+='<option value="'+h[c]+'">'+h[c]+"</option>"}}b+="</select>";h=l.createElement("div");a.aanFeatures.l||(h.id=a.sTableId+"_length");h.className=a.oClasses.sLength;h.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",b)+"</label>";i('select option[value="'+a._iDisplayLength+'"]',h).attr("selected",!0);i("select",h).bind("change.DT",function(){var b=i(this).val(),h=a.aanFeatures.l;c=0;for(d=h.length;c<d;c++){h[c]!=this.parentNode&&i("select",h[c]).val(b)}a._iDisplayLength=parseInt(b,10);A(a);if(a.fnDisplayEnd()==a.fnRecordsDisplay()){a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength;if(a._iDisplayStart<0){a._iDisplayStart=0}}if(a._iDisplayLength==-1){a._iDisplayStart=0}z(a)});i("select",h).attr("aria-controls",a.sTableId);return h}function A(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Ea(a){if(a.oScroll.bInfinite){return null}var b=l.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;j.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){A(a);z(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){j.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){A(a);z(a)})},sName:"pagination"});return b}function pa(a,b){var c=a._iDisplayStart;if("number"===typeof b){a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0)}else{if("first"==b){a._iDisplayStart=0}else{if("previous"==b){a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0)}else{if("next"==b){0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0}else{if("last"==b){if(0<=a._iDisplayLength){var d=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else{a._iDisplayStart=0}}else{E(a,0,"Unknown paging action: "+b)}}}}}i(a.oInstance).trigger("page",a);return c!=a._iDisplayStart}function Ba(a){var b=l.createElement("div");a.aanFeatures.r||(b.id=a.sTableId+"_processing");b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function F(a,b){if(a.oFeatures.bProcessing){for(var c=a.aanFeatures.r,d=0,h=c.length;d<h;d++){c[d].style.visibility=b?"visible":"hidden"}}i(a.oInstance).trigger("processing",[a,b])}function Ca(a){if(""===a.oScroll.sX&&""===a.oScroll.sY){return a.nTable}var b=l.createElement("div"),c=l.createElement("div"),d=l.createElement("div"),h=l.createElement("div"),f=l.createElement("div"),g=l.createElement("div"),e=a.nTable.cloneNode(!1),j=a.nTable.cloneNode(!1),m=a.nTable.getElementsByTagName("thead")[0],o=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],k=a.oClasses;c.appendChild(d);f.appendChild(g);h.appendChild(a.nTable);b.appendChild(c);b.appendChild(h);d.appendChild(e);e.appendChild(m);null!==o&&(b.appendChild(f),g.appendChild(j),j.appendChild(o));b.className=k.sScrollWrapper;c.className=k.sScrollHead;d.className=k.sScrollHeadInner;h.className=k.sScrollBody;f.className=k.sScrollFoot;g.className=k.sScrollFootInner;a.oScroll.bAutoCss&&(c.style.overflow="hidden",c.style.position="relative",f.style.overflow="hidden",h.style.overflow="auto");c.style.border="0";c.style.width="100%";f.style.border="0";d.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";e.removeAttribute("id");e.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==o&&(j.removeAttribute("id"),j.style.marginLeft="0");d=i(a.nTable).children("caption");0<d.length&&(d=d[0],"top"===d._captionSide?e.appendChild(d):"bottom"===d._captionSide&&o&&j.appendChild(d));""!==a.oScroll.sX&&(c.style.width=q(a.oScroll.sX),h.style.width=q(a.oScroll.sX),null!==o&&(f.style.width=q(a.oScroll.sX)),i(h).scroll(function(){c.scrollLeft=this.scrollLeft;if(o!==null){f.scrollLeft=this.scrollLeft}}));""!==a.oScroll.sY&&(h.style.height=q(a.oScroll.sY));a.aoDrawCallback.push({fn:Ma,sName:"scrolling"});a.oScroll.bInfinite&&i(h).scroll(function(){if(!a.bDrawing&&i(this).scrollTop()!==0&&i(this).scrollTop()+i(this).height()>i(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()){pa(a,"next");A(a);z(a)}});a.nScrollHead=c;a.nScrollFoot=f;return b}function Ma(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],d=a.nTable.parentNode,h,f,g,e,j,m,o,k,r=[],n=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,p=null!==a.nTFoot?n.getElementsByTagName("table")[0]:null,l=a.oBrowser.bScrollOversize;i(a.nTable).children("thead, tfoot").remove();g=i(a.nTHead).clone()[0];a.nTable.insertBefore(g,a.nTable.childNodes[0]);null!==a.nTFoot&&(j=i(a.nTFoot).clone()[0],a.nTable.insertBefore(j,a.nTable.childNodes[1]));""===a.oScroll.sX&&(d.style.width="100%",b.parentNode.style.width="100%");var t=P(a,g);h=0;for(f=t.length;h<f;h++){o=G(a,h),t[h].style.width=a.aoColumns[o].sWidth}null!==a.nTFoot&&N(function(a){a.style.width=""},j.getElementsByTagName("tr"));a.oScroll.bCollapse&&""!==a.oScroll.sY&&(d.style.height=d.offsetHeight+a.nTHead.offsetHeight+"px");h=i(a.nTable).outerWidth();if(""===a.oScroll.sX){if(a.nTable.style.width="100%",l&&(i("tbody",d).height()>d.offsetHeight||"scroll"==i(d).css("overflow-y"))){a.nTable.style.width=q(i(a.nTable).outerWidth()-a.oScroll.iBarWidth)}}else{""!==a.oScroll.sXInner?a.nTable.style.width=q(a.oScroll.sXInner):h==i(d).width()&&i(d).height()<i(a.nTable).height()?(a.nTable.style.width=q(h-a.oScroll.iBarWidth),i(a.nTable).outerWidth()>h-a.oScroll.iBarWidth&&(a.nTable.style.width=q(h))):a.nTable.style.width=q(h)}h=i(a.nTable).outerWidth();f=a.nTHead.getElementsByTagName("tr");g=g.getElementsByTagName("tr");N(function(a,b){m=a.style;m.paddingTop="0";m.paddingBottom="0";m.borderTopWidth="0";m.borderBottomWidth="0";m.height=0;k=i(a).width();b.style.width=q(k);r.push(k)},g,f);i(g).height(0);null!==a.nTFoot&&(e=j.getElementsByTagName("tr"),j=a.nTFoot.getElementsByTagName("tr"),N(function(a,b){m=a.style;m.paddingTop="0";m.paddingBottom="0";m.borderTopWidth="0";m.borderBottomWidth="0";m.height=0;k=i(a).width();b.style.width=q(k);r.push(k)},e,j),i(e).height(0));N(function(a){a.innerHTML="";a.style.width=q(r.shift())},g);null!==a.nTFoot&&N(function(a){a.innerHTML="";a.style.width=q(r.shift())},e);if(i(a.nTable).outerWidth()<h){e=d.scrollHeight>d.offsetHeight||"scroll"==i(d).css("overflow-y")?h+a.oScroll.iBarWidth:h;if(l&&(d.scrollHeight>d.offsetHeight||"scroll"==i(d).css("overflow-y"))){a.nTable.style.width=q(e-a.oScroll.iBarWidth)}d.style.width=q(e);b.parentNode.style.width=q(e);null!==a.nTFoot&&(n.parentNode.style.width=q(e));""===a.oScroll.sX?E(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&E(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else{d.style.width=q("100%"),b.parentNode.style.width=q("100%"),null!==a.nTFoot&&(n.parentNode.style.width=q("100%"))}""===a.oScroll.sY&&l&&(d.style.height=q(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(d.style.height=q(a.oScroll.sY),l=""!==a.oScroll.sX&&a.nTable.offsetWidth>d.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<d.offsetHeight&&(d.style.height=q(a.nTable.offsetHeight+l)));l=i(a.nTable).outerWidth();c.style.width=q(l);b.style.width=q(l);c=i(a.nTable).height()>d.clientHeight||"scroll"==i(d).css("overflow-y");b.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(p.style.width=q(l),n.style.width=q(l),n.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px");i(d).scroll();if(a.bSorted||a.bFiltered){d.scrollTop=0}}function N(a,b,c){for(var d=0,h=b.length;d<h;d++){for(var f=0,g=b[d].childNodes.length;f<g;f++){1==b[d].childNodes[f].nodeType&&(c?a(b[d].childNodes[f],c[d].childNodes[f]):a(b[d].childNodes[f]))}}}function Na(a,b){if(!a||null===a||""===a){return 0}b||(b=l.getElementsByTagName("body")[0]);var c,d=l.createElement("div");d.style.width=q(a);b.appendChild(d);c=d.offsetWidth;b.removeChild(d);return c}function ca(a){var b=0,c,d=0,h=a.aoColumns.length,f,g=i("th",a.nTHead),e=a.nTable.getAttribute("width");for(f=0;f<h;f++){a.aoColumns[f].bVisible&&(d++,null!==a.aoColumns[f].sWidth&&(c=Na(a.aoColumns[f].sWidthOrig,a.nTable.parentNode),null!==c&&(a.aoColumns[f].sWidth=q(c)),b++))}if(h==g.length&&0===b&&d==h&&""===a.oScroll.sX&&""===a.oScroll.sY){for(f=0;f<a.aoColumns.length;f++){c=i(g[f]).width(),null!==c&&(a.aoColumns[f].sWidth=q(c))}}else{b=a.nTable.cloneNode(!1);f=a.nTHead.cloneNode(!0);d=l.createElement("tbody");c=l.createElement("tr");b.removeAttribute("id");b.appendChild(f);null!==a.nTFoot&&(b.appendChild(a.nTFoot.cloneNode(!0)),N(function(a){a.style.width=""},b.getElementsByTagName("tr")));b.appendChild(d);d.appendChild(c);d=i("thead th",b);0===d.length&&(d=i("tbody tr:eq(0)>td",b));g=P(a,f);for(f=d=0;f<h;f++){var j=a.aoColumns[f];j.bVisible&&null!==j.sWidthOrig&&""!==j.sWidthOrig?g[f-d].style.width=q(j.sWidthOrig):j.bVisible?g[f-d].style.width="":d++}for(f=0;f<h;f++){a.aoColumns[f].bVisible&&(d=Oa(a,f),null!==d&&(d=d.cloneNode(!0),""!==a.aoColumns[f].sContentPadding&&(d.innerHTML+=a.aoColumns[f].sContentPadding),c.appendChild(d)))}h=a.nTable.parentNode;h.appendChild(b);""!==a.oScroll.sX&&""!==a.oScroll.sXInner?b.style.width=q(a.oScroll.sXInner):""!==a.oScroll.sX?(b.style.width="",i(b).width()<h.offsetWidth&&(b.style.width=q(h.offsetWidth))):""!==a.oScroll.sY?b.style.width=q(h.offsetWidth):e&&(b.style.width=q(e));b.style.visibility="hidden";Pa(a,b);h=i("tbody tr:eq(0)",b).children();0===h.length&&(h=P(a,i("thead",b)[0]));if(""!==a.oScroll.sX){for(f=d=c=0;f<a.aoColumns.length;f++){a.aoColumns[f].bVisible&&(c=null===a.aoColumns[f].sWidthOrig?c+i(h[d]).outerWidth():c+(parseInt(a.aoColumns[f].sWidth.replace("px",""),10)+(i(h[d]).outerWidth()-i(h[d]).width())),d++)}b.style.width=q(c);a.nTable.style.width=q(c)}for(f=d=0;f<a.aoColumns.length;f++){a.aoColumns[f].bVisible&&(c=i(h[d]).width(),null!==c&&0<c&&(a.aoColumns[f].sWidth=q(c)),d++)}h=i(b).css("width");a.nTable.style.width=-1!==h.indexOf("%")?h:q(i(b).outerWidth());b.parentNode.removeChild(b)}e&&(a.nTable.style.width=q(e))}function Pa(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(i(b).width(),b.style.width=q(i(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=q(i(b).outerWidth()))}function Oa(a,b){var c=Qa(a,b);if(0>c){return null}if(null===a.aoData[c].nTr){var d=l.createElement("td");d.innerHTML=x(a,c,b,"");return d}return L(a,c)[b]}function Qa(a,b){for(var c=-1,d=-1,h=0;h<a.aoData.length;h++){var f=x(a,h,b,"display")+"",f=f.replace(/<.*?>/g,"");f.length>c&&(c=f.length,d=h)}return d}function q(a){if(null===a){return"0px"}if("number"==typeof a){return 0>a?"0px":a+"px"}var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Ra(){var a=l.createElement("p"),b=a.style;b.width="100%";b.height="200px";b.padding="0px";var c=l.createElement("div"),b=c.style;b.position="absolute";b.top="0px";b.left="0px";b.visibility="hidden";b.width="200px";b.height="150px";b.padding="0px";b.overflow="hidden";c.appendChild(a);l.body.appendChild(c);b=a.offsetWidth;c.style.overflow="scroll";a=a.offsetWidth;b==a&&(a=c.clientWidth);l.body.removeChild(c);return b-a}function Q(a,b){var c,d,h,f,g,e,o=[],m=[],k=j.ext.oSort,r=a.aoData,l=a.aoColumns,p=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){o=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(c=0;c<o.length;c++){if(d=o[c][0],h=t(a,d),f=a.aoColumns[d].sSortDataType,j.ext.afnSortData[f]){if(g=j.ext.afnSortData[f].call(a.oInstance,a,d,h),g.length===r.length){h=0;for(f=r.length;h<f;h++){I(a,h,d,g[h])}}else{E(a,0,"Returned data sort array (col "+d+") is the wrong length")}}}c=0;for(d=a.aiDisplayMaster.length;c<d;c++){m[a.aiDisplayMaster[c]]=c}var q=o.length,G;c=0;for(d=r.length;c<d;c++){for(h=0;h<q;h++){G=l[o[h][0]].aDataSort;g=0;for(e=G.length;g<e;g++){f=l[G[g]].sType,f=k[(f?f:"string")+"-pre"],r[c]._aSortData[G[g]]=f?f(x(a,c,G[g],"sort")):x(a,c,G[g],"sort")}}}a.aiDisplayMaster.sort(function(a,b){var c,d,h,f,g;for(c=0;c<q;c++){g=l[o[c][0]].aDataSort;d=0;for(h=g.length;d<h;d++){if(f=l[g[d]].sType,f=k[(f?f:"string")+"-"+o[c][1]](r[a]._aSortData[g[d]],r[b]._aSortData[g[d]]),0!==f){return f}}}return k["numeric-asc"](m[a],m[b])})}(b===n||b)&&!a.oFeatures.bDeferRender&&R(a);c=0;for(d=a.aoColumns.length;c<d;c++){f=l[c].sTitle.replace(/<.*?>/g,""),h=l[c].nTh,h.removeAttribute("aria-sort"),h.removeAttribute("aria-label"),l[c].bSortable?0<o.length&&o[0][0]==c?(h.setAttribute("aria-sort","asc"==o[0][1]?"ascending":"descending"),h.setAttribute("aria-label",f+("asc"==(l[c].asSorting[o[0][2]+1]?l[c].asSorting[o[0][2]+1]:l[c].asSorting[0])?p.sSortAscending:p.sSortDescending))):h.setAttribute("aria-label",f+("asc"==l[c].asSorting[0]?p.sSortAscending:p.sSortDescending)):h.setAttribute("aria-label",f)}a.bSorted=!0;i(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?M(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,A(a),z(a))}function ha(a,b,c,d){Sa(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var f=function(){var d,f;if(b.shiftKey){for(var e=!1,i=0;i<a.aaSorting.length;i++){if(a.aaSorting[i][0]==c){e=!0;d=a.aaSorting[i][0];f=a.aaSorting[i][2]+1;a.aoColumns[d].asSorting[f]?(a.aaSorting[i][1]=a.aoColumns[d].asSorting[f],a.aaSorting[i][2]=f):a.aaSorting.splice(i,1);break}}!1===e&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else{1==a.aaSorting.length&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],f=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[f]||(f=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[f],a.aaSorting[0][2]=f):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]))}Q(a)};a.oFeatures.bProcessing?(F(a,!0),setTimeout(function(){f();a.oFeatures.bServerSide||F(a,!1)},0)):f();"function"==typeof d&&d(a)}})}function R(a){var b,c,d,h,f,e=a.aoColumns.length,j=a.oClasses;for(b=0;b<e;b++){a.aoColumns[b].bSortable&&i(a.aoColumns[b].nTh).removeClass(j.sSortAsc+" "+j.sSortDesc+" "+a.aoColumns[b].sSortingClass)}h=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++){if(a.aoColumns[b].bSortable){f=a.aoColumns[b].sSortingClass;d=-1;for(c=0;c<h.length;c++){if(h[c][0]==b){f="asc"==h[c][1]?j.sSortAsc:j.sSortDesc;d=c;break}}i(a.aoColumns[b].nTh).addClass(f);a.bJUI&&(c=i("span."+j.sSortIcon,a.aoColumns[b].nTh),c.removeClass(j.sSortJUIAsc+" "+j.sSortJUIDesc+" "+j.sSortJUI+" "+j.sSortJUIAscAllowed+" "+j.sSortJUIDescAllowed),c.addClass(-1==d?a.aoColumns[b].sSortingClassJUI:"asc"==h[d][1]?j.sSortJUIAsc:j.sSortJUIDesc))}else{i(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass)}}f=j.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){d=L(a);if(a.oFeatures.bDeferRender){i(d).removeClass(f+"1 "+f+"2 "+f+"3")}else{if(d.length>=e){for(b=0;b<e;b++){if(-1!=d[b].className.indexOf(f+"1")){c=0;for(a=d.length/e;c<a;c++){d[e*c+b].className=i.trim(d[e*c+b].className.replace(f+"1",""))}}else{if(-1!=d[b].className.indexOf(f+"2")){c=0;for(a=d.length/e;c<a;c++){d[e*c+b].className=i.trim(d[e*c+b].className.replace(f+"2",""))}}else{if(-1!=d[b].className.indexOf(f+"3")){c=0;for(a=d.length/e;c<a;c++){d[e*c+b].className=i.trim(d[e*c+b].className.replace(" "+f+"3",""))}}}}}}}var j=1,o;for(b=0;b<h.length;b++){o=parseInt(h[b][0],10);c=0;for(a=d.length/e;c<a;c++){d[e*c+o].className+=" "+f+j}3>j&&j++}}}function qa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var d={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:i.extend(!0,[],a.aaSorting),oSearch:i.extend(!0,{},a.oPreviousSearch),aoSearchCols:i.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};b=0;for(c=a.aoColumns.length;b<c;b++){d.abVisCols.push(a.aoColumns[b].bVisible)}C(a,"aoStateSaveParams","stateSaveParams",[a,d]);a.fnStateSave.call(a.oInstance,a,d)}}function Ta(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=C(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===i.inArray(!1,d)){a.oLoadedState=i.extend(!0,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();i.extend(a.oPreviousSearch,c.oSearch);i.extend(!0,a.aoPreSearchCols,c.aoSearchCols);b.saved_aoColumns=[];for(d=0;d<c.abVisCols.length;d++){b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d]}C(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function Ua(a){for(var b=O.location.pathname.split("/"),a=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",b=l.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);){d=d.substring(1,d.length)}if(0===d.indexOf(a)){return decodeURIComponent(d.substring(a.length,d.length))}}return null}function u(a){for(var b=0;b<j.settings.length;b++){if(j.settings[b].nTable===a){return j.settings[b]}}return null}function U(a){for(var b=[],a=a.aoData,c=0,d=a.length;c<d;c++){null!==a[c].nTr&&b.push(a[c].nTr)}return b}function L(a,b){var c=[],d,h,f,e,i,j;h=0;var o=a.aoData.length;b!==n&&(h=b,o=b+1);for(f=h;f<o;f++){if(j=a.aoData[f],null!==j.nTr){h=[];e=0;for(i=j.nTr.childNodes.length;e<i;e++){d=j.nTr.childNodes[e].nodeName.toLowerCase(),("td"==d||"th"==d)&&h.push(j.nTr.childNodes[e])}e=d=0;for(i=a.aoColumns.length;e<i;e++){a.aoColumns[e].bVisible?c.push(h[e-d]):(c.push(j._anHidden[e]),d++)}}}return c}function E(a,b,c){a=null===a?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c;if(0===b){if("alert"==j.ext.sErrMode){alert(a)}else{throw Error(a)}}else{O.console&&console.log&&console.log(a)}}function p(a,b,c,d){d===n&&(d=c);b[c]!==n&&(a[d]=b[c])}function Va(a,b){var c,d;for(d in b){b.hasOwnProperty(d)&&(c=b[d],"object"===typeof e[d]&&null!==c&&!1===i.isArray(c)?i.extend(!0,a[d],c):a[d]=c)}return a}function Sa(a,b,c){i(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return !1})}function B(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function C(a,b,c,d){for(var b=a[b],h=[],e=b.length-1;0<=e;e--){h.push(b[e].fn.apply(a.oInstance,d))}null!==c&&i(a.oInstance).trigger(c,d);return h}function Wa(a){var b=i('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; height:50px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];l.body.appendChild(b);a.oBrowser.bScrollOversize=100===i("#DT_BrowserTest",b)[0].offsetWidth?!0:!1;l.body.removeChild(b)}function Xa(a){return function(){var b=[u(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[a].apply(this,b)}}var V=/\[.*?\]$/,Ya=O.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a){return"string"===b&&(a='"'+a+'"'),a+""}var c,d,h=[],e=i.isArray(a);for(c in a){d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=Ya(d)),h.push((e?"":'"'+c+'":')+d)}return(e?"[":"{")+h+(e?"]":"}")};this.$=function(a,b){var c,d,h=[],e;d=u(this[j.ext.iApiIndex]);var g=d.aoData,o=d.aiDisplay,k=d.aiDisplayMaster;b||(b={});b=i.extend({},{filter:"none",order:"current",page:"all"},b);if("current"==b.page){c=d._iDisplayStart;for(d=d.fnDisplayEnd();c<d;c++){(e=g[o[c]].nTr)&&h.push(e)}}else{if("current"==b.order&&"none"==b.filter){c=0;for(d=k.length;c<d;c++){(e=g[k[c]].nTr)&&h.push(e)}}else{if("current"==b.order&&"applied"==b.filter){c=0;for(d=o.length;c<d;c++){(e=g[o[c]].nTr)&&h.push(e)}}else{if("original"==b.order&&"none"==b.filter){c=0;for(d=g.length;c<d;c++){(e=g[c].nTr)&&h.push(e)}}else{if("original"==b.order&&"applied"==b.filter){c=0;for(d=g.length;c<d;c++){e=g[c].nTr,-1!==i.inArray(c,o)&&e&&h.push(e)}}else{E(d,1,"Unknown selection options")}}}}}h=i(h);c=h.filter(a);h=h.find(a);return i([].concat(i.makeArray(c),i.makeArray(h)))};this._=function(a,b){var c=[],d,e,f=this.$(a,b);d=0;for(e=f.length;d<e;d++){c.push(this.fnGetData(f[d]))}return c};this.fnAddData=function(a,b){if(0===a.length){return[]}var c=[],d,e=u(this[j.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0]){for(var f=0;f<a.length;f++){d=J(e,a[f]);if(-1==d){return c}c.push(d)}}else{d=J(e,a);if(-1==d){return c}c.push(d)}e.aiDisplay=e.aiDisplayMaster.slice();(b===n||b)&&aa(e);return c};this.fnAdjustColumnSizing=function(a){var b=u(this[j.ext.iApiIndex]);k(b);a===n||a?this.fnDraw(!1):(""!==b.oScroll.sX||""!==b.oScroll.sY)&&this.oApi._fnScrollDraw(b)};this.fnClearTable=function(a){var b=u(this[j.ext.iApiIndex]);fa(b);(a===n||a)&&z(b)};this.fnClose=function(a){for(var b=u(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++){if(b.aoOpenRows[c].nParent==a){return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0}}return 1};this.fnDeleteRow=function(a,b,c){var d=u(this[j.ext.iApiIndex]),e,f,a="object"===typeof a?K(d,a):a,g=d.aoData.splice(a,1);e=0;for(f=d.aoData.length;e<f;e++){null!==d.aoData[e].nTr&&(d.aoData[e].nTr._DT_RowIndex=e)}e=i.inArray(a,d.aiDisplay);d.asDataSearch.splice(e,1);ga(d.aiDisplayMaster,a);ga(d.aiDisplay,a);"function"===typeof b&&b.call(this,d,g);d._iDisplayStart>=d.fnRecordsDisplay()&&(d._iDisplayStart-=d._iDisplayLength,0>d._iDisplayStart&&(d._iDisplayStart=0));if(c===n||c){A(d),z(d)}return g};this.fnDestroy=function(a){var b=u(this[j.ext.iApiIndex]),c=b.nTableWrapper.parentNode,d=b.nTBody,e,f,a=a===n?!1:!0;b.bDestroying=!0;C(b,"aoDestroyCallback","destroy",[b]);e=0;for(f=b.aoColumns.length;e<f;e++){!1===b.aoColumns[e].bVisible&&this.fnSetColumnVis(e,!0)}i(b.nTableWrapper).find("*").andSelf().unbind(".DT");i("tbody>tr>td."+b.oClasses.sRowEmpty,b.nTable).parent().remove();b.nTable!=b.nTHead.parentNode&&(i(b.nTable).children("thead").remove(),b.nTable.appendChild(b.nTHead));b.nTFoot&&b.nTable!=b.nTFoot.parentNode&&(i(b.nTable).children("tfoot").remove(),b.nTable.appendChild(b.nTFoot));b.nTable.parentNode.removeChild(b.nTable);i(b.nTableWrapper).remove();b.aaSorting=[];b.aaSortingFixed=[];R(b);i(U(b)).removeClass(b.asStripeClasses.join(" "));i("th, td",b.nTHead).removeClass([b.oClasses.sSortable,b.oClasses.sSortableAsc,b.oClasses.sSortableDesc,b.oClasses.sSortableNone].join(" "));b.bJUI&&(i("th span."+b.oClasses.sSortIcon+", td span."+b.oClasses.sSortIcon,b.nTHead).remove(),i("th, td",b.nTHead).each(function(){var a=i("div."+b.oClasses.sSortJUIWrapper,this),c=a.contents();i(this).append(c);a.remove()}));!a&&b.nTableReinsertBefore?c.insertBefore(b.nTable,b.nTableReinsertBefore):a||c.appendChild(b.nTable);e=0;for(f=b.aoData.length;e<f;e++){null!==b.aoData[e].nTr&&d.appendChild(b.aoData[e].nTr)}!0===b.oFeatures.bAutoWidth&&(b.nTable.style.width=q(b.sDestroyWidth));i(d).children("tr:even").addClass(b.asDestroyStripes[0]);i(d).children("tr:odd").addClass(b.asDestroyStripes[1]);e=0;for(f=j.settings.length;e<f;e++){j.settings[e]==b&&j.settings.splice(e,1)}b=null};this.fnDraw=function(a){var b=u(this[j.ext.iApiIndex]);!1===a?(A(b),z(b)):aa(b)};this.fnFilter=function(a,b,c,d,e,f){var g=u(this[j.ext.iApiIndex]);if(g.oFeatures.bFilter){if(c===n||null===c){c=!1}if(d===n||null===d){d=!0}if(e===n||null===e){e=!0}if(f===n||null===f){f=!0}if(b===n||null===b){if(M(g,{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f},1),e&&g.aanFeatures.f){b=g.aanFeatures.f;c=0;for(d=b.length;c<d;c++){i(b[c]._DT_Input).val(a)}}}else{i.extend(g.aoPreSearchCols[b],{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f}),M(g,g.oPreviousSearch,1)}}};this.fnGetData=function(a,b){var c=u(this[j.ext.iApiIndex]);if(a!==n){var d=a;if("object"===typeof a){var e=a.nodeName.toLowerCase();"tr"===e?d=K(c,a):"td"===e&&(d=K(c,a.parentNode),b=ea(c,d,a))}return b!==n?x(c,d,b,""):c.aoData[d]!==n?c.aoData[d]._aData:null}return Z(c)};this.fnGetNodes=function(a){var b=u(this[j.ext.iApiIndex]);return a!==n?b.aoData[a]!==n?b.aoData[a].nTr:null:U(b)};this.fnGetPosition=function(a){var b=u(this[j.ext.iApiIndex]),c=a.nodeName.toUpperCase();return"TR"==c?K(b,a):"TD"==c||"TH"==c?(c=K(b,a.parentNode),a=ea(b,c,a),[c,t(b,a),a]):null};this.fnIsOpen=function(a){for(var b=u(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++){if(b.aoOpenRows[c].nParent==a){return !0}}return !1};this.fnOpen=function(a,b,c){var d=u(this[j.ext.iApiIndex]),e=U(d);if(-1!==i.inArray(a,e)){this.fnClose(a);var e=l.createElement("tr"),f=l.createElement("td");e.appendChild(f);f.className=c;f.colSpan=w(d);"string"===typeof b?f.innerHTML=b:i(f).html(b);b=i("tr",d.nTBody);-1!=i.inArray(a,b)&&i(e).insertAfter(a);d.aoOpenRows.push({nTr:e,nParent:a});return e}};this.fnPageChange=function(a,b){var c=u(this[j.ext.iApiIndex]);pa(c,a);A(c);(b===n||b)&&z(c)};this.fnSetColumnVis=function(a,b,c){var d=u(this[j.ext.iApiIndex]),e,f,g=d.aoColumns,i=d.aoData,o,m;if(g[a].bVisible!=b){if(b){for(e=f=0;e<a;e++){g[e].bVisible&&f++}m=f>=w(d);if(!m){for(e=a;e<g.length;e++){if(g[e].bVisible){o=e;break}}}e=0;for(f=i.length;e<f;e++){null!==i[e].nTr&&(m?i[e].nTr.appendChild(i[e]._anHidden[a]):i[e].nTr.insertBefore(i[e]._anHidden[a],L(d,e)[o]))}}else{e=0;for(f=i.length;e<f;e++){null!==i[e].nTr&&(o=L(d,e)[a],i[e]._anHidden[a]=o,o.parentNode.removeChild(o))}}g[a].bVisible=b;X(d,d.aoHeader);d.nTFoot&&X(d,d.aoFooter);e=0;for(f=d.aoOpenRows.length;e<f;e++){d.aoOpenRows[e].nTr.colSpan=w(d)}if(c===n||c){k(d),z(d)}qa(d)}};this.fnSettings=function(){return u(this[j.ext.iApiIndex])};this.fnSort=function(a){var b=u(this[j.ext.iApiIndex]);b.aaSorting=a;Q(b)};this.fnSortListener=function(a,b,c){ha(u(this[j.ext.iApiIndex]),a,b,c)};this.fnUpdate=function(a,b,c,d,e){var f=u(this[j.ext.iApiIndex]),b="object"===typeof b?K(f,b):b;if(i.isArray(a)&&c===n){f.aoData[b]._aData=a.slice();for(c=0;c<f.aoColumns.length;c++){this.fnUpdate(x(f,b,c),b,c,!1,!1)}}else{if(i.isPlainObject(a)&&c===n){f.aoData[b]._aData=i.extend(!0,{},a);for(c=0;c<f.aoColumns.length;c++){this.fnUpdate(x(f,b,c),b,c,!1,!1)}}else{I(f,b,c,a);var a=x(f,b,c,"display"),g=f.aoColumns[c];null!==g.fnRender&&(a=T(f,b,c),g.bUseRendered&&I(f,b,c,a));null!==f.aoData[b].nTr&&(L(f,b)[c].innerHTML=a)}}c=i.inArray(b,f.aiDisplay);f.asDataSearch[c]=ma(f,Y(f,b,"filter",v(f,"bSearchable")));(e===n||e)&&k(f);(d===n||d)&&aa(f);return 0};this.fnVersionCheck=j.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:Xa,_fnInitialise:ba,_fnInitComplete:$,_fnLanguageCompat:oa,_fnAddColumn:o,_fnColumnOptions:r,_fnAddData:J,_fnCreateTr:da,_fnGatherData:va,_fnBuildHead:wa,_fnDrawHead:X,_fnDraw:z,_fnReDraw:aa,_fnAjaxUpdate:xa,_fnAjaxParameters:Fa,_fnAjaxUpdateDraw:Ga,_fnServerParams:ja,_fnAddOptionsHtml:ya,_fnFeatureHtmlTable:Ca,_fnScrollDraw:Ma,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:Aa,_fnFilterComplete:M,_fnFilterCustom:Ja,_fnFilterColumn:Ia,_fnFilter:Ha,_fnBuildSearchArray:ka,_fnBuildSearchRow:ma,_fnFilterCreateSearch:la,_fnDataToSearch:Ka,_fnSort:Q,_fnSortAttachListener:ha,_fnSortingClasses:R,_fnFeatureHtmlPaginate:Ea,_fnPageChange:pa,_fnFeatureHtmlInfo:Da,_fnUpdateInfo:La,_fnFeatureHtmlLength:za,_fnFeatureHtmlProcessing:Ba,_fnProcessingDisplay:F,_fnVisibleToColumnIndex:G,_fnColumnIndexToVisible:t,_fnNodeToDataIndex:K,_fnVisbleColumns:w,_fnCalculateEnd:A,_fnConvertToWidth:Na,_fnCalculateColumnWidths:ca,_fnScrollingWidthAdjust:Pa,_fnGetWidestNode:Oa,_fnGetMaxLenString:Qa,_fnStringToCss:q,_fnDetectType:D,_fnSettingsFromNode:u,_fnGetDataMaster:Z,_fnGetTrNodes:U,_fnGetTdNodes:L,_fnEscapeRegex:na,_fnDeleteIndex:ga,_fnReOrderIndex:y,_fnColumnOrdering:H,_fnLog:E,_fnClearTable:fa,_fnSaveState:qa,_fnLoadState:Ta,_fnCreateCookie:function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime()+1000*c);var c=O.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),g;null!==e?(g="function"===typeof i.parseJSON?i.parseJSON(b):eval("("+b+")"),b=e(a,g,f.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+f.toGMTString()+"; path="+c.join("/")+"/";e="";f=9999999999999;if(4096<(null!==Ua(a)?l.cookie.length:b.length+l.cookie.length)+10){for(var a=l.cookie.split(";"),j=0,o=a.length;j<o;j++){if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{g=eval("("+decodeURIComponent(k[1])+")")}catch(r){continue}g.iCreate&&g.iCreate<f&&(e=k[0],f=g.iCreate)}}""!==e&&(l.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/")}l.cookie=b},_fnReadCookie:Ua,_fnDetectHeader:W,_fnGetUniqueThs:P,_fnScrollBarWidth:Ra,_fnApplyToChildren:N,_fnMap:p,_fnGetRowData:Y,_fnGetCellData:x,_fnSetCellData:I,_fnGetObjectDataFn:S,_fnSetObjectDataFn:ta,_fnApplyColumnDefs:ua,_fnBindAction:Sa,_fnExtend:Va,_fnCallbackReg:B,_fnCallbackFire:C,_fnJsonString:Ya,_fnRender:T,_fnNodeToColumnIndex:ea,_fnInfoMacros:ia,_fnBrowserDetect:Wa,_fnGetColumns:v};i.extend(j.ext.oApi,this.oApi);for(var ra in j.ext.oApi){ra&&(this[ra]=Xa(ra))}var sa=this;return this.each(function(){var a=0,b,c,d;c=this.getAttribute("id");var h=!1,f=!1;if("table"!=this.nodeName.toLowerCase()){E(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName)}else{a=0;for(b=j.settings.length;a<b;a++){if(j.settings[a].nTable==this){if(e===n||e.bRetrieve){return j.settings[a].oInstance}if(e.bDestroy){j.settings[a].oInstance.fnDestroy();break}else{E(j.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}if(j.settings[a].sTableId==this.id){j.settings.splice(a,1);break}}if(null===c||""===c){this.id=c="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++}var g=i.extend(!0,{},j.models.oSettings,{nTable:this,oApi:sa.oApi,oInit:e,sDestroyWidth:i(this).width(),sInstance:c,sTableId:c});j.settings.push(g);g.oInstance=1===sa.length?sa:i(this).dataTable();e||(e={});e.oLanguage&&oa(e.oLanguage);e=Va(i.extend(!0,{},j.defaults),e);p(g.oFeatures,e,"bPaginate");p(g.oFeatures,e,"bLengthChange");p(g.oFeatures,e,"bFilter");p(g.oFeatures,e,"bSort");p(g.oFeatures,e,"bInfo");p(g.oFeatures,e,"bProcessing");p(g.oFeatures,e,"bAutoWidth");p(g.oFeatures,e,"bSortClasses");p(g.oFeatures,e,"bServerSide");p(g.oFeatures,e,"bDeferRender");p(g.oScroll,e,"sScrollX","sX");p(g.oScroll,e,"sScrollXInner","sXInner");p(g.oScroll,e,"sScrollY","sY");p(g.oScroll,e,"bScrollCollapse","bCollapse");p(g.oScroll,e,"bScrollInfinite","bInfinite");p(g.oScroll,e,"iScrollLoadGap","iLoadGap");p(g.oScroll,e,"bScrollAutoCss","bAutoCss");p(g,e,"asStripeClasses");p(g,e,"asStripClasses","asStripeClasses");p(g,e,"fnServerData");p(g,e,"fnFormatNumber");p(g,e,"sServerMethod");p(g,e,"aaSorting");p(g,e,"aaSortingFixed");p(g,e,"aLengthMenu");p(g,e,"sPaginationType");p(g,e,"sAjaxSource");p(g,e,"sAjaxDataProp");p(g,e,"iCookieDuration");p(g,e,"sCookiePrefix");p(g,e,"sDom");p(g,e,"bSortCellsTop");p(g,e,"iTabIndex");p(g,e,"oSearch","oPreviousSearch");p(g,e,"aoSearchCols","aoPreSearchCols");p(g,e,"iDisplayLength","_iDisplayLength");p(g,e,"bJQueryUI","bJUI");p(g,e,"fnCookieCallback");p(g,e,"fnStateLoad");p(g,e,"fnStateSave");p(g.oLanguage,e,"fnInfoCallback");B(g,"aoDrawCallback",e.fnDrawCallback,"user");B(g,"aoServerParams",e.fnServerParams,"user");B(g,"aoStateSaveParams",e.fnStateSaveParams,"user");B(g,"aoStateLoadParams",e.fnStateLoadParams,"user");B(g,"aoStateLoaded",e.fnStateLoaded,"user");B(g,"aoRowCallback",e.fnRowCallback,"user");B(g,"aoRowCreatedCallback",e.fnCreatedRow,"user");B(g,"aoHeaderCallback",e.fnHeaderCallback,"user");B(g,"aoFooterCallback",e.fnFooterCallback,"user");B(g,"aoInitComplete",e.fnInitComplete,"user");B(g,"aoPreDrawCallback",e.fnPreDrawCallback,"user");g.oFeatures.bServerSide&&g.oFeatures.bSort&&g.oFeatures.bSortClasses?B(g,"aoDrawCallback",R,"server_side_sort_classes"):g.oFeatures.bDeferRender&&B(g,"aoDrawCallback",R,"defer_sort_classes");e.bJQueryUI?(i.extend(g.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom&&(g.sDom='<"H"lfr>t<"F"ip>')):i.extend(g.oClasses,j.ext.oStdClasses);i(this).addClass(g.oClasses.sTable);if(""!==g.oScroll.sX||""!==g.oScroll.sY){g.oScroll.iBarWidth=Ra()}g.iInitDisplayStart===n&&(g.iInitDisplayStart=e.iDisplayStart,g._iDisplayStart=e.iDisplayStart);e.bStateSave&&(g.oFeatures.bStateSave=!0,Ta(g,e),B(g,"aoDrawCallback",qa,"state_save"));null!==e.iDeferLoading&&(g.bDeferLoading=!0,a=i.isArray(e.iDeferLoading),g._iRecordsDisplay=a?e.iDeferLoading[0]:e.iDeferLoading,g._iRecordsTotal=a?e.iDeferLoading[1]:e.iDeferLoading);null!==e.aaData&&(f=!0);""!==e.oLanguage.sUrl?(g.oLanguage.sUrl=e.oLanguage.sUrl,i.getJSON(g.oLanguage.sUrl,null,function(a){oa(a);i.extend(true,g.oLanguage,e.oLanguage,a);ba(g)}),h=!0):i.extend(!0,g.oLanguage,e.oLanguage);null===e.asStripeClasses&&(g.asStripeClasses=[g.oClasses.sStripeOdd,g.oClasses.sStripeEven]);c=!1;d=i(this).children("tbody").children("tr");a=0;for(b=g.asStripeClasses.length;a<b;a++){if(d.filter(":lt(2)").hasClass(g.asStripeClasses[a])){c=!0;break}}c&&(g.asDestroyStripes=["",""],i(d[0]).hasClass(g.oClasses.sStripeOdd)&&(g.asDestroyStripes[0]+=g.oClasses.sStripeOdd+" "),i(d[0]).hasClass(g.oClasses.sStripeEven)&&(g.asDestroyStripes[0]+=g.oClasses.sStripeEven),i(d[1]).hasClass(g.oClasses.sStripeOdd)&&(g.asDestroyStripes[1]+=g.oClasses.sStripeOdd+" "),i(d[1]).hasClass(g.oClasses.sStripeEven)&&(g.asDestroyStripes[1]+=g.oClasses.sStripeEven),d.removeClass(g.asStripeClasses.join(" ")));c=[];a=this.getElementsByTagName("thead");0!==a.length&&(W(g.aoHeader,a[0]),c=P(g));if(null===e.aoColumns){d=[];a=0;for(b=c.length;a<b;a++){d.push(null)}}else{d=e.aoColumns}a=0;for(b=d.length;a<b;a++){e.saved_aoColumns!==n&&e.saved_aoColumns.length==b&&(null===d[a]&&(d[a]={}),d[a].bVisible=e.saved_aoColumns[a].bVisible),o(g,c?c[a]:null)}ua(g,e.aoColumnDefs,d,function(a,b){r(g,a,b)});a=0;for(b=g.aaSorting.length;a<b;a++){g.aaSorting[a][0]>=g.aoColumns.length&&(g.aaSorting[a][0]=0);var k=g.aoColumns[g.aaSorting[a][0]];g.aaSorting[a][2]===n&&(g.aaSorting[a][2]=0);e.aaSorting===n&&g.saved_aaSorting===n&&(g.aaSorting[a][1]=k.asSorting[0]);c=0;for(d=k.asSorting.length;c<d;c++){if(g.aaSorting[a][1]==k.asSorting[c]){g.aaSorting[a][2]=c;break}}}R(g);Wa(g);a=i(this).children("caption").each(function(){this._captionSide=i(this).css("caption-side")});b=i(this).children("thead");0===b.length&&(b=[l.createElement("thead")],this.appendChild(b[0]));g.nTHead=b[0];b=i(this).children("tbody");0===b.length&&(b=[l.createElement("tbody")],this.appendChild(b[0]));g.nTBody=b[0];g.nTBody.setAttribute("role","alert");g.nTBody.setAttribute("aria-live","polite");g.nTBody.setAttribute("aria-relevant","all");b=i(this).children("tfoot");if(0===b.length&&0<a.length&&(""!==g.oScroll.sX||""!==g.oScroll.sY)){b=[l.createElement("tfoot")],this.appendChild(b[0])}0<b.length&&(g.nTFoot=b[0],W(g.aoFooter,g.nTFoot));if(f){for(a=0;a<e.aaData.length;a++){J(g,e.aaData[a])}}else{va(g)}g.aiDisplay=g.aiDisplayMaster.slice();g.bInitialised=!0;!1===h&&ba(g)}})};j.fnVersionCheck=function(e){for(var i=function(e,i){for(;e.length<i;){e+="0"}return e},r=j.ext.sVersion.split("."),e=e.split("."),k="",l="",n=0,w=e.length;n<w;n++){k+=i(r[n],3),l+=i(e[n],3)}return parseInt(k,10)>=parseInt(l,10)};j.fnIsDataTable=function(e){for(var i=j.settings,r=0;r<i.length;r++){if(i[r].nTable===e||i[r].nScrollHead===e||i[r].nScrollFoot===e){return !0}}return !1};j.fnTables=function(e){var o=[];jQuery.each(j.settings,function(j,k){(!e||!0===e&&i(k.nTable).is(":visible"))&&o.push(k.nTable)});return o};j.version="1.9.3";j.settings=[];j.models={};j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){if(1000>e){return e}for(var i=e+"",e=i.split(""),j="",i=i.length,k=0;k<i;k++){0===k%3&&0!==k&&(j=this.oLanguage.sInfoThousands+j),j=e[i-k-1]+j}return j},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(e,j,n,k){k.jqXHR=i.ajax({url:e,data:j,success:function(e){e.sError&&k.oApi._fnLog(k,0,e.sError);i(k.oInstance).trigger("xhr",[k,e]);n(e)},dataType:"json",cache:!1,type:k.sServerMethod,error:function(e,i){"parsererror"==i&&k.oApi._fnLog(k,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"===typeof i.parseJSON?i.parseJSON(e):eval("("+e+")")}catch(n){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(e,i){this.oApi._fnCreateCookie(e.sCookiePrefix+e.sInstance,this.oApi._fnJsonString(i),e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:i.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};j.ext=i.extend(!0,{},j.models.ext);i.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});i.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});i.extend(j.ext.oPagination,{two_button:{fnInit:function(e,j,n){var k=e.oLanguage.oPaginate,l=function(i){e.oApi._fnPageChange(e,i.data.action)&&n(e)},k=!e.bJUI?'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+k.sPrevious+'</a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+k.sNext+"</a>":'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUIPrev+'"></span></a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUINext+'"></span></a>';i(j).append(k);var t=i("a",j),k=t[0],t=t[1];e.oApi._fnBindAction(k,{action:"previous"},l);e.oApi._fnBindAction(t,{action:"next"},l);e.aanFeatures.p||(j.id=e.sTableId+"_paginate",k.id=e.sTableId+"_previous",t.id=e.sTableId+"_next",k.setAttribute("aria-controls",e.sTableId),t.setAttribute("aria-controls",e.sTableId))},fnUpdate:function(e){if(e.aanFeatures.p){for(var i=e.oClasses,j=e.aanFeatures.p,k=0,n=j.length;k<n;k++){0!==j[k].childNodes.length&&(j[k].childNodes[0].className=0===e._iDisplayStart?i.sPagePrevDisabled:i.sPagePrevEnabled,j[k].childNodes[1].className=e.fnDisplayEnd()==e.fnRecordsDisplay()?i.sPageNextDisabled:i.sPageNextEnabled)}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,j,n){var k=e.oLanguage.oPaginate,l=e.oClasses,t=function(i){e.oApi._fnPageChange(e,i.data.action)&&n(e)};i(j).append('<a  tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageFirst+'">'+k.sFirst+'</a><a  tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPagePrevious+'">'+k.sPrevious+'</a><span></span><a tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageNext+'">'+k.sNext+'</a><a tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageLast+'">'+k.sLast+"</a>");var w=i("a",j),k=w[0],l=w[1],v=w[2],w=w[3];e.oApi._fnBindAction(k,{action:"first"},t);e.oApi._fnBindAction(l,{action:"previous"},t);e.oApi._fnBindAction(v,{action:"next"},t);e.oApi._fnBindAction(w,{action:"last"},t);e.aanFeatures.p||(j.id=e.sTableId+"_paginate",k.id=e.sTableId+"_first",l.id=e.sTableId+"_previous",v.id=e.sTableId+"_next",w.id=e.sTableId+"_last")},fnUpdate:function(e,o){if(e.aanFeatures.p){var l=j.ext.oPagination.iFullNumbersShowPages,k=Math.floor(l/2),n=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),t=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,w="",v,D=e.oClasses,y,H=e.aanFeatures.p,O=function(i){e.oApi._fnBindAction(this,{page:i+v-1},function(i){e.oApi._fnPageChange(e,i.data.page);o(e);i.preventDefault()})};-1===e._iDisplayLength?t=k=v=1:n<l?(v=1,k=n):t<=k?(v=1,k=l):t>=n-k?(v=n-l+1,k=n):(v=t-Math.ceil(l/2)+1,k=v+l-1);for(l=v;l<=k;l++){w+=t!==l?'<a tabindex="'+e.iTabIndex+'" class="'+D.sPageButton+'">'+e.fnFormatNumber(l)+"</a>":'<a tabindex="'+e.iTabIndex+'" class="'+D.sPageButtonActive+'">'+e.fnFormatNumber(l)+"</a>"}l=0;for(k=H.length;l<k;l++){0!==H[l].childNodes.length&&(i("span:eq(0)",H[l]).html(w).children("a").each(O),y=H[l].getElementsByTagName("a"),y=[y[0],y[1],y[y.length-2],y[y.length-1]],i(y).removeClass(D.sPageButton+" "+D.sPageButtonActive+" "+D.sPageButtonStaticDisabled),i([y[0],y[1]]).addClass(1==t?D.sPageButtonStaticDisabled:D.sPageButton),i([y[2],y[3]]).addClass(0===n||t===n||-1===e._iDisplayLength?D.sPageButtonStaticDisabled:D.sPageButton))}}}}});i.extend(j.ext.oSort,{"string-pre":function(e){"string"!=typeof e&&(e=null!==e&&e.toString?e.toString():"");return e.toLowerCase()},"string-asc":function(e,i){return e<i?-1:e>i?1:0},"string-desc":function(e,i){return e<i?1:e>i?-1:0},"html-pre":function(e){return e.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(e,i){return e<i?-1:e>i?1:0},"html-desc":function(e,i){return e<i?1:e>i?-1:0},"date-pre":function(e){e=Date.parse(e);if(isNaN(e)||""===e){e=Date.parse("01/01/1970 00:00:00")}return e},"date-asc":function(e,i){return e-i},"date-desc":function(e,i){return i-e},"numeric-pre":function(e){return"-"==e||""===e?0:1*e},"numeric-asc":function(e,i){return e-i},"numeric-desc":function(e,i){return i-e}});i.extend(j.ext.aTypes,[function(e){if("number"===typeof e){return"numeric"}if("string"!==typeof e){return null}var i,j=!1;i=e.charAt(0);if(-1=="0123456789-".indexOf(i)){return null}for(var k=1;k<e.length;k++){i=e.charAt(k);if(-1=="0123456789.".indexOf(i)){return null}if("."==i){if(j){return null}j=!0}}return"numeric"},function(e){var i=Date.parse(e);return null!==i&&!isNaN(i)||"string"===typeof e&&0===e.length?"date":null},function(e){return"string"===typeof e&&-1!=e.indexOf("<")&&-1!=e.indexOf(">")?"html":null}]);i.fn.DataTable=j;i.fn.dataTable=j;i.fn.dataTableSettings=j.settings;i.fn.dataTableExt=j.ext})(jQuery,window,document,void 0);$.fn.dataTableExt.oApi.fnReloadAjax=function(e,f,c,b){if(typeof f!="undefined"&&f!=null){e.sAjaxSource=f}if(e.oFeatures.bServerSide){this.fnDraw();return}this.oApi._fnProcessingDisplay(e,true);var g=this;var d=e._iDisplayStart;var a=[];this.oApi._fnServerParams(e,a);e.fnServerData.call(e.oInstance,e.sAjaxSource,a,function(k){g.oApi._fnClearTable(e);var h=(e.sAjaxDataProp!=="")?g.oApi._fnGetObjectDataFn(e.sAjaxDataProp)(k):k;for(var j=0;j<h.length;j++){g.oApi._fnAddData(e,h[j])}e.aiDisplay=e.aiDisplayMaster.slice();if(typeof b!="undefined"&&b===true){e._iDisplayStart=d;g.fnDraw(false)}else{g.fnDraw()}g.oApi._fnProcessingDisplay(e,false);if(typeof c=="function"&&c!=null){c(e)}},e)};$.extend(true,$.fn.dataTableExt.oApi,{fnChangeDisplayLength:function(a){$(this).bind("changeDisplayLength.DT",$.proxy(function(b,f){var c=f;var d=a.aanFeatures.l||0;for(i=0,iLen=d.length;i<iLen;i++){if(d[i]!=this.parentNode){$("select",d[i]).val(c)}}a._iDisplayLength=parseInt(c,10);this.oApi._fnCalculateEnd(a);if(a.fnDisplayEnd()==a.fnRecordsDisplay()){a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength;if(a._iDisplayStart<0){a._iDisplayStart=0}}if(a._iDisplayLength==-1){a._iDisplayStart=0}this.oApi._fnDraw(a)},this))}});/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,f){function h(a,d){var j=a.nodeName.toLowerCase();if("area"===j){var k=a.parentNode,l=k.name,m;return !a.href||!l||k.nodeName.toLowerCase()!=="map"?!1:(m=e("img[usemap=#"+l+"]")[0],!!m&&i(m))}return(/input|select|textarea|button|object/.test(j)?!a.disabled:"a"==j?a.href||d:d)&&i(a)}function i(a){return !e(a).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version){return}e.extend(e.ui,{version:"1.8.20",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(a,d){return typeof a=="number"?this.each(function(){var b=this;setTimeout(function(){e(b).focus(),d&&d.call(b)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?e(document):a},zIndex:function(a){if(a!==f){return this.css("zIndex",a)}if(this.length){var b=e(this[0]),j,k;while(b.length&&b[0]!==document){j=b.css("position");if(j==="absolute"||j==="relative"||j==="fixed"){k=parseInt(b.css("zIndex"),10);if(!isNaN(k)&&k!==0){return k}}b=b.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(a,b){function m(n,o,p,q){return e.each(j,function(){o-=parseFloat(e.curCSS(n,"padding"+this,!0))||0,p&&(o-=parseFloat(e.curCSS(n,"border"+this+"Width",!0))||0),q&&(o-=parseFloat(e.curCSS(n,"margin"+this,!0))||0)}),o}var j=b==="Width"?["Left","Right"]:["Top","Bottom"],k=b.toLowerCase(),l={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+b]=function(d){return d===f?l["inner"+b].call(this):this.each(function(){e(this).css(k,m(this,d)+"px")})},e.fn["outer"+b]=function(d,n){return typeof d!="number"?l["outer"+b].call(this,d):this.each(function(){e(this).css(k,m(this,d,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(a,j,k){return !!e.data(a,k[3])},focusable:function(a){return h(a,!isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var c=e.attr(a,"tabindex"),j=isNaN(c);return(j||c>=0)&&h(a,!j)}}),e(function(){var a=document.body,d=a.appendChild(d=document.createElement("div"));d.offsetHeight,e.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=d.offsetHeight===100,e.support.selectstart="onselectstart" in d,a.removeChild(d).style.display="none"}),e.extend(e.ui,{plugin:{add:function(a,j,k){var l=e.ui[a].prototype;for(var m in k){l.plugins[m]=l.plugins[m]||[],l.plugins[m].push([j,k[m]])}},call:function(j,k,l){var m=j.plugins[k];if(!m||!j.element[0].parentNode){return}for(var n=0;n<m.length;n++){j.options[m[n][0]]&&m[n][1].apply(j.element,l)}}},contains:function(c,d){return document.compareDocumentPosition?c.compareDocumentPosition(d)&16:c!==d&&c.contains(d)},hasScroll:function(a,j){if(e(a).css("overflow")==="hidden"){return !1}var k=j&&j==="left"?"scrollLeft":"scrollTop",l=!1;return a[k]>0?!0:(a[k]=1,l=a[k]>0,a[k]=0,l)},isOverAxis:function(d,j,k){return d>j&&d<j+k},isOver:function(a,j,k,l,m,n){return e.ui.isOverAxis(a,k,m)&&e.ui.isOverAxis(j,l,n)}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,f){if(e.cleanData){var h=e.cleanData;e.cleanData=function(a){for(var c=0,j;(j=a[c])!=null;c++){try{e(j).triggerHandler("remove")}catch(k){}}h(a)}}else{var i=e.fn.remove;e.fn.remove=function(a,d){return this.each(function(){return d||(!a||e.filter(a,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(c){}}),i.call(e(this),a,d)})}}e.widget=function(a,j,k){var l=a.split(".")[0],m;a=a.split(".")[1],m=l+"-"+a,k||(k=j,j=e.Widget),e.expr[":"][m]=function(b){return !!e.data(b,a)},e[l]=e[l]||{},e[l][a]=function(c,d){arguments.length&&this._createWidget(c,d)};var n=new j;n.options=e.extend(!0,{},n.options),e[l][a].prototype=e.extend(!0,n,{namespace:l,widgetName:a,widgetEventPrefix:e[l][a].prototype.widgetEventPrefix||a,widgetBaseClass:m},k),e.widget.bridge(a,e[l][a])},e.widget.bridge=function(a,b){e.fn[a]=function(c){var d=typeof c=="string",j=Array.prototype.slice.call(arguments,1),k=this;return c=!d&&j.length?e.extend.apply(null,[!0,c].concat(j)):c,d&&c.charAt(0)==="_"?k:(d?this.each(function(){var l=e.data(this,a),m=l&&e.isFunction(l[c])?l[c].apply(l,j):l;if(m!==l&&m!==f){return k=m,!1}}):this.each(function(){var l=e.data(this,a);l?l.option(c||{})._init():e.data(this,a,new b(c,this))}),k)}},e.Widget=function(c,d){arguments.length&&this._createWidget(c,d)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,j){e.data(j,this.widgetName,this),this.element=e(j),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),a);var k=this;this.element.bind("remove."+this.widgetName,function(){k.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,b){var j=a;if(arguments.length===0){return e.extend({},this.options)}if(typeof a=="string"){if(b===f){return this.options[a]}j={},j[a]=b}return this._setOptions(j),this},_setOptions:function(a){var d=this;return e.each(a,function(c,j){d._setOption(c,j)}),this},_setOption:function(c,d){return this.options[c]=d,c==="disabled"&&this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,j,k){var l,m,n=this.options[a];k=k||{},j=e.Event(j),j.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),j.target=this.element[0],m=j.originalEvent;if(m){for(l in m){l in j||(j[l]=m[l])}}return this.element.trigger(j,k),!(e.isFunction(n)&&n.call(this.element[0],j,k)===!1||j.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,e){var f=!1;d(document).mouseup(function(b){f=!1}),d.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===d.data(b.target,a.widgetName+".preventClickEvent")){return d.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(f){return}this._mouseStarted&&this._mouseUp(a),this._mouseDownEvent=a;var c=this,h=a.which==1,i=typeof this.options.cancel=="string"&&a.target.nodeName?d(a.target).closest(this.options.cancel).length:!1;if(!h||i||!this._mouseCapture(a)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==!1;if(!this._mouseStarted){return a.preventDefault(),!0}}return !0===d.data(a.target,this.widgetName+".preventClickEvent")&&d.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return c._mouseMove(b)},this._mouseUpDelegate=function(b){return c._mouseUp(b)},d(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),a.preventDefault(),f=!0,!0},_mouseMove:function(a){return !d.browser.msie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&d.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(i,j){i.ui=i.ui||{};var k=/left|center|right/,l=/top|center|bottom/,m="center",n={},o=i.fn.position,p=i.fn.offset;i.fn.position=function(a){if(!a||!a.of){return o.apply(this,arguments)}a=i.extend({},a);var c=i(a.of),d=c[0],e=(a.collision||"flip").split(" "),f=a.offset?a.offset.split(" "):[0,0],q,r,s;return d.nodeType===9?(q=c.width(),r=c.height(),s={top:0,left:0}):d.setTimeout?(q=c.width(),r=c.height(),s={top:c.scrollTop(),left:c.scrollLeft()}):d.preventDefault?(a.at="left top",q=r=0,s={top:a.of.pageY,left:a.of.pageX}):(q=c.outerWidth(),r=c.outerHeight(),s=c.offset()),i.each(["my","at"],function(){var b=(a[this]||"").split(" ");b.length===1&&(b=k.test(b[0])?b.concat([m]):l.test(b[0])?[m].concat(b):[m,m]),b[0]=k.test(b[0])?b[0]:m,b[1]=l.test(b[1])?b[1]:m,a[this]=b}),e.length===1&&(e[1]=e[0]),f[0]=parseInt(f[0],10)||0,f.length===1&&(f[1]=f[0]),f[1]=parseInt(f[1],10)||0,a.at[0]==="right"?s.left+=q:a.at[0]===m&&(s.left+=q/2),a.at[1]==="bottom"?s.top+=r:a.at[1]===m&&(s.top+=r/2),s.left+=f[0],s.top+=f[1],this.each(function(){var b=i(this),t=b.outerWidth(),u=b.outerHeight(),v=parseInt(i.curCSS(this,"marginLeft",!0))||0,w=parseInt(i.curCSS(this,"marginTop",!0))||0,x=t+v+(parseInt(i.curCSS(this,"marginRight",!0))||0),y=u+w+(parseInt(i.curCSS(this,"marginBottom",!0))||0),z=i.extend({},s),A;a.my[0]==="right"?z.left-=t:a.my[0]===m&&(z.left-=t/2),a.my[1]==="bottom"?z.top-=u:a.my[1]===m&&(z.top-=u/2),n.fractions||(z.left=Math.round(z.left),z.top=Math.round(z.top)),A={left:z.left-v,top:z.top-w},i.each(["left","top"],function(h,B){i.ui.position[e[h]]&&i.ui.position[e[h]][B](z,{targetWidth:q,targetHeight:r,elemWidth:t,elemHeight:u,collisionPosition:A,collisionWidth:x,collisionHeight:y,offset:f,my:a.my,at:a.at})}),i.fn.bgiframe&&b.bgiframe(),b.offset(i.extend(z,{using:a.using}))})},i.ui.position={fit:{left:function(a,f){var h=i(window),q=f.collisionPosition.left+f.collisionWidth-h.width()-h.scrollLeft();a.left=q>0?a.left-q:Math.max(a.left-f.collisionPosition.left,a.left)},top:function(a,f){var h=i(window),q=f.collisionPosition.top+f.collisionHeight-h.height()-h.scrollTop();a.top=q>0?a.top-q:Math.max(a.top-f.collisionPosition.top,a.top)}},flip:{left:function(a,e){if(e.at[0]===m){return}var q=i(window),r=e.collisionPosition.left+e.collisionWidth-q.width()-q.scrollLeft(),s=e.my[0]==="left"?-e.elemWidth:e.my[0]==="right"?e.elemWidth:0,t=e.at[0]==="left"?e.targetWidth:-e.targetWidth,u=-2*e.offset[0];a.left+=e.collisionPosition.left<0?s+t+u:r>0?s+t+u:0},top:function(a,e){if(e.at[1]===m){return}var q=i(window),r=e.collisionPosition.top+e.collisionHeight-q.height()-q.scrollTop(),s=e.my[1]==="top"?-e.elemHeight:e.my[1]==="bottom"?e.elemHeight:0,t=e.at[1]==="top"?e.targetHeight:-e.targetHeight,u=-2*e.offset[1];a.top+=e.collisionPosition.top<0?s+t+u:r>0?s+t+u:0}}},i.offset.setOffset||(i.offset.setOffset=function(a,q){/static/.test(i.curCSS(a,"position"))&&(a.style.position="relative");var r=i(a),s=r.offset(),t=parseInt(i.curCSS(a,"top",!0),10)||0,u=parseInt(i.curCSS(a,"left",!0),10)||0,v={top:q.top-s.top+t,left:q.left-s.left+u};"using" in q?q.using.call(a,v):r.css(v)},i.fn.offset=function(a){var d=this[0];return !d||!d.ownerDocument?null:a?this.each(function(){i.offset.setOffset(this,a)}):p.call(this)}),function(){var a=document.getElementsByTagName("body")[0],f=document.createElement("div"),q,r,s,t,u;q=document.createElement(a?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&i.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(var v in s){q.style[v]=s[v]}q.appendChild(f),r=a||document.documentElement,r.insertBefore(q,r.firstChild),f.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",t=i(f).offset(function(c,d){return d}).offset(),q.innerHTML="",r.removeChild(q),u=t.top+t.left+(a?2000:0),n.fractions=u>21&&u<22}()})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var e=this.options;return this.helper||e.disabled||c(a.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(a),this.handle?(e.iframeFix&&c(e.iframeFix===!0?"iframe":e.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(c(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var e=this.options;return this.helper=this._createHelper(a),this._cacheHelperProportions(),c.ui.ddmanager&&(c.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),this._trigger("start",a)===!1?(this._clear(),!1):(this._cacheHelperProportions(),c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(a,!0),c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,e){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute");if(!e){var f=this._uiHash();if(this._trigger("drag",a,f)===!1){return this._mouseUp({}),!1}this.position=f.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return c.ui.ddmanager&&c.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var h=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(h=c.ui.ddmanager.drop(this,a)),this.dropped&&(h=this.dropped,this.dropped=!1);var i=this.element[0],j=!1;while(i&&(i=i.parentNode)){i==document&&(j=!0)}if(!j&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!h||this.options.revert=="valid"&&h||this.options.revert===!0||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,h)){var k=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){k._trigger("stop",a)!==!1&&k._clear()})}else{this._trigger("stop",a)!==!1&&this._clear()}return !1},_mouseUp:function(a){return this.options.iframeFix===!0&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,a),c.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){var e=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;return c(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(e=!0)}),e},_createHelper:function(a){var e=this.options,f=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[a])):e.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return f.parents("body").length||f.appendTo(e.appendTo=="parent"?this.element[0].parentNode:e.appendTo),f[0]!=this.element[0]&&!/(fixed|absolute)/.test(f.css("position"))&&f.css("position","absolute"),f},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),c.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[a.containment=="document"?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a.containment=="document"?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(a.containment=="document"?0:c(window).scrollLeft())+c(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a.containment=="document"?0:c(window).scrollTop())+(c(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var h=c(a.containment),i=h[0];if(!i){return}var j=h.offset(),k=c(i).css("overflow")!="hidden";this.containment=[(parseInt(c(i).css("borderLeftWidth"),10)||0)+(parseInt(c(i).css("paddingLeft"),10)||0),(parseInt(c(i).css("borderTopWidth"),10)||0)+(parseInt(c(i).css("paddingTop"),10)||0),(k?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(c(i).css("borderLeftWidth"),10)||0)-(parseInt(c(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(k?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(c(i).css("borderTopWidth"),10)||0)-(parseInt(c(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=h}else{a.containment.constructor==Array&&(this.containment=a.containment)}},_convertPositionTo:function(a,h){h||(h=this.position);var i=a=="absolute"?1:-1,j=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(k[0].tagName);return{top:h.top+this.offset.relative.top*i+this.offset.parent.top*i-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:k.scrollTop())*i),left:h.left+this.offset.relative.left*i+this.offset.parent.left*i-(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())*i)}},_generatePosition:function(a){var l=this.options,m=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(m[0].tagName),o=a.pageX,p=a.pageY;if(this.originalPosition){var q;if(this.containment){if(this.relative_container){var r=this.relative_container.offset();q=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]}else{q=this.containment}a.pageX-this.offset.click.left<q[0]&&(o=q[0]+this.offset.click.left),a.pageY-this.offset.click.top<q[1]&&(p=q[1]+this.offset.click.top),a.pageX-this.offset.click.left>q[2]&&(o=q[2]+this.offset.click.left),a.pageY-this.offset.click.top>q[3]&&(p=q[3]+this.offset.click.top)}if(l.grid){var s=l.grid[1]?this.originalPageY+Math.round((p-this.originalPageY)/l.grid[1])*l.grid[1]:this.originalPageY;p=q?s-this.offset.click.top<q[1]||s-this.offset.click.top>q[3]?s-this.offset.click.top<q[1]?s+l.grid[1]:s-l.grid[1]:s:s;var t=l.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/l.grid[0])*l.grid[0]:this.originalPageX;o=q?t-this.offset.click.left<q[0]||t-this.offset.click.left>q[2]?t-this.offset.click.left<q[0]?t+l.grid[0]:t-l.grid[0]:t:t}}return{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():n?0:m.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&c.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():n?0:m.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(a,e,f){return f=f||this._uiHash(),c.ui.plugin.call(this,a,[e,f]),a=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),c.Widget.prototype._trigger.call(this,a,e,f)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),c.extend(c.ui.draggable,{version:"1.8.20"}),c.ui.plugin.add("draggable","connectToSortable",{start:function(a,h){var i=c(this).data("draggable"),j=i.options,k=c.extend({},h,{item:i.element});i.sortables=[],c(j.connectToSortable).each(function(){var b=c.data(this,"sortable");b&&!b.options.disabled&&(i.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,k))})},stop:function(a,f){var h=c(this).data("draggable"),i=c.extend({},f,{item:h.element});c.each(h.sortables,function(){this.instance.isOver?(this.instance.isOver=0,h.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,h.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,i))})},drag:function(a,h){var i=c(this).data("draggable"),j=this,k=function(l){var m=this.offset.click.top,n=this.offset.click.left,o=this.positionAbs.top,p=this.positionAbs.left,q=l.height,r=l.width,s=l.top,t=l.left;return c.ui.isOver(o+m,p+n,s,t,q,r)};c.each(i.sortables,function(b){this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(j).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return h.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",a),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",a),i.dropped=!1)})}}),c.ui.plugin.add("draggable","cursor",{start:function(a,f){var h=c("body"),i=c(this).data("draggable").options;h.css("cursor")&&(i._cursor=h.css("cursor")),h.css("cursor",i.cursor)},stop:function(a,e){var f=c(this).data("draggable").options;f._cursor&&c("body").css("cursor",f._cursor)}}),c.ui.plugin.add("draggable","opacity",{start:function(a,f){var h=c(f.helper),i=c(this).data("draggable").options;h.css("opacity")&&(i._opacity=h.css("opacity")),h.css("opacity",i.opacity)},stop:function(a,e){var f=c(this).data("draggable").options;f._opacity&&c(e.helper).css("opacity",f._opacity)}}),c.ui.plugin.add("draggable","scroll",{start:function(a,e){var f=c(this).data("draggable");f.scrollParent[0]!=document&&f.scrollParent[0].tagName!="HTML"&&(f.overflowOffset=f.scrollParent.offset())},drag:function(a,h){var i=c(this).data("draggable"),j=i.options,k=!1;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"){if(!j.axis||j.axis!="x"){i.overflowOffset.top+i.scrollParent[0].offsetHeight-a.pageY<j.scrollSensitivity?i.scrollParent[0].scrollTop=k=i.scrollParent[0].scrollTop+j.scrollSpeed:a.pageY-i.overflowOffset.top<j.scrollSensitivity&&(i.scrollParent[0].scrollTop=k=i.scrollParent[0].scrollTop-j.scrollSpeed)}if(!j.axis||j.axis!="y"){i.overflowOffset.left+i.scrollParent[0].offsetWidth-a.pageX<j.scrollSensitivity?i.scrollParent[0].scrollLeft=k=i.scrollParent[0].scrollLeft+j.scrollSpeed:a.pageX-i.overflowOffset.left<j.scrollSensitivity&&(i.scrollParent[0].scrollLeft=k=i.scrollParent[0].scrollLeft-j.scrollSpeed)}}else{if(!j.axis||j.axis!="x"){a.pageY-c(document).scrollTop()<j.scrollSensitivity?k=c(document).scrollTop(c(document).scrollTop()-j.scrollSpeed):c(window).height()-(a.pageY-c(document).scrollTop())<j.scrollSensitivity&&(k=c(document).scrollTop(c(document).scrollTop()+j.scrollSpeed))}if(!j.axis||j.axis!="y"){a.pageX-c(document).scrollLeft()<j.scrollSensitivity?k=c(document).scrollLeft(c(document).scrollLeft()-j.scrollSpeed):c(window).width()-(a.pageX-c(document).scrollLeft())<j.scrollSensitivity&&(k=c(document).scrollLeft(c(document).scrollLeft()+j.scrollSpeed))}}k!==!1&&c.ui.ddmanager&&!j.dropBehaviour&&c.ui.ddmanager.prepareOffsets(i,a)}}),c.ui.plugin.add("draggable","snap",{start:function(a,f){var h=c(this).data("draggable"),i=h.options;h.snapElements=[],c(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var e=c(this),j=e.offset();this!=h.element[0]&&h.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:j.top,left:j.left})})},drag:function(a,u){var v=c(this).data("draggable"),w=v.options,x=w.snapTolerance,y=u.offset.left,z=y+v.helperProportions.width,A=u.offset.top,B=A+v.helperProportions.height;for(var C=v.snapElements.length-1;C>=0;C--){var D=v.snapElements[C].left,E=D+v.snapElements[C].width,F=v.snapElements[C].top,G=F+v.snapElements[C].height;if(!(D-x<y&&y<E+x&&F-x<A&&A<G+x||D-x<y&&y<E+x&&F-x<B&&B<G+x||D-x<z&&z<E+x&&F-x<A&&A<G+x||D-x<z&&z<E+x&&F-x<B&&B<G+x)){v.snapElements[C].snapping&&v.options.snap.release&&v.options.snap.release.call(v.element,a,c.extend(v._uiHash(),{snapItem:v.snapElements[C].item})),v.snapElements[C].snapping=!1;continue}if(w.snapMode!="inner"){var H=Math.abs(F-B)<=x,I=Math.abs(G-A)<=x,J=Math.abs(D-z)<=x,K=Math.abs(E-y)<=x;H&&(u.position.top=v._convertPositionTo("relative",{top:F-v.helperProportions.height,left:0}).top-v.margins.top),I&&(u.position.top=v._convertPositionTo("relative",{top:G,left:0}).top-v.margins.top),J&&(u.position.left=v._convertPositionTo("relative",{top:0,left:D-v.helperProportions.width}).left-v.margins.left),K&&(u.position.left=v._convertPositionTo("relative",{top:0,left:E}).left-v.margins.left)}var L=H||I||J||K;if(w.snapMode!="outer"){var H=Math.abs(F-A)<=x,I=Math.abs(G-B)<=x,J=Math.abs(D-y)<=x,K=Math.abs(E-z)<=x;H&&(u.position.top=v._convertPositionTo("relative",{top:F,left:0}).top-v.margins.top),I&&(u.position.top=v._convertPositionTo("relative",{top:G-v.helperProportions.height,left:0}).top-v.margins.top),J&&(u.position.left=v._convertPositionTo("relative",{top:0,left:D}).left-v.margins.left),K&&(u.position.left=v._convertPositionTo("relative",{top:0,left:E-v.helperProportions.width}).left-v.margins.left)}!v.snapElements[C].snapping&&(H||I||J||K||L)&&v.options.snap.snap&&v.options.snap.snap.call(v.element,a,c.extend(v._uiHash(),{snapItem:v.snapElements[C].item})),v.snapElements[C].snapping=H||I||J||K||L}}}),c.ui.plugin.add("draggable","stack",{start:function(a,h){var i=c(this).data("draggable").options,j=c.makeArray(c(i.stack)).sort(function(e,f){return(parseInt(c(e).css("zIndex"),10)||0)-(parseInt(c(f).css("zIndex"),10)||0)});if(!j.length){return}var k=parseInt(j[0].style.zIndex)||0;c(j).each(function(b){this.style.zIndex=k+b}),this[0].style.zIndex=k+j.length}}),c.ui.plugin.add("draggable","zIndex",{start:function(a,f){var h=c(f.helper),i=c(this).data("draggable").options;h.css("zIndex")&&(i._zIndex=h.css("zIndex")),h.css("zIndex",i.zIndex)},stop:function(a,e){var f=c(this).data("draggable").options;f._zIndex&&c(e.helper).css("zIndex",f._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,e=a.accept;this.isover=0,this.isout=1,this.accept=c.isFunction(e)?e:function(b){return b.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},c.ui.ddmanager.droppables[a.scope]=c.ui.ddmanager.droppables[a.scope]||[],c.ui.ddmanager.droppables[a.scope].push(this),a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var a=c.ui.ddmanager.droppables[this.options.scope];for(var e=0;e<a.length;e++){a[e]==this&&a.splice(e,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(a,e){a=="accept"&&(this.accept=c.isFunction(e)?e:function(b){return b.is(e)}),c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var e=c.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",a,this.ui(e))},_deactivate:function(a){var e=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",a,this.ui(e))},_over:function(a){var e=c.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(e)))},_out:function(a){var e=c.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0]){return}this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(e)))},_drop:function(a,f){var h=f||c.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return !1}var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=c.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==h.options.scope&&e.accept.call(e.element[0],h.currentItem||h.element)&&c.ui.intersect(h,c.extend(e,{offset:e.element.offset()}),e.options.tolerance)){return i=!0,!1}}),i?!1:this.accept.call(this.element[0],h.currentItem||h.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(h)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),c.extend(c.ui.droppable,{version:"1.8.20"}),c.ui.intersect=function(a,p,q){if(!p.offset){return !1}var r=(a.positionAbs||a.position.absolute).left,s=r+a.helperProportions.width,t=(a.positionAbs||a.position.absolute).top,u=t+a.helperProportions.height,v=p.offset.left,w=v+p.proportions.width,x=p.offset.top,y=x+p.proportions.height;switch(q){case"fit":return v<=r&&s<=w&&x<=t&&u<=y;case"intersect":return v<r+a.helperProportions.width/2&&s-a.helperProportions.width/2<w&&x<t+a.helperProportions.height/2&&u-a.helperProportions.height/2<y;case"pointer":var z=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,A=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,B=c.ui.isOver(A,z,x,v,p.proportions.height,p.proportions.width);return B;case"touch":return(t>=x&&t<=y||u>=x&&u<=y||t<x&&u>y)&&(r>=v&&r<=w||s>=v&&s<=w||r<v&&s>w);default:return !1}},c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,j){var k=c.ui.ddmanager.droppables[a.options.scope]||[],l=j?j.type:null,m=(a.currentItem||a.element).find(":data(droppable)").andSelf();g:for(var n=0;n<k.length;n++){if(k[n].options.disabled||a&&!k[n].accept.call(k[n].element[0],a.currentItem||a.element)){continue}for(var o=0;o<m.length;o++){if(m[o]==k[n].element[0]){k[n].proportions.height=0;continue g}}k[n].visible=k[n].element.css("display")!="none";if(!k[n].visible){continue}l=="mousedown"&&k[n]._activate.call(k[n],j),k[n].offset=k[n].element.offset(),k[n].proportions={width:k[n].element[0].offsetWidth,height:k[n].element[0].offsetHeight}}},drop:function(a,e){var f=!1;return c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&c.ui.intersect(a,this,this.options.tolerance)&&(f=this._drop.call(this,e)||f),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,e))}),f},dragStart:function(a,e){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,e)})},drag:function(a,e){a.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(a,e),c.each(c.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var b=c.ui.intersect(a,this,this.options.tolerance),h=!b&&this.isover==1?"isout":b&&this.isover==0?"isover":null;if(!h){return}var i;if(this.options.greedy){var j=this.element.parents(":data(droppable):eq(0)");j.length&&(i=c.data(j[0],"droppable"),i.greedyChild=h=="isover"?1:0)}i&&h=="isover"&&(i.isover=0,i.isout=1,i._out.call(i,e)),this[h]=1,this[h=="isout"?"isover":"isout"]=0,this[h=="isover"?"_over":"_out"].call(this,e),i&&h=="isout"&&(i.isout=0,i.isover=1,i._over.call(i,e))})},dragStop:function(a,e){a.element.parents(":not(body,html)").unbind("scroll.droppable"),a.options.refreshPositions||c.ui.ddmanager.prepareOffsets(a,e)}}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,f){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var a=this,j=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!j.aspectRatio,aspectRatio:j.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:j.helper||j.ghost||j.animate?j.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=j.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var k=this.handles.split(",");this.handles={};for(var l=0;l<k.length;l++){var m=e.trim(k[l]),n="ui-resizable-"+m,o=e('<div class="ui-resizable-handle '+n+'"></div>');o.css({zIndex:j.zIndex}),"se"==m&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[m]=".ui-resizable-"+m,this.element.append(o)}}this._renderAxis=function(p){p=p||this.element;for(var q in this.handles){this.handles[q].constructor==String&&(this.handles[q]=e(this.handles[q],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[q],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(q)?r.outerHeight():r.outerWidth();var t=["padding",/ne|nw|n/.test(q)?"Top":/se|sw|s/.test(q)?"Bottom":/^e$/.test(q)?"Right":"Left"].join("");p.css(t,s),this._proportionallyResize()}if(!e(this.handles[q]).length){continue}}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!a.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=b&&b[1]?b[1]:"se"}}),j.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(j.disabled){return}e(this).removeClass("ui-resizable-autohide"),a._handles.show()},function(){if(j.disabled){return}a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(c){e(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var d=this.element;d.after(this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(a){var j=!1;for(var k in this.handles){e(this.handles[k])[0]==a.target&&(j=!0)}return !this.options.disabled&&j},_mouseStart:function(a){var c=this.options,j=this.element.position(),k=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(k.is(".ui-draggable")||/absolute/.test(k.css("position")))&&k.css({position:"absolute",top:j.top,left:j.left}),this._renderProxy();var l=h(this.helper.css("left")),m=h(this.helper.css("top"));c.containment&&(l+=e(c.containment).scrollLeft()||0,m+=e(c.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:l,top:m},this.size=this._helper?{width:k.outerWidth(),height:k.outerHeight()}:{width:k.width(),height:k.height()},this.originalSize=this._helper?{width:k.outerWidth(),height:k.outerHeight()}:{width:k.width(),height:k.height()},this.originalPosition={left:l,top:m},this.sizeDiff={width:k.outerWidth()-k.width(),height:k.outerHeight()-k.height()},this.originalMousePosition={left:a.pageX,top:a.pageY},this.aspectRatio=typeof c.aspectRatio=="number"?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;var n=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",n=="auto"?this.axis+"-resize":n),k.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(a){var o=this.helper,p=this.options,q={},r=this,s=this.originalMousePosition,t=this.axis,u=a.pageX-s.left||0,v=a.pageY-s.top||0,w=this._change[t];if(!w){return !1}var x=w.apply(this,[a,u,v]),y=e.browser.msie&&e.browser.version<7,z=this.sizeDiff;this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey){x=this._updateRatio(x,a)}return x=this._respectSize(x,a),this._propagate("resize",a),o.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(x),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(a){this.resizing=!1;var l=this.options,m=this;if(this._helper){var n=this._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),p=o&&e.ui.hasScroll(n[0],"left")?0:m.sizeDiff.height,q=o?0:m.sizeDiff.width,r={width:m.helper.width()-q,height:m.helper.height()-p},s=parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left)||null,t=parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top)||null;l.animate||this.element.css(e.extend(r,{top:t,left:s})),m.helper.height(m.size.height),m.helper.width(m.size.width),this._helper&&!l.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",a),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(d){var j=this.options,k,l,m,n,o;o={minWidth:i(j.minWidth)?j.minWidth:0,maxWidth:i(j.maxWidth)?j.maxWidth:Infinity,minHeight:i(j.minHeight)?j.minHeight:0,maxHeight:i(j.maxHeight)?j.maxHeight:Infinity};if(this._aspectRatio||d){k=o.minHeight*this.aspectRatio,m=o.minWidth/this.aspectRatio,l=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,k>o.minWidth&&(o.minWidth=k),m>o.minHeight&&(o.minHeight=m),l<o.maxWidth&&(o.maxWidth=l),n<o.maxHeight&&(o.maxHeight=n)}this._vBoundaries=o},_updateCache:function(c){var d=this.options;this.offset=this.helper.offset(),i(c.left)&&(this.position.left=c.left),i(c.top)&&(this.position.top=c.top),i(c.height)&&(this.size.height=c.height),i(c.width)&&(this.size.width=c.width)},_updateRatio:function(d,j){var k=this.options,l=this.position,m=this.size,n=this.axis;return i(d.height)?d.width=d.height*this.aspectRatio:i(d.width)&&(d.height=d.width/this.aspectRatio),n=="sw"&&(d.left=l.left+(m.width-d.width),d.top=null),n=="nw"&&(d.top=l.top+(m.height-d.height),d.left=l.left+(m.width-d.width)),d},_respectSize:function(d,q){var r=this.helper,s=this._vBoundaries,t=this._aspectRatio||q.shiftKey,u=this.axis,v=i(d.width)&&s.maxWidth&&s.maxWidth<d.width,w=i(d.height)&&s.maxHeight&&s.maxHeight<d.height,x=i(d.width)&&s.minWidth&&s.minWidth>d.width,y=i(d.height)&&s.minHeight&&s.minHeight>d.height;x&&(d.width=s.minWidth),y&&(d.height=s.minHeight),v&&(d.width=s.maxWidth),w&&(d.height=s.maxHeight);var z=this.originalPosition.left+this.originalSize.width,A=this.position.top+this.size.height,B=/sw|nw|w/.test(u),C=/nw|ne|n/.test(u);x&&B&&(d.left=z-s.minWidth),v&&B&&(d.left=z-s.maxWidth),y&&C&&(d.top=A-s.minHeight),w&&C&&(d.top=A-s.maxHeight);var D=!d.width&&!d.height;return D&&!d.left&&d.top?d.top=null:D&&!d.top&&d.left&&(d.left=null),d},_proportionallyResize:function(){var a=this.options;if(!this._proportionallyResizeElements.length){return}var j=this.helper||this.element;for(var k=0;k<this._proportionallyResizeElements.length;k++){var l=this._proportionallyResizeElements[k];if(!this.borderDif){var m=[l.css("borderTopWidth"),l.css("borderRightWidth"),l.css("borderBottomWidth"),l.css("borderLeftWidth")],n=[l.css("paddingTop"),l.css("paddingRight"),l.css("paddingBottom"),l.css("paddingLeft")];this.borderDif=e.map(m,function(o,p){var q=parseInt(o,10)||0,r=parseInt(n[p],10)||0;return q+r})}if(!e.browser.msie||!e(j).is(":hidden")&&!e(j).parents(":hidden").length){l.css({height:j.height()-this.borderDif[0]-this.borderDif[2]||0,width:j.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var a=this.element,j=this.options;this.elementOffset=a.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var k=e.browser.msie&&e.browser.version<7,l=k?1:0,m=k?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+m,height:this.element.outerHeight()+m,position:"absolute",left:this.elementOffset.left-l+"px",top:this.elementOffset.top-l+"px",zIndex:++j.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(d,j,k){return{width:this.originalSize.width+j}},w:function(j,k,l){var m=this.options,n=this.originalSize,o=this.originalPosition;return{left:o.left+k,width:n.width-k}},n:function(j,k,l){var m=this.options,n=this.originalSize,o=this.originalPosition;return{top:o.top+l,height:n.height-l}},s:function(d,j,k){return{height:this.originalSize.height+k}},se:function(a,j,k){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,j,k]))},sw:function(a,j,k){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,j,k]))},ne:function(a,j,k){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,j,k]))},nw:function(a,j,k){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,j,k]))}},_propagate:function(a,d){e.ui.plugin.call(this,a,[d,this.ui()]),a!="resize"&&this._trigger(a,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.20"}),e.ui.plugin.add("resizable","alsoResize",{start:function(a,j){var k=e(this).data("resizable"),l=k.options,m=function(c){e(c).each(function(){var d=e(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10)})})};typeof l.alsoResize=="object"&&!l.alsoResize.parentNode?l.alsoResize.length?(l.alsoResize=l.alsoResize[0],m(l.alsoResize)):e.each(l.alsoResize,function(b){m(b)}):m(l.alsoResize)},resize:function(a,j){var k=e(this).data("resizable"),l=k.options,m=k.originalSize,n=k.originalPosition,o={height:k.size.height-m.height||0,width:k.size.width-m.width||0,top:k.position.top-n.top||0,left:k.position.left-n.left||0},p=function(c,q){e(c).each(function(){var d=e(this),r=e(this).data("resizable-alsoresize"),s={},t=q&&q.length?q:d.parents(j.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(t,function(u,v){var w=(r[v]||0)+(o[v]||0);w&&w>=0&&(s[v]=w||null)}),d.css(s)})};typeof l.alsoResize=="object"&&!l.alsoResize.nodeType?e.each(l.alsoResize,function(c,d){p(c,d)}):p(l.alsoResize)},stop:function(a,d){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(a,m){var n=e(this).data("resizable"),o=n.options,p=n._proportionallyResizeElements,q=p.length&&/textarea/i.test(p[0].nodeName),r=q&&e.ui.hasScroll(p[0],"left")?0:n.sizeDiff.height,s=q?0:n.sizeDiff.width,t={width:n.size.width-s,height:n.size.height-r},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,v=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(t,v&&u?{top:v,left:u}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var b={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};p&&p.length&&e(p[0]).css({width:b.width,height:b.height}),n._updateCache(b),n._propagate("resize",a)}})}}),e.ui.plugin.add("resizable","containment",{start:function(a,c){var q=e(this).data("resizable"),r=q.options,s=q.element,t=r.containment,u=t instanceof e?t.get(0):/parent/.test(t)?s.parent().get(0):t;if(!u){return}q.containerElement=e(u);if(/document/.test(t)||t==document){q.containerOffset={left:0,top:0},q.containerPosition={left:0,top:0},q.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{var v=e(u),w=[];e(["Top","Right","Left","Bottom"]).each(function(d,j){w[d]=h(v.css("padding"+j))}),q.containerOffset=v.offset(),q.containerPosition=v.position(),q.containerSize={height:v.innerHeight()-w[3],width:v.innerWidth()-w[1]};var x=q.containerOffset,y=q.containerSize.height,z=q.containerSize.width,A=e.ui.hasScroll(u,"left")?u.scrollWidth:z,B=e.ui.hasScroll(u)?u.scrollHeight:y;q.parentData={element:u,left:x.left,top:x.top,width:A,height:B}}},resize:function(a,q){var r=e(this).data("resizable"),s=r.options,t=r.containerSize,u=r.containerOffset,v=r.size,w=r.position,x=r._aspectRatio||a.shiftKey,y={top:0,left:0},z=r.containerElement;z[0]!=document&&/static/.test(z.css("position"))&&(y=u),w.left<(r._helper?u.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-u.left:r.position.left-y.left),x&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=s.helper?u.left:0),w.top<(r._helper?u.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-u.top:r.position.top),x&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?u.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var A=Math.abs((r._helper?r.offset.left-y.left:r.offset.left-y.left)+r.sizeDiff.width),B=Math.abs((r._helper?r.offset.top-y.top:r.offset.top-u.top)+r.sizeDiff.height),C=r.containerElement.get(0)==r.element.parent().get(0),D=/relative|absolute/.test(r.containerElement.css("position"));C&&D&&(A-=r.parentData.left),A+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-A,x&&(r.size.height=r.size.width/r.aspectRatio)),B+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-B,x&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(a,n){var o=e(this).data("resizable"),p=o.options,q=o.position,r=o.containerOffset,s=o.containerPosition,t=o.containerElement,u=e(o.helper),v=u.offset(),w=u.outerWidth()-o.sizeDiff.width,x=u.outerHeight()-o.sizeDiff.height;o._helper&&!p.animate&&/relative/.test(t.css("position"))&&e(this).css({left:v.left-s.left-r.left,width:w,height:x}),o._helper&&!p.animate&&/static/.test(t.css("position"))&&e(this).css({left:v.left-s.left-r.left,width:w,height:x})}}),e.ui.plugin.add("resizable","ghost",{start:function(a,j){var k=e(this).data("resizable"),l=k.options,m=k.size;k.ghost=k.originalElement.clone(),k.ghost.css({opacity:0.25,display:"block",position:"relative",height:m.height,width:m.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof l.ghost=="string"?l.ghost:""),k.ghost.appendTo(k.helper)},resize:function(a,j){var k=e(this).data("resizable"),l=k.options;k.ghost&&k.ghost.css({position:"relative",height:k.size.height,width:k.size.width})},stop:function(a,j){var k=e(this).data("resizable"),l=k.options;k.ghost&&k.helper&&k.helper.get(0).removeChild(k.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(a,m){var n=e(this).data("resizable"),o=n.options,p=n.size,q=n.originalSize,r=n.originalPosition,s=n.axis,t=o._aspectRatio||a.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var u=Math.round((p.width-q.width)/(o.grid[0]||1))*(o.grid[0]||1),v=Math.round((p.height-q.height)/(o.grid[1]||1))*(o.grid[1]||1);/^(se|s|e)$/.test(s)?(n.size.width=q.width+u,n.size.height=q.height+v):/^(ne)$/.test(s)?(n.size.width=q.width+u,n.size.height=q.height+v,n.position.top=r.top-v):/^(sw)$/.test(s)?(n.size.width=q.width+u,n.size.height=q.height+v,n.position.left=r.left-u):(n.size.width=q.width+u,n.size.height=q.height+v,n.position.top=r.top-v,n.position.left=r.left-u)}});var h=function(b){return parseInt(b,10)||0},i=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.selectable",c.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var a=this;this.element.addClass("ui-selectable"),this.dragged=!1;var e;this.refresh=function(){e=c(a.options.filter,a.element[0]),e.addClass("ui-selectee"),e.each(function(){var f=c(this),h=f.offset();c.data(this,"selectable-item",{element:this,$element:f,left:h.left,top:h.top,right:h.left+f.outerWidth(),bottom:h.top+f.outerHeight(),startselected:!1,selected:f.hasClass("ui-selected"),selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=c("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(a){var e=this;this.opos=[a.pageX,a.pageY];if(this.options.disabled){return}var f=this.options;this.selectees=c(f.filter,this.element[0]),this._trigger("start",a),c(f.appendTo).append(this.helper),this.helper.css({left:a.clientX,top:a.clientY,width:0,height:0}),f.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=c.data(this,"selectable-item");b.startselected=!0,!a.metaKey&&!a.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,e._trigger("unselecting",a,{unselecting:b.element}))}),c(a.target).parents().andSelf().each(function(){var b=c.data(this,"selectable-item");if(b){var h=!a.metaKey&&!a.ctrlKey||!b.$element.hasClass("ui-selected");return b.$element.removeClass(h?"ui-unselecting":"ui-selected").addClass(h?"ui-selecting":"ui-unselecting"),b.unselecting=!h,b.selecting=h,b.selected=h,h?e._trigger("selecting",a,{selecting:b.element}):e._trigger("unselecting",a,{unselecting:b.element}),!1}})},_mouseDrag:function(a){var j=this;this.dragged=!0;if(this.options.disabled){return}var k=this.options,l=this.opos[0],m=this.opos[1],n=a.pageX,o=a.pageY;if(l>n){var p=n;n=l,l=p}if(m>o){var p=o;o=m,m=p}return this.helper.css({left:l,top:m,width:n-l,height:o-m}),this.selectees.each(function(){var b=c.data(this,"selectable-item");if(!b||b.element==j.element[0]){return}var e=!1;k.tolerance=="touch"?e=!(b.left>n||b.right<l||b.top>o||b.bottom<m):k.tolerance=="fit"&&(e=b.left>l&&b.right<n&&b.top>m&&b.bottom<o),e?(b.selected&&(b.$element.removeClass("ui-selected"),b.selected=!1),b.unselecting&&(b.$element.removeClass("ui-unselecting"),b.unselecting=!1),b.selecting||(b.$element.addClass("ui-selecting"),b.selecting=!0,j._trigger("selecting",a,{selecting:b.element}))):(b.selecting&&((a.metaKey||a.ctrlKey)&&b.startselected?(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.$element.addClass("ui-selected"),b.selected=!0):(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.startselected&&(b.$element.addClass("ui-unselecting"),b.unselecting=!0),j._trigger("unselecting",a,{unselecting:b.element}))),b.selected&&!a.metaKey&&!a.ctrlKey&&!b.startselected&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,j._trigger("unselecting",a,{unselecting:b.element})))}),!1},_mouseStop:function(a){var e=this;this.dragged=!1;var f=this.options;return c(".ui-unselecting",this.element[0]).each(function(){var b=c.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,e._trigger("unselected",a,{unselected:b.element})}),c(".ui-selecting",this.element[0]).each(function(){var b=c.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,e._trigger("selected",a,{selected:b.element})}),this._trigger("stop",a),this.helper.remove(),!1}}),c.extend(c.ui.selectable,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.sortable",c.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){c.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_setOption:function(a,e){a==="disabled"?(this.options[a]=e,this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,i){var j=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(a);var k=null,l=this,m=c(a.target).parents().each(function(){if(c.data(this,j.widgetName+"-item")==l){return k=c(this),!1}});c.data(a.target,j.widgetName+"-item")==l&&(k=c(a.target));if(!k){return !1}if(this.options.handle&&!i){var n=!1;c(this.options.handle,k).find("*").andSelf().each(function(){this==a.target&&(n=!0)});if(!n){return !1}}return this.currentItem=k,this._removeCurrentsFromItems(),!0},_mouseStart:function(a,h,i){var j=this.options,k=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(a),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),c.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),j.containment&&this._setContainment(),j.cursor&&(c("body").css("cursor")&&(this._storedCursor=c("body").css("cursor")),c("body").css("cursor",j.cursor)),j.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",j.opacity)),j.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",j.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",a,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!i){for(var l=this.containers.length-1;l>=0;l--){this.containers[l]._trigger("activate",a,k._uiHash(this))}}return c.ui.ddmanager&&(c.ui.ddmanager.current=this),c.ui.ddmanager&&!j.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(a),!0},_mouseDrag:function(a){this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var i=this.options,j=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop+i.scrollSpeed:a.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft+i.scrollSpeed:a.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(a.pageY-c(document).scrollTop()<i.scrollSensitivity?j=c(document).scrollTop(c(document).scrollTop()-i.scrollSpeed):c(window).height()-(a.pageY-c(document).scrollTop())<i.scrollSensitivity&&(j=c(document).scrollTop(c(document).scrollTop()+i.scrollSpeed)),a.pageX-c(document).scrollLeft()<i.scrollSensitivity?j=c(document).scrollLeft(c(document).scrollLeft()-i.scrollSpeed):c(window).width()-(a.pageX-c(document).scrollLeft())<i.scrollSensitivity&&(j=c(document).scrollLeft(c(document).scrollLeft()+i.scrollSpeed))),j!==!1&&c.ui.ddmanager&&!i.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var k=this.items.length-1;k>=0;k--){var l=this.items[k],m=l.item[0],n=this._intersectsWithPointer(l);if(!n){continue}if(m!=this.currentItem[0]&&this.placeholder[n==1?"next":"prev"]()[0]!=m&&!c.ui.contains(this.placeholder[0],m)&&(this.options.type=="semi-dynamic"?!c.ui.contains(this.element[0],m):!0)){this.direction=n==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(l)){this._rearrange(a,l)}else{break}this._trigger("change",a,this._uiHash());break}}return this._contactContainers(a),c.ui.ddmanager&&c.ui.ddmanager.drag(this,a),this._trigger("sort",a,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(a,f){if(!a){return}c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,a);if(this.options.revert){var h=this,i=h.placeholder.offset();h.reverting=!0,c(this.helper).animate({left:i.left-this.offset.parent.left-h.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-h.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){h._clear(a)})}else{this._clear(a,f)}return !1},cancel:function(){var a=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,a._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,a._uiHash(this)),this.containers[e].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(a){var e=this._getItemsAsjQuery(a&&a.connected),f=[];return a=a||{},c(e).each(function(){var b=(c(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&f.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))}),!f.length&&a.key&&f.push(a.key+"="),f.join("&")},toArray:function(a){var e=this._getItemsAsjQuery(a&&a.connected),f=[];return a=a||{},e.each(function(){f.push(c(a.item||this).attr(a.attribute||"id")||"")}),f},_intersectsWith:function(m){var n=this.positionAbs.left,o=n+this.helperProportions.width,p=this.positionAbs.top,q=p+this.helperProportions.height,r=m.left,s=r+m.width,t=m.top,u=t+m.height,v=this.offset.click.top,w=this.offset.click.left,x=p+v>t&&p+v<u&&n+w>r&&n+w<s;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>m[this.floating?"width":"height"]?x:r<n+this.helperProportions.width/2&&o-this.helperProportions.width/2<s&&t<p+this.helperProportions.height/2&&q-this.helperProportions.height/2<u},_intersectsWithPointer:function(a){var h=this.options.axis==="x"||c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),i=this.options.axis==="y"||c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),j=h&&i,k=this._getDragVerticalDirection(),l=this._getDragHorizontalDirection();return j?this.floating?l&&l=="right"||k=="down"?2:1:k&&(k=="down"?2:1):!1},_intersectsWithSides:function(a){var h=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),i=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),j=this._getDragVerticalDirection(),k=this._getDragHorizontalDirection();return this.floating&&k?k=="right"&&i||k=="left"&&!i:j&&(j=="down"&&h||j=="up"&&!h)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(a){var k=this,l=[],m=[],n=this._connectWith();if(n&&a){for(var o=n.length-1;o>=0;o--){var p=c(n[o]);for(var q=p.length-1;q>=0;q--){var r=c.data(p[q],this.widgetName);r&&r!=this&&!r.options.disabled&&m.push([c.isFunction(r.options.items)?r.options.items.call(r.element):c(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r])}}}m.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=m.length-1;o>=0;o--){m[o][0].each(function(){l.push(this)})}return c(l)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var f=0;f<this.items.length;f++){for(var h=0;h<e.length;h++){e[h]==this.items[f].item[0]&&this.items.splice(f,1)}}},_refreshItems:function(a){this.items=[],this.containers=[this];var o=this.items,p=this,q=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):c(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready){for(var s=r.length-1;s>=0;s--){var t=c(r[s]);for(var u=t.length-1;u>=0;u--){var v=c.data(t[u],this.widgetName);v&&v!=this&&!v.options.disabled&&(q.push([c.isFunction(v.options.items)?v.options.items.call(v.element[0],a,{item:this.currentItem}):c(v.options.items,v.element),v]),this.containers.push(v))}}}for(var s=q.length-1;s>=0;s--){var w=q[s][1],x=q[s][0];for(var u=0,y=x.length;u<y;u++){var z=c(x[u]);z.data(this.widgetName+"-item",w),o.push({item:z,instance:w,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var h=this.items.length-1;h>=0;h--){var i=this.items[h];if(i.instance!=this.currentContainer&&this.currentContainer&&i.item[0]!=this.currentItem[0]){continue}var j=this.options.toleranceElement?c(this.options.toleranceElement,i.item):i.item;a||(i.width=j.outerWidth(),i.height=j.outerHeight());var k=j.offset();i.left=k.left,i.top=k.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var h=this.containers.length-1;h>=0;h--){var k=this.containers[h].element.offset();this.containers[h].containerCache.left=k.left,this.containers[h].containerCache.top=k.top,this.containers[h].containerCache.width=this.containers[h].element.outerWidth(),this.containers[h].containerCache.height=this.containers[h].element.outerHeight()}}return this},_createPlaceholder:function(a){var f=a||this,h=f.options;if(!h.placeholder||h.placeholder.constructor==String){var i=h.placeholder;h.placeholder={element:function(){var e=c(document.createElement(f.currentItem[0].nodeName)).addClass(i||f.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(e.style.visibility="hidden"),e},update:function(e,j){if(i&&!h.forcePlaceholderSize){return}j.height()||j.height(f.currentItem.innerHeight()-parseInt(f.currentItem.css("paddingTop")||0,10)-parseInt(f.currentItem.css("paddingBottom")||0,10)),j.width()||j.width(f.currentItem.innerWidth()-parseInt(f.currentItem.css("paddingLeft")||0,10)-parseInt(f.currentItem.css("paddingRight")||0,10))}}}f.placeholder=c(h.placeholder.element.call(f.element,f.currentItem)),f.currentItem.after(f.placeholder),h.placeholder.update(f,f.placeholder)},_contactContainers:function(a){var k=null,l=null;for(var m=this.containers.length-1;m>=0;m--){if(c.ui.contains(this.currentItem[0],this.containers[m].element[0])){continue}if(this._intersectsWith(this.containers[m].containerCache)){if(k&&c.ui.contains(this.containers[m].element[0],k.element[0])){continue}k=this.containers[m],l=m}else{this.containers[m].containerCache.over&&(this.containers[m]._trigger("out",a,this._uiHash(this)),this.containers[m].containerCache.over=0)}}if(!k){return}if(this.containers.length===1){this.containers[l]._trigger("over",a,this._uiHash(this)),this.containers[l].containerCache.over=1}else{if(this.currentContainer!=this.containers[l]){var n=10000,o=null,p=this.positionAbs[this.containers[l].floating?"left":"top"];for(var q=this.items.length-1;q>=0;q--){if(!c.ui.contains(this.containers[l].element[0],this.items[q].item[0])){continue}var r=this.items[q][this.containers[l].floating?"left":"top"];Math.abs(r-p)<n&&(n=Math.abs(r-p),o=this.items[q])}if(!o&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[l],o?this._rearrange(a,o,null,!0):this._rearrange(a,null,this.containers[l].element,!0),this._trigger("change",a,this._uiHash()),this.containers[l]._trigger("change",a,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[l]._trigger("over",a,this._uiHash(this)),this.containers[l].containerCache.over=1}}},_createHelper:function(a){var e=this.options,f=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[a,this.currentItem])):e.helper=="clone"?this.currentItem.clone():this.currentItem;return f.parents("body").length||c(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(f[0]),f[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(f[0].style.width==""||e.forceHelperSize)&&f.width(this.currentItem.width()),(f[0].style.height==""||e.forceHelperSize)&&f.height(this.currentItem.height()),f},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),c.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.browser.msie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;a.containment=="parent"&&(a.containment=this.helper[0].parentNode);if(a.containment=="document"||a.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(c(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(a.containment)){var f=c(a.containment)[0],h=c(a.containment).offset(),i=c(f).css("overflow")!="hidden";this.containment=[h.left+(parseInt(c(f).css("borderLeftWidth"),10)||0)+(parseInt(c(f).css("paddingLeft"),10)||0)-this.margins.left,h.top+(parseInt(c(f).css("borderTopWidth"),10)||0)+(parseInt(c(f).css("paddingTop"),10)||0)-this.margins.top,h.left+(i?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(c(f).css("borderLeftWidth"),10)||0)-(parseInt(c(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,h.top+(i?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(c(f).css("borderTopWidth"),10)||0)-(parseInt(c(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,h){h||(h=this.position);var i=a=="absolute"?1:-1,j=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(k[0].tagName);return{top:h.top+this.offset.relative.top*i+this.offset.parent.top*i-(c.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:k.scrollTop())*i),left:h.left+this.offset.relative.left*i+this.offset.parent.left*i-(c.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())*i)}},_generatePosition:function(a){var j=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(k[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var m=a.pageX,n=a.pageY;if(this.originalPosition){this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top));if(j.grid){var o=this.originalPageY+Math.round((n-this.originalPageY)/j.grid[1])*j.grid[1];n=this.containment?o-this.offset.click.top<this.containment[1]||o-this.offset.click.top>this.containment[3]?o-this.offset.click.top<this.containment[1]?o+j.grid[1]:o-j.grid[1]:o:o;var p=this.originalPageX+Math.round((m-this.originalPageX)/j.grid[0])*j.grid[0];m=this.containment?p-this.offset.click.left<this.containment[0]||p-this.offset.click.left>this.containment[2]?p-this.offset.click.left<this.containment[0]?p+j.grid[0]:p-j.grid[0]:p:p}}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:k.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:k.scrollLeft())}},_rearrange:function(h,i,j,k){j?j[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var l=this,m=this.counter;window.setTimeout(function(){m==l.counter&&l.refreshPositions(!k)},0)},_clear:function(a,h){this.reverting=!1;var i=[],j=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var k in this._storedCSS){if(this._storedCSS[k]=="auto"||this._storedCSS[k]=="static"){this._storedCSS[k]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!h&&i.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!h&&i.push(function(b){this._trigger("update",b,this._uiHash())});if(!c.ui.contains(this.element[0],this.currentItem[0])){h||i.push(function(b){this._trigger("remove",b,this._uiHash())});for(var k=this.containers.length-1;k>=0;k--){c.ui.contains(this.containers[k].element[0],this.currentItem[0])&&!h&&(i.push(function(b){return function(e){b._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[k])),i.push(function(b){return function(e){b._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[k])))}}for(var k=this.containers.length-1;k>=0;k--){h||i.push(function(b){return function(e){b._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[k])),this.containers[k].containerCache.over&&(i.push(function(b){return function(e){b._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[k])),this.containers[k].containerCache.over=0)}this._storedCursor&&c("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!h){this._trigger("beforeStop",a,this._uiHash());for(var k=0;k<i.length;k++){i[k].call(this,a)}this._trigger("stop",a,this._uiHash())}return !1}h||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!h){for(var k=0;k<i.length;k++){i[k].call(this,a)}this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){c.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(a){var e=a||this;return{helper:e.helper,placeholder:e.placeholder||c([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:a?a.element:null}}}),c.extend(c.ui.sortable,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var a=this,f=a.options;a.running=0,a.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),a.headers=a.element.find(f.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(f.disabled){return}c(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(f.disabled){return}c(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(f.disabled){return}c(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(f.disabled){return}c(this).removeClass("ui-state-focus")}),a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(f.navigation){var h=a.element.find("a").filter(f.navigationFilter).eq(0);if(h.length){var i=h.closest(".ui-accordion-header");i.length?a.active=i:a.active=h.closest(".ui-accordion-content").prev()}}a.active=a._findActive(a.active||f.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),a.active.next().addClass("ui-accordion-content-active"),a._createIcons(),a.resize(),a.element.attr("role","tablist"),a.headers.attr("role","tab").bind("keydown.accordion",function(b){return a._keydown(b)}).next().attr("role","tabpanel"),a.headers.not(a.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),a.active.length?a.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0),c.browser.safari||a.headers.find("a").attr("tabIndex",-1),f.event&&a.headers.bind(f.event.split(" ").join(".accordion ")+".accordion",function(b){a._clickHandler.call(a,b,this),b.preventDefault()})},_createIcons:function(){var a=this.options;a.icons&&(c("<span></span>").addClass("ui-icon "+a.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var a=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var e=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(a.autoHeight||a.fillHeight)&&e.css("height",""),c.Widget.prototype.destroy.call(this)},_setOption:function(a,e){c.Widget.prototype._setOption.apply(this,arguments),a=="active"&&this.activate(e),a=="icons"&&(this._destroyIcons(),e&&this._createIcons()),a=="disabled"&&this.headers.add(this.headers.next())[e?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(a){if(this.options.disabled||a.altKey||a.ctrlKey){return}var h=c.ui.keyCode,i=this.headers.length,j=this.headers.index(a.target),k=!1;switch(a.keyCode){case h.RIGHT:case h.DOWN:k=this.headers[(j+1)%i];break;case h.LEFT:case h.UP:k=this.headers[(j-1+i)%i];break;case h.SPACE:case h.ENTER:this._clickHandler({target:a.target},a.target),a.preventDefault()}return k?(c(a.target).attr("tabIndex",-1),c(k).attr("tabIndex",0),k.focus(),!1):!0},resize:function(){var a=this.options,e;if(a.fillSpace){if(c.browser.msie){var f=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}e=this.element.parent().height(),c.browser.msie&&this.element.parent().css("overflow",f),this.headers.each(function(){e-=c(this).outerHeight(!0)}),this.headers.next().each(function(){c(this).height(Math.max(0,e-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")}else{a.autoHeight&&(e=0,this.headers.next().each(function(){e=Math.max(e,c(this).height("").height())}).height(e))}return this},activate:function(e){this.options.active=e;var f=this._findActive(e)[0];return this._clickHandler({target:f},f),this},_findActive:function(a){return a?typeof a=="number"?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):a===!1?c([]):this.headers.filter(":eq(0)")},_clickHandler:function(a,l){var m=this.options;if(m.disabled){return}if(!a.target){if(!m.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(m.icons.headerSelected).addClass(m.icons.header),this.active.next().addClass("ui-accordion-content-active");var n=this.active.next(),o={options:m,newHeader:c([]),oldHeader:m.active,newContent:c([]),oldContent:n},p=this.active=c([]);this._toggle(p,n,o);return}var q=c(a.currentTarget||l),r=q[0]===this.active[0];m.active=m.collapsible&&r?!1:this.headers.index(q);if(this.running||!m.collapsible&&r){return}var s=this.active,p=q.next(),n=this.active.next(),o={options:m,newHeader:r&&m.collapsible?c([]):q,oldHeader:this.active,newContent:r&&m.collapsible?c([]):p,oldContent:n},t=this.headers.index(this.active[0])>this.headers.index(q[0]);this.active=r?c([]):q,this._toggle(p,n,o,r,t),s.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(m.icons.headerSelected).addClass(m.icons.header),r||(q.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(m.icons.header).addClass(m.icons.headerSelected),q.next().addClass("ui-accordion-content-active"));return},_toggle:function(a,n,o,p,q){var r=this,s=r.options;r.toShow=a,r.toHide=n,r.data=o;var t=function(){if(!r){return}return r._completed.apply(r,arguments)};r._trigger("changestart",null,r.data),r.running=n.size()===0?a.size():n.size();if(s.animated){var u={};s.collapsible&&p?u={toShow:c([]),toHide:n,complete:t,down:q,autoHeight:s.autoHeight||s.fillSpace}:u={toShow:a,toHide:n,complete:t,down:q,autoHeight:s.autoHeight||s.fillSpace},s.proxied||(s.proxied=s.animated),s.proxiedDuration||(s.proxiedDuration=s.duration),s.animated=c.isFunction(s.proxied)?s.proxied(u):s.proxied,s.duration=c.isFunction(s.proxiedDuration)?s.proxiedDuration(u):s.proxiedDuration;var v=c.ui.accordion.animations,w=s.duration,x=s.animated;x&&!v[x]&&!c.easing[x]&&(x="slide"),v[x]||(v[x]=function(b){this.slide(b,{easing:x,duration:w||700})}),v[x](u)}else{s.collapsible&&p?a.toggle():(n.hide(),a.show()),t(!0)}n.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),a.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(this.running){return}this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),c.extend(c.ui.accordion,{version:"1.8.20",animations:{slide:function(a,k){a=c.extend({easing:"swing",duration:300},a,k);if(!a.toHide.size()){a.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},a);return}if(!a.toShow.size()){a.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},a);return}var l=a.toShow.css("overflow"),m=0,n={},o={},p=["height","paddingTop","paddingBottom"],q,r=a.toShow;q=r[0].style.width,r.width(r.parent().width()-parseFloat(r.css("paddingLeft"))-parseFloat(r.css("paddingRight"))-(parseFloat(r.css("borderLeftWidth"))||0)-(parseFloat(r.css("borderRightWidth"))||0)),c.each(p,function(b,f){o[f]="hide";var h=(""+c.css(a.toShow[0],f)).match(/^([\d+-.]+)(.*)$/);n[f]={value:h[1],unit:h[2]||"px"}}),a.toShow.css({height:0,overflow:"hidden"}).show(),a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(o,{step:function(b,e){e.prop=="height"&&(m=e.end-e.start===0?0:(e.now-e.start)/(e.end-e.start)),a.toShow[0].style[e.prop]=m*n[e.prop].value+n[e.prop].unit},duration:a.duration,easing:a.easing,complete:function(){a.autoHeight||a.toShow.css("height",""),a.toShow.css({width:q,overflow:l}),a.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(l,m){var n,o,p,q,r="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",t="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",u=function(){var a=l(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},v=function(a){var f=a.name,h=a.form,i=l([]);return f&&(h?i=l(h).find("[name='"+f+"']"):i=l("[name='"+f+"']",a.ownerDocument).filter(function(){return !this.form})),i};l.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",u),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,d=this.type==="checkbox"||this.type==="radio",e="ui-state-hover"+(d?"":" ui-state-active"),f="ui-state-focus";c.label===null&&(c.label=this.buttonElement.html()),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter.button",function(){if(c.disabled){return}l(this).addClass("ui-state-hover"),this===n&&l(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(c.disabled){return}l(this).removeClass(e)}).bind("click.button",function(b){c.disabled&&(b.preventDefault(),b.stopImmediatePropagation())}),this.element.bind("focus.button",function(){a.buttonElement.addClass(f)}).bind("blur.button",function(){a.buttonElement.removeClass(f)}),d&&(this.element.bind("change.button",function(){if(q){return}a.refresh()}),this.buttonElement.bind("mousedown.button",function(b){if(c.disabled){return}q=!1,o=b.pageX,p=b.pageY}).bind("mouseup.button",function(b){if(c.disabled){return}if(o!==b.pageX||p!==b.pageY){q=!0}})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(c.disabled||q){return !1}l(this).toggleClass("ui-state-active"),a.buttonElement.attr("aria-pressed",a.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(c.disabled||q){return !1}l(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var b=a.element[0];v(b).not(b).map(function(){return l(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(c.disabled){return !1}l(this).addClass("ui-state-active"),n=this,l(document).one("mouseup",function(){n=null})}).bind("mouseup.button",function(){if(c.disabled){return !1}l(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(c.disabled){return !1}(h.keyCode==l.ui.keyCode.SPACE||h.keyCode==l.ui.keyCode.ENTER)&&l(this).addClass("ui-state-active")}).bind("keyup.button",function(){l(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===l.ui.keyCode.SPACE&&l(this).click()})),this._setOption("disabled",c.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var d=this.element.parents().filter(":last"),e="label[for='"+this.element.attr("id")+"']";this.buttonElement=d.find(e),this.buttonElement.length||(d=d.length?d.siblings():this.element.siblings(),this.buttonElement=d.filter(e),this.buttonElement.length||(this.buttonElement=d.find(e))),this.element.addClass("ui-helper-hidden-accessible");var f=this.element.is(":checked");f&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",f)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+s+" "+t).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),l.Widget.prototype.destroy.call(this)},_setOption:function(a,d){l.Widget.prototype._setOption.apply(this,arguments);if(a==="disabled"){d?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a),this.type==="radio"?v(this.element[0]).each(function(){l(this).is(":checked")?l(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):l(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var a=this.buttonElement.removeClass(t),h=l("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),i=this.options.icons,j=i.primary&&i.secondary,k=[];i.primary||i.secondary?(this.options.text&&k.push("ui-button-text-icon"+(j?"s":i.primary?"-primary":"-secondary")),i.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(k.push(j?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||a.attr("title",h))):k.push("ui-button-text-only"),a.addClass(k.join(" "))}}),l.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,d){a==="disabled"&&this.buttons.button("option",a,d),l.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return l(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return l(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),l.Widget.prototype.destroy.call(this)}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL
#####
JQUERY UI DIALOG removed per RL-1135 due to XSS vulnerability - this is only used by ReeceNichols
#####
(function (a, b) { var c = "ui-dialog ui-widget ui-widget-content ui-corner-all ", d = { buttons: !0, height: !0, maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0, width: !0 }, e = { maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0 }, f = a.attrFn || { val: !0, css: !0, html: !0, text: !0, data: !0, width: !0, height: !0, offset: !0, click: !0 }; a.widget("ui.dialog", { options: { autoOpen: !0, buttons: {}, closeOnEscape: !0, closeText: "close", dialogClass: "", draggable: !0, hide: null, height: "auto", maxHeight: !1, maxWidth: !1, minHeight: 150, minWidth: 150, modal: !1, position: { my: "center", at: "center", collision: "fit", using: function (b) { var c = a(this).css(b).offset().top; c < 0 && a(this).css("top", b.top - c) } }, resizable: !0, show: null, stack: !0, title: "", width: 300, zIndex: 1e3 }, _create: function () { this.originalTitle = this.element.attr("title"), typeof this.originalTitle != "string" && (this.originalTitle = ""), this.options.title = this.options.title || this.originalTitle; var b = this, d = b.options, e = d.title || "&#160;", f = a.ui.dialog.getTitleId(b.element), g = (b.uiDialog = a("<div></div>")).appendTo(document.body).hide().addClass(c + d.dialogClass).css({ zIndex: d.zIndex }).attr("tabIndex", -1).css("outline", 0).keydown(function (c) { d.closeOnEscape && !c.isDefaultPrevented() && c.keyCode && c.keyCode === a.ui.keyCode.ESCAPE && (b.close(c), c.preventDefault()) }).attr({ role: "dialog", "aria-labelledby": f }).mousedown(function (a) { b.moveToTop(!1, a) }), h = b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g), i = (b.uiDialogTitlebar = a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g), j = a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role", "button").hover(function () { j.addClass("ui-state-hover") }, function () { j.removeClass("ui-state-hover") }).focus(function () { j.addClass("ui-state-focus") }).blur(function () { j.removeClass("ui-state-focus") }).click(function (a) { return b.close(a), !1 }).appendTo(i), k = (b.uiDialogTitlebarCloseText = a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j), l = a("<span></span>").addClass("ui-dialog-title").attr("id", f).html(e).prependTo(i); a.isFunction(d.beforeclose) && !a.isFunction(d.beforeClose) && (d.beforeClose = d.beforeclose), i.find("*").add(i).disableSelection(), d.draggable && a.fn.draggable && b._makeDraggable(), d.resizable && a.fn.resizable && b._makeResizable(), b._createButtons(d.buttons), b._isOpen = !1, a.fn.bgiframe && g.bgiframe() }, _init: function () { this.options.autoOpen && this.open() }, destroy: function () { var a = this; return a.overlay && a.overlay.destroy(), a.uiDialog.hide(), a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"), a.uiDialog.remove(), a.originalTitle && a.element.attr("title", a.originalTitle), a }, widget: function () { return this.uiDialog }, close: function (b) { var c = this, d, e; if (!1 === c._trigger("beforeClose", b)) return; return c.overlay && c.overlay.destroy(), c.uiDialog.unbind("keypress.ui-dialog"), c._isOpen = !1, c.options.hide ? c.uiDialog.hide(c.options.hide, function () { c._trigger("close", b) }) : (c.uiDialog.hide(), c._trigger("close", b)), a.ui.dialog.overlay.resize(), c.options.modal && (d = 0, a(".ui-dialog").each(function () { this !== c.uiDialog[0] && (e = a(this).css("z-index"), isNaN(e) || (d = Math.max(d, e))) }), a.ui.dialog.maxZ = d), c }, isOpen: function () { return this._isOpen }, moveToTop: function (b, c) { var d = this, e = d.options, f; return e.modal && !b || !e.stack && !e.modal ? d._trigger("focus", c) : (e.zIndex > a.ui.dialog.maxZ && (a.ui.dialog.maxZ = e.zIndex), d.overlay && (a.ui.dialog.maxZ += 1, d.overlay.$el.css("z-index", a.ui.dialog.overlay.maxZ = a.ui.dialog.maxZ)), f = { scrollTop: d.element.scrollTop(), scrollLeft: d.element.scrollLeft() }, a.ui.dialog.maxZ += 1, d.uiDialog.css("z-index", a.ui.dialog.maxZ), d.element.attr(f), d._trigger("focus", c), d) }, open: function () { if (this._isOpen) return; var b = this, c = b.options, d = b.uiDialog; return b.overlay = c.modal ? new a.ui.dialog.overlay(b) : null, b._size(), b._position(c.position), d.show(c.show), b.moveToTop(!0), c.modal && d.bind("keydown.ui-dialog", function (b) { if (b.keyCode !== a.ui.keyCode.TAB) return; var c = a(":tabbable", this), d = c.filter(":first"), e = c.filter(":last"); if (b.target === e[0] && !b.shiftKey) return d.focus(1), !1; if (b.target === d[0] && b.shiftKey) return e.focus(1), !1 }), a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(), b._isOpen = !0, b._trigger("open"), b }, _createButtons: function (b) { var c = this, d = !1, e = a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), g = a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e); c.uiDialog.find(".ui-dialog-buttonpane").remove(), typeof b == "object" && b !== null && a.each(b, function () { return !(d = !0) }), d && (a.each(b, function (b, d) { d = a.isFunction(d) ? { click: d, text: b } : d; var e = a('<button type="button"></button>').click(function () { d.click.apply(c.element[0], arguments) }).appendTo(g); a.each(d, function (a, b) { if (a === "click") return; a in f ? e[a](b) : e.attr(a, b) }), a.fn.button && e.button() }), e.appendTo(c.uiDialog)) }, _makeDraggable: function () { function f(a) { return { position: a.position, offset: a.offset } } var b = this, c = b.options, d = a(document), e; b.uiDialog.draggable({ cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function (d, g) { e = c.height === "auto" ? "auto" : a(this).height(), a(this).height(a(this).height()).addClass("ui-dialog-dragging"), b._trigger("dragStart", d, f(g)) }, drag: function (a, c) { b._trigger("drag", a, f(c)) }, stop: function (g, h) { c.position = [h.position.left - d.scrollLeft(), h.position.top - d.scrollTop()], a(this).removeClass("ui-dialog-dragging").height(e), b._trigger("dragStop", g, f(h)), a.ui.dialog.overlay.resize() } }) }, _makeResizable: function (c) { function h(a) { return { originalPosition: a.originalPosition, originalSize: a.originalSize, position: a.position, size: a.size } } c = c === b ? this.options.resizable : c; var d = this, e = d.options, f = d.uiDialog.css("position"), g = typeof c == "string" ? c : "n,e,s,w,se,sw,ne,nw"; d.uiDialog.resizable({ cancel: ".ui-dialog-content", containment: "document", alsoResize: d.element, maxWidth: e.maxWidth, maxHeight: e.maxHeight, minWidth: e.minWidth, minHeight: d._minHeight(), handles: g, start: function (b, c) { a(this).addClass("ui-dialog-resizing"), d._trigger("resizeStart", b, h(c)) }, resize: function (a, b) { d._trigger("resize", a, h(b)) }, stop: function (b, c) { a(this).removeClass("ui-dialog-resizing"), e.height = a(this).height(), e.width = a(this).width(), d._trigger("resizeStop", b, h(c)), a.ui.dialog.overlay.resize() } }).css("position", f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se") }, _minHeight: function () { var a = this.options; return a.height === "auto" ? a.minHeight : Math.min(a.minHeight, a.height) }, _position: function (b) { var c = [], d = [0, 0], e; if (b) { if (typeof b == "string" || typeof b == "object" && "0" in b) c = b.split ? b.split(" ") : [b[0], b[1]], c.length === 1 && (c[1] = c[0]), a.each(["left", "top"], function (a, b) { +c[a] === c[a] && (d[a] = c[a], c[a] = b) }), b = { my: c.join(" "), at: c.join(" "), offset: d.join(" ") }; b = a.extend({}, a.ui.dialog.prototype.options.position, b) } else b = a.ui.dialog.prototype.options.position; e = this.uiDialog.is(":visible"), e || this.uiDialog.show(), this.uiDialog.css({ top: 0, left: 0 }).position(a.extend({ of: window }, b)), e || this.uiDialog.hide() }, _setOptions: function (b) { var c = this, f = {}, g = !1; a.each(b, function (a, b) { c._setOption(a, b), a in d && (g = !0), a in e && (f[a] = b) }), g && this._size(), this.uiDialog.is(":data(resizable)") && this.uiDialog.resizable("option", f) }, _setOption: function (b, d) { var e = this, f = e.uiDialog; switch (b) { case "beforeclose": b = "beforeClose"; break; case "buttons": e._createButtons(d); break; case "closeText": e.uiDialogTitlebarCloseText.text("" + d); break; case "dialogClass": f.removeClass(e.options.dialogClass).addClass(c + d); break; case "disabled": d ? f.addClass("ui-dialog-disabled") : f.removeClass("ui-dialog-disabled"); break; case "draggable": var g = f.is(":data(draggable)"); g && !d && f.draggable("destroy"), !g && d && e._makeDraggable(); break; case "position": e._position(d); break; case "resizable": var h = f.is(":data(resizable)"); h && !d && f.resizable("destroy"), h && typeof d == "string" && f.resizable("option", "handles", d), !h && d !== !1 && e._makeResizable(d); break; case "title": a(".ui-dialog-title", e.uiDialogTitlebar).html("" + (d || "&#160;")) } a.Widget.prototype._setOption.apply(e, arguments) }, _size: function () { var b = this.options, c, d, e = this.uiDialog.is(":visible"); this.element.show().css({ width: "auto", minHeight: 0, height: 0 }), b.minWidth > b.width && (b.width = b.minWidth), c = this.uiDialog.css({ height: "auto", width: b.width }).height(), d = Math.max(0, b.minHeight - c); if (b.height === "auto") if (a.support.minHeight) this.element.css({ minHeight: d, height: "auto" }); else { this.uiDialog.show(); var f = this.element.css("height", "auto").height(); e || this.uiDialog.hide(), this.element.height(Math.max(f, d)) } else this.element.height(Math.max(b.height - c, 0)); this.uiDialog.is(":data(resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight()) } }), a.extend(a.ui.dialog, { version: "1.8.20", uuid: 0, maxZ: 0, getTitleId: function (a) { var b = a.attr("id"); return b || (this.uuid += 1, b = this.uuid), "ui-dialog-title-" + b }, overlay: function (b) { this.$el = a.ui.dialog.overlay.create(b) } }), a.extend(a.ui.dialog.overlay, { instances: [], oldInstances: [], maxZ: 0, events: a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","), function (a) { return a + ".dialog-overlay" }).join(" "), create: function (b) { this.instances.length === 0 && (setTimeout(function () { a.ui.dialog.overlay.instances.length && a(document).bind(a.ui.dialog.overlay.events, function (b) { if (a(b.target).zIndex() < a.ui.dialog.overlay.maxZ) return !1 }) }, 1), a(document).bind("keydown.dialog-overlay", function (c) { b.options.closeOnEscape && !c.isDefaultPrevented() && c.keyCode && c.keyCode === a.ui.keyCode.ESCAPE && (b.close(c), c.preventDefault()) }), a(window).bind("resize.dialog-overlay", a.ui.dialog.overlay.resize)); var c = (this.oldInstances.pop() || a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({ width: this.width(), height: this.height() }); return a.fn.bgiframe && c.bgiframe(), this.instances.push(c), c }, destroy: function (b) { var c = a.inArray(b, this.instances); c != -1 && this.oldInstances.push(this.instances.splice(c, 1)[0]), this.instances.length === 0 && a([document, window]).unbind(".dialog-overlay"), b.remove(); var d = 0; a.each(this.instances, function () { d = Math.max(d, this.css("z-index")) }), this.maxZ = d }, height: function () { var b, c; return a.browser.msie && a.browser.version < 7 ? (b = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight), c = Math.max(document.documentElement.offsetHeight, document.body.offsetHeight), b < c ? a(window).height() + "px" : b + "px") : a(document).height() + "px" }, width: function () { var b, c; return a.browser.msie ? (b = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth), c = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth), b < c ? a(window).width() + "px" : b + "px") : a(document).width() + "px" }, resize: function () { var b = a([]); a.each(a.ui.dialog.overlay.instances, function () { b = b.add(this) }), b.css({ width: 0, height: 0 }).css({ width: a.ui.dialog.overlay.width(), height: a.ui.dialog.overlay.height() }) } }), a.extend(a.ui.dialog.overlay.prototype, { destroy: function () { a.ui.dialog.overlay.destroy(this.$el) } }) })(jQuery);;
*/
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,e){var f=5;d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,c=this.options,j=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),k="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",l=c.values&&c.values.length||1,m=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(c.disabled?" ui-slider-disabled ui-disabled":"")),this.range=d([]),c.range&&(c.range===!0&&(c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&c.values.length!==2&&(c.values=[c.values[0],c.values[0]])),this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(c.range==="min"||c.range==="max"?" ui-slider-range-"+c.range:"")));for(var n=j.length;n<l;n+=1){m.push(k)}this.handles=j.add(d(m.join("")).appendTo(a.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){c.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")}),this.handles.each(function(h){d(this).data("index.ui-slider-handle",h)}),this.handles.keydown(function(b){var o=d(this).data("index.ui-slider-handle"),p,q,r,s;if(a.options.disabled){return}switch(b.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:b.preventDefault();if(!a._keySliding){a._keySliding=!0,d(this).addClass("ui-state-active"),p=a._start(b,o);if(p===!1){return}}}s=a.options.step,a.options.values&&a.options.values.length?q=r=a.values(o):q=r=a.value();switch(b.keyCode){case d.ui.keyCode.HOME:r=a._valueMin();break;case d.ui.keyCode.END:r=a._valueMax();break;case d.ui.keyCode.PAGE_UP:r=a._trimAlignValue(q+(a._valueMax()-a._valueMin())/f);break;case d.ui.keyCode.PAGE_DOWN:r=a._trimAlignValue(q-(a._valueMax()-a._valueMin())/f);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(q===a._valueMax()){return}r=a._trimAlignValue(q+s);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(q===a._valueMin()){return}r=a._trimAlignValue(q-s)}a._slide(b,o,r)}).keyup(function(b){var h=d(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(b,h),a._change(b,h),d(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(a){var m=this.options,n,o,p,q,r,s,t,u,v;return m.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:a.pageX,y:a.pageY},o=this._normValueFromMouse(n),p=this._valueMax()-this._valueMin()+1,r=this,this.handles.each(function(h){var i=Math.abs(o-r.values(h));p>i&&(p=i,q=d(this),s=h)}),m.range===!0&&this.values(1)===m.min&&(s+=1,q=d(this.handles[s])),t=this._start(a,s),t===!1?!1:(this._mouseSliding=!0,r._handleIndex=s,q.addClass("ui-state-active").focus(),u=q.offset(),v=!d(a.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=v?{left:0,top:0}:{left:a.pageX-u.left-q.width()/2,top:a.pageY-u.top-q.height()/2-(parseInt(q.css("borderTopWidth"),10)||0)-(parseInt(q.css("borderBottomWidth"),10)||0)+(parseInt(q.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(a,s,o),this._animateOff=!0,!0))},_mouseStart:function(b){return !0},_mouseDrag:function(h){var i={x:h.pageX,y:h.pageY},j=this._normValueFromMouse(i);return this._slide(h,this._handleIndex,j),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(h){var i,j,k,l,m;return this.orientation==="horizontal"?(i=this.elementSize.width,j=h.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,j=h.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),k=j/i,k>1&&(k=1),k<0&&(k=0),this.orientation==="vertical"&&(k=1-k),l=this._valueMax()-this._valueMin(),m=this._valueMin()+k*l,this._trimAlignValue(m)},_start:function(h,i){var j={handle:this.handles[i],value:this.value()};return this.options.values&&this.options.values.length&&(j.value=this.values(i),j.values=this.values()),this._trigger("start",h,j)},_slide:function(h,i,j){var k,l,m;this.options.values&&this.options.values.length?(k=this.values(i?0:1),this.options.values.length===2&&this.options.range===!0&&(i===0&&j>k||i===1&&j<k)&&(j=k),j!==this.values(i)&&(l=this.values(),l[i]=j,m=this._trigger("slide",h,{handle:this.handles[i],value:j,values:l}),k=this.values(i?0:1),m!==!1&&this.values(i,j,!0))):j!==this.value()&&(m=this._trigger("slide",h,{handle:this.handles[i],value:j}),m!==!1&&this.value(j))},_stop:function(h,i){var j={handle:this.handles[i],value:this.value()};this.options.values&&this.options.values.length&&(j.value=this.values(i),j.values=this.values()),this._trigger("stop",h,j)},_change:function(h,i){if(!this._keySliding&&!this._mouseSliding){var j={handle:this.handles[i],value:this.value()};this.options.values&&this.options.values.length&&(j.value=this.values(i),j.values=this.values()),this._trigger("change",h,j)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(a,h){var i,j,k;if(arguments.length>1){this.options.values[a]=this._trimAlignValue(h),this._refreshValue(),this._change(null,a);return}if(!arguments.length){return this._values()}if(!d.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(a):this.value()}i=this.options.values,j=arguments[0];for(k=0;k<i.length;k+=1){i[k]=this._trimAlignValue(j[k]),this._change(null,k)}this._refreshValue()},_setOption:function(a,h){var i,j=0;d.isArray(this.options.values)&&(j=this.options.values.length),d.Widget.prototype._setOption.apply(this,arguments);switch(a){case"disabled":h?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(i=0;i<j;i+=1){this._change(null,i)}this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(h){var i,j,k;if(arguments.length){return i=this.options.values[h],i=this._trimAlignValue(i),i}j=this.options.values.slice();for(k=0;k<j.length;k+=1){j[k]=this._trimAlignValue(j[k])}return j},_trimAlignValue:function(h){if(h<=this._valueMin()){return this._valueMin()}if(h>=this._valueMax()){return this._valueMax()}var i=this.options.step>0?this.options.step:1,j=(h-this._valueMin())%i,k=h-j;return Math.abs(j)*2>=i&&(k+=j>0?i:-i),parseFloat(k.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=this.options.range,l=this.options,m=this,n=this._animateOff?!1:l.animate,o,p={},q,r,s,t;this.options.values&&this.options.values.length?this.handles.each(function(c,h){o=(m.values(c)-m._valueMin())/(m._valueMax()-m._valueMin())*100,p[m.orientation==="horizontal"?"left":"bottom"]=o+"%",d(this).stop(1,1)[n?"animate":"css"](p,l.animate),m.options.range===!0&&(m.orientation==="horizontal"?(c===0&&m.range.stop(1,1)[n?"animate":"css"]({left:o+"%"},l.animate),c===1&&m.range[n?"animate":"css"]({width:o-q+"%"},{queue:!1,duration:l.animate})):(c===0&&m.range.stop(1,1)[n?"animate":"css"]({bottom:o+"%"},l.animate),c===1&&m.range[n?"animate":"css"]({height:o-q+"%"},{queue:!1,duration:l.animate}))),q=o}):(r=this.value(),s=this._valueMin(),t=this._valueMax(),o=t!==s?(r-s)/(t-s)*100:0,p[m.orientation==="horizontal"?"left":"bottom"]=o+"%",this.handle.stop(1,1)[n?"animate":"css"](p,l.animate),a==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[n?"animate":"css"]({width:o+"%"},l.animate),a==="max"&&this.orientation==="horizontal"&&this.range[n?"animate":"css"]({width:100-o+"%"},{queue:!1,duration:l.animate}),a==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[n?"animate":"css"]({height:o+"%"},l.animate),a==="max"&&this.orientation==="vertical"&&this.range[n?"animate":"css"]({height:100-o+"%"},{queue:!1,duration:l.animate}))}}),d.extend(d.ui.slider,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(h,i){function l(){return ++j}function m(){return ++k}var j=0,k=0;h.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(c,d){if(c=="selected"){if(this.options.collapsible&&d==this.options.selected){return}this.select(d)}else{this.options[c]=d,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+l()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+m());return h.cookie.apply(null,[a].concat(h.makeArray(arguments)))},_ui:function(c,d){return{tab:c,panel:d,index:this.anchors.index(c)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=h(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(a){function x(d,e){d.css("display",""),!h.support.opacity&&e.opacity&&d[0].style.removeAttribute("filter")}var b=this,p=this.options,q=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=h(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return h("a",this)[0]}),this.panels=h([]),this.anchors.each(function(d,e){var f=h(e).attr("href"),n=f.split("#")[0],o;n&&(n===location.toString().split("#")[0]||(o=h("base")[0])&&n===o.href)&&(f=e.hash,e.href=f);if(q.test(f)){b.panels=b.panels.add(b.element.find(b._sanitizeSelector(f)))}else{if(f&&f!=="#"){h.data(e,"href.tabs",f),h.data(e,"load.tabs",f.replace(/#.*$/,""));var A=b._tabId(e);e.href="#"+A;var B=b.element.find("#"+A);B.length||(B=h(p.panelTemplate).attr("id",A).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(b.panels[d-1]||b.list),B.data("destroy.tabs",!0)),b.panels=b.panels.add(B)}else{p.disabled.push(d)}}}),a?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),p.selected===i?(location.hash&&this.anchors.each(function(c,d){if(d.hash==location.hash){return p.selected=c,!1}}),typeof p.selected!="number"&&p.cookie&&(p.selected=parseInt(b._cookie(),10)),typeof p.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(p.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),p.selected=p.selected||(this.lis.length?0:-1)):p.selected===null&&(p.selected=-1),p.selected=p.selected>=0&&this.anchors[p.selected]||p.selected<0?p.selected:0,p.disabled=h.unique(p.disabled.concat(h.map(this.lis.filter(".ui-state-disabled"),function(c,d){return b.lis.index(c)}))).sort(),h.inArray(p.selected,p.disabled)!=-1&&p.disabled.splice(h.inArray(p.selected,p.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),p.selected>=0&&this.anchors.length&&(b.element.find(b._sanitizeSelector(b.anchors[p.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(p.selected).addClass("ui-tabs-selected ui-state-active"),b.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[p.selected],b.element.find(b._sanitizeSelector(b.anchors[p.selected].hash))[0]))}),this.load(p.selected)),h(window).bind("unload",function(){b.lis.add(b.anchors).unbind(".tabs"),b.lis=b.anchors=b.panels=null})):p.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[p.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),p.cookie&&this._cookie(p.selected,p.cookie);for(var r=0,s;s=this.lis[r];r++){h(s)[h.inArray(r,p.disabled)!=-1&&!h(s).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}p.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(p.event!=="mouseover"){var t=function(c,d){d.is(":not(.ui-state-disabled)")&&d.addClass("ui-state-"+c)},u=function(c,d){d.removeClass("ui-state-"+c)};this.lis.bind("mouseover.tabs",function(){t("hover",h(this))}),this.lis.bind("mouseout.tabs",function(){u("hover",h(this))}),this.anchors.bind("focus.tabs",function(){t("focus",h(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){u("focus",h(this).closest("li"))})}var v,w;p.fx&&(h.isArray(p.fx)?(v=p.fx[0],w=p.fx[1]):v=w=p.fx);var y=w?function(d,e){h(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(w,w.duration||"normal",function(){x(e,w),b._trigger("show",null,b._ui(d,e[0]))})}:function(d,e){h(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),b._trigger("show",null,b._ui(d,e[0]))},z=v?function(c,d){d.animate(v,v.duration||"normal",function(){b.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),x(d,v),b.element.dequeue("tabs")})}:function(d,e,f){b.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),b.element.dequeue("tabs")};this.anchors.bind(p.event+".tabs",function(){var d=this,e=h(d).closest("li"),n=b.panels.filter(":not(.ui-tabs-hide)"),o=b.element.find(b._sanitizeSelector(d.hash));if(e.hasClass("ui-tabs-selected")&&!p.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||b.panels.filter(":animated").length||b._trigger("select",null,b._ui(this,o[0]))===!1){return this.blur(),!1}p.selected=b.anchors.index(this),b.abort();if(p.collapsible){if(e.hasClass("ui-tabs-selected")){return p.selected=-1,p.cookie&&b._cookie(p.selected,p.cookie),b.element.queue("tabs",function(){z(d,n)}).dequeue("tabs"),this.blur(),!1}if(!n.length){return p.cookie&&b._cookie(p.selected,p.cookie),b.element.queue("tabs",function(){y(d,o)}),b.load(b.anchors.index(this)),this.blur(),!1}}p.cookie&&b._cookie(p.selected,p.cookie);if(o.length){n.length&&b.element.queue("tabs",function(){z(d,n)}),b.element.queue("tabs",function(){y(d,o)}),b.load(b.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}h.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){return typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']"))),b},destroy:function(){var a=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var d=h.data(this,"href.tabs");d&&(this.href=d);var e=h(this).unbind(".tabs");h.each(["href","load","cache"],function(c,f){e.removeData(f+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){h.data(this,"destroy.tabs")?h(this).remove():h(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),a.cookie&&this._cookie(null,a.cookie),this},add:function(a,b,n){n===i&&(n=this.anchors.length);var o=this,p=this.options,q=h(p.tabTemplate.replace(/#\{href\}/g,a).replace(/#\{label\}/g,b)),r=a.indexOf("#")?this._tabId(h("a",q)[0]):a.replace("#","");q.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var s=o.element.find("#"+r);return s.length||(s=h(p.panelTemplate).attr("id",r).data("destroy.tabs",!0)),s.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),n>=this.lis.length?(q.appendTo(this.list),s.appendTo(this.list[0].parentNode)):(q.insertBefore(this.lis[n]),s.insertBefore(this.panels[n])),p.disabled=h.map(p.disabled,function(c,d){return c>=n?++c:c}),this._tabify(),this.anchors.length==1&&(p.selected=0,q.addClass("ui-tabs-selected ui-state-active"),s.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[0],o.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[n],this.panels[n])),this},remove:function(a){a=this._getIndex(a);var f=this.options,n=this.lis.eq(a).remove(),o=this.panels.eq(a).remove();return n.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(a+(a+1<this.anchors.length?1:-1)),f.disabled=h.map(h.grep(f.disabled,function(b,d){return b!=a}),function(b,d){return b>=a?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(n.find("a")[0],o[0])),this},enable:function(a){a=this._getIndex(a);var d=this.options;if(h.inArray(a,d.disabled)==-1){return}return this.lis.eq(a).removeClass("ui-state-disabled"),d.disabled=h.grep(d.disabled,function(b,e){return b!=a}),this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a])),this},disable:function(d){d=this._getIndex(d);var e=this,f=this.options;return d!=f.selected&&(this.lis.eq(d).addClass("ui-state-disabled"),f.disabled.push(d),f.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[d],this.panels[d]))),this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}return this.anchors.eq(b).trigger(this.options.event+".tabs"),this},load:function(a){a=this._getIndex(a);var n=this,o=this.options,p=this.anchors.eq(a)[0],q=h.data(p,"load.tabs");this.abort();if(!q||this.element.queue("tabs").length!==0&&h.data(p,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(a).addClass("ui-state-processing");if(o.spinner){var r=h("span",p);r.data("label.tabs",r.html()).html(o.spinner)}return this.xhr=h.ajax(h.extend({},o.ajaxOptions,{url:q,success:function(b,c){n.element.find(n._sanitizeSelector(p.hash)).html(b),n._cleanup(),o.cache&&h.data(p,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[a],n.panels[a]));try{o.ajaxOptions.success(b,c)}catch(d){}},error:function(b,c,d){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[a],n.panels[a]));try{o.ajaxOptions.error(b,c,a,p)}catch(d){}}})),n.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(c,d){return this.anchors.eq(c).removeData("cache.tabs").data("load.tabs",d),this},length:function(){return this.anchors.length}}),h.extend(h.ui.tabs,{version:"1.8.20"}),h.extend(h.ui.tabs.prototype,{rotation:null,rotate:function(n,o){var p=this,q=this.options,r=p._rotate||(p._rotate=function(a){clearTimeout(p.rotation),p.rotation=setTimeout(function(){var b=q.selected;p.select(++b<p.anchors.length?b:0)},n),a&&a.stopPropagation()}),s=p._unrotate||(p._unrotate=o?function(b){r()}:function(b){b.clientX&&p.rotate(null)});return n?(this.element.bind("tabsshow",r),this.anchors.bind(q.event+".tabs",s),r()):(clearTimeout(p.rotation),this.element.unbind("tabsshow",r),this.anchors.unbind(q.event+".tabs",s),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.20"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.20",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=c("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),c.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===d?this._value():(this._setOption("value",b),this)},_setOption:function(a,e){a==="value"&&(this.options.value=e,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),c.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return typeof b!="number"&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),f=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(f.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),c.extend(c.ui.progressbar,{version:"1.8.20"})})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(m,n){function o(a){var d;return a&&a.constructor==Array&&a.length==3?a:(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)]:(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55]:(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]:(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]:(d=/rgba\(0, 0, 0, 0\)/.exec(a))?q.transparent:q[m.trim(a).toLowerCase()]}function p(a,c){var f;do{f=m.curCSS(a,c);if(f!=""&&f!="transparent"||m.nodeName(a,"body")){break}c="backgroundColor"}while(a=a.parentNode);return o(f)}function t(){var f=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,h={},i,j;if(f&&f.length&&f[0]&&f[f[0]]){var k=f.length;while(k--){i=f[k],typeof f[i]=="string"&&(j=i.replace(/\-(\w)/g,function(c,d){return d.toUpperCase()}),h[j]=f[i])}}else{for(i in f){typeof f[i]=="string"&&(h[i]=f[i])}}return h}function u(a){var e,f;for(e in a){f=a[e],(f==null||m.isFunction(f)||e in s||/scrollbar/.test(e)||!/color/i.test(e)&&isNaN(parseFloat(f)))&&delete a[e]}return a}function v(e,f){var h={_:0},i;for(i in f){e[i]!=f[i]&&(h[i]=f[i])}return h}function w(a,f,h,i){typeof a=="object"&&(i=f,h=null,f=a,a=f.effect),m.isFunction(f)&&(i=f,h=null,f={});if(typeof f=="number"||m.fx.speeds[f]){i=h,h=f,f={}}return m.isFunction(h)&&(i=h,h=null),f=f||{},h=h||f.duration,h=m.fx.off?0:typeof h=="number"?h:h in m.fx.speeds?m.fx.speeds[h]:m.fx.speeds._default,i=i||f.complete,[a,f,h,i]}function x(a){return !a||typeof a=="number"||m.fx.speeds[a]?!0:typeof a=="string"&&!m.effects[a]?!0:!1}m.effects={},m.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(a,c){m.fx.step[c]=function(b){b.colorInit||(b.start=p(b.elem,c),b.end=o(b.end),b.colorInit=!0),b.elem.style[c]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var q={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},r=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};m.effects.animateClass=function(a,f,h,i){return m.isFunction(h)&&(i=h,h=null),this.queue(function(){var b=m(this),c=b.attr("style")||" ",d=u(t.call(this)),e,j=b.attr("class")||"";m.each(r,function(k,l){a[l]&&b[l+"Class"](a[l])}),e=u(t.call(this)),b.attr("class",j),b.animate(v(d,e),{queue:!1,duration:f,easing:h,complete:function(){m.each(r,function(k,l){a[l]&&b[l+"Class"](a[l])}),typeof b.attr("style")=="object"?(b.attr("style").cssText="",b.attr("style").cssText=c):b.attr("style",c),i&&i.apply(this,arguments),m.dequeue(this)}})})},m.fn.extend({_addClass:m.fn.addClass,addClass:function(a,f,h,i){return f?m.effects.animateClass.apply(this,[{add:a},f,h,i]):this._addClass(a)},_removeClass:m.fn.removeClass,removeClass:function(a,f,h,i){return f?m.effects.animateClass.apply(this,[{remove:a},f,h,i]):this._removeClass(a)},_toggleClass:m.fn.toggleClass,toggleClass:function(a,b,h,i,j){return typeof b=="boolean"||b===n?h?m.effects.animateClass.apply(this,[b?{add:a}:{remove:a},h,i,j]):this._toggleClass(a,b):m.effects.animateClass.apply(this,[{toggle:a},b,h,i])},switchClass:function(a,h,i,j,k){return m.effects.animateClass.apply(this,[{add:h,remove:a},i,j,k])}}),m.extend(m.effects,{version:"1.8.20",save:function(d,e){for(var f=0;f<e.length;f++){e[f]!==null&&d.data("ec.storage."+e[f],d[0].style[e[f]])}},restore:function(d,e){for(var f=0;f<e.length;f++){e[f]!==null&&d.css(e[f],d.data("ec.storage."+e[f]))}},setMode:function(c,d){return d=="toggle"&&(d=c.is(":hidden")?"show":"hide"),d},getBaseline:function(e,f){var h,i;switch(e[0]){case"top":h=0;break;case"middle":h=0.5;break;case"bottom":h=1;break;default:h=e[0]/f.height}switch(e[1]){case"left":i=0;break;case"center":i=0.5;break;case"right":i=1;break;default:i=e[1]/f.width}return{x:i,y:h}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper")){return a.parent()}var f={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},h=m("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i=document.activeElement;return a.wrap(h),(a[0]===i||m.contains(a[0],i))&&m(i).focus(),h=a.parent(),a.css("position")=="static"?(h.css({position:"relative"}),a.css({position:"relative"})):(m.extend(f,{position:a.css("position"),zIndex:a.css("z-index")}),m.each(["top","left","bottom","right"],function(b,c){f[c]=a.css(c),isNaN(parseInt(f[c],10))&&(f[c]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),h.css(f).show()},removeWrapper:function(a){var e,f=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(e=a.parent().replaceWith(a),(a[0]===f||m.contains(a[0],f))&&m(f).focus(),e):a},setTransition:function(a,f,h,i){return i=i||{},m.each(f,function(b,d){var e=a.cssUnit(d);e[0]>0&&(i[d]=e[0]*h+e[1])}),i}}),m.fn.extend({effect:function(a,j,k,l){var y=w.apply(this,arguments),z={options:y[1],duration:y[2],callback:y[3]},A=z.options.mode,B=m.effects[a];return m.fx.off||!B?A?this[A](z.duration,z.callback):this.each(function(){z.callback&&z.callback.call(this)}):B.call(this,z)},_show:m.fn.show,show:function(c){if(x(c)){return this._show.apply(this,arguments)}var d=w.apply(this,arguments);return d[1].mode="show",this.effect.apply(this,d)},_hide:m.fn.hide,hide:function(c){if(x(c)){return this._hide.apply(this,arguments)}var d=w.apply(this,arguments);return d[1].mode="hide",this.effect.apply(this,d)},__toggle:m.fn.toggle,toggle:function(a){if(x(a)||typeof a=="boolean"||m.isFunction(a)){return this.__toggle.apply(this,arguments)}var d=w.apply(this,arguments);return d[1].mode="toggle",this.effect.apply(this,d)},cssUnit:function(a){var e=this.css(a),f=[];return m.each(["em","px","%","pt"],function(c,d){e.indexOf(d)>0&&(f=[parseFloat(e),d])}),f}}),m.easing.jswing=m.easing.swing,m.extend(m.easing,{def:"easeOutQuad",swing:function(a,h,i,j,k){return m.easing[m.easing.def](a,h,i,j,k)},easeInQuad:function(f,h,i,j,k){return j*(h/=k)*h+i},easeOutQuad:function(f,h,i,j,k){return -j*(h/=k)*(h-2)+i},easeInOutQuad:function(f,h,i,j,k){return(h/=k/2)<1?j/2*h*h+i:-j/2*(--h*(h-2)-1)+i},easeInCubic:function(f,h,i,j,k){return j*(h/=k)*h*h+i},easeOutCubic:function(f,h,i,j,k){return j*((h=h/k-1)*h*h+1)+i},easeInOutCubic:function(f,h,i,j,k){return(h/=k/2)<1?j/2*h*h*h+i:j/2*((h-=2)*h*h+2)+i},easeInQuart:function(f,h,i,j,k){return j*(h/=k)*h*h*h+i},easeOutQuart:function(f,h,i,j,k){return -j*((h=h/k-1)*h*h*h-1)+i},easeInOutQuart:function(f,h,i,j,k){return(h/=k/2)<1?j/2*h*h*h*h+i:-j/2*((h-=2)*h*h*h-2)+i},easeInQuint:function(f,h,i,j,k){return j*(h/=k)*h*h*h*h+i},easeOutQuint:function(f,h,i,j,k){return j*((h=h/k-1)*h*h*h*h+1)+i},easeInOutQuint:function(f,h,i,j,k){return(h/=k/2)<1?j/2*h*h*h*h*h+i:j/2*((h-=2)*h*h*h*h+2)+i},easeInSine:function(f,h,i,j,k){return -j*Math.cos(h/k*(Math.PI/2))+j+i},easeOutSine:function(f,h,i,j,k){return j*Math.sin(h/k*(Math.PI/2))+i},easeInOutSine:function(f,h,i,j,k){return -j/2*(Math.cos(Math.PI*h/k)-1)+i},easeInExpo:function(f,h,i,j,k){return h==0?i:j*Math.pow(2,10*(h/k-1))+i},easeOutExpo:function(f,h,i,j,k){return h==k?i+j:j*(-Math.pow(2,-10*h/k)+1)+i},easeInOutExpo:function(f,h,i,j,k){return h==0?i:h==k?i+j:(h/=k/2)<1?j/2*Math.pow(2,10*(h-1))+i:j/2*(-Math.pow(2,-10*--h)+2)+i},easeInCirc:function(f,h,i,j,k){return -j*(Math.sqrt(1-(h/=k)*h)-1)+i},easeOutCirc:function(f,h,i,j,k){return j*Math.sqrt(1-(h=h/k-1)*h)+i},easeInOutCirc:function(f,h,i,j,k){return(h/=k/2)<1?-j/2*(Math.sqrt(1-h*h)-1)+i:j/2*(Math.sqrt(1-(h-=2)*h)+1)+i},easeInElastic:function(i,j,k,l,y){var z=1.70158,A=0,B=l;if(j==0){return k}if((j/=y)==1){return k+l}A||(A=y*0.3);if(B<Math.abs(l)){B=l;var z=A/4}else{var z=A/(2*Math.PI)*Math.asin(l/B)}return -(B*Math.pow(2,10*(j-=1))*Math.sin((j*y-z)*2*Math.PI/A))+k},easeOutElastic:function(i,j,k,l,y){var z=1.70158,A=0,B=l;if(j==0){return k}if((j/=y)==1){return k+l}A||(A=y*0.3);if(B<Math.abs(l)){B=l;var z=A/4}else{var z=A/(2*Math.PI)*Math.asin(l/B)}return B*Math.pow(2,-10*j)*Math.sin((j*y-z)*2*Math.PI/A)+l+k},easeInOutElastic:function(i,j,k,l,y){var z=1.70158,A=0,B=l;if(j==0){return k}if((j/=y/2)==2){return k+l}A||(A=y*0.3*1.5);if(B<Math.abs(l)){B=l;var z=A/4}else{var z=A/(2*Math.PI)*Math.asin(l/B)}return j<1?-0.5*B*Math.pow(2,10*(j-=1))*Math.sin((j*y-z)*2*Math.PI/A)+k:B*Math.pow(2,-10*(j-=1))*Math.sin((j*y-z)*2*Math.PI/A)*0.5+l+k},easeInBack:function(b,h,i,j,k,l){return l==n&&(l=1.70158),j*(h/=k)*h*((l+1)*h-l)+i},easeOutBack:function(b,h,i,j,k,l){return l==n&&(l=1.70158),j*((h=h/k-1)*h*((l+1)*h+l)+1)+i},easeInOutBack:function(b,h,i,j,k,l){return l==n&&(l=1.70158),(h/=k/2)<1?j/2*h*h*(((l*=1.525)+1)*h-l)+i:j/2*((h-=2)*h*(((l*=1.525)+1)*h+l)+2)+i},easeInBounce:function(a,h,i,j,k){return j-m.easing.easeOutBounce(a,k-h,0,j,k)+i},easeOutBounce:function(f,h,i,j,k){return(h/=k)<1/2.75?j*7.5625*h*h+i:h<2/2.75?j*(7.5625*(h-=1.5/2.75)*h+0.75)+i:h<2.5/2.75?j*(7.5625*(h-=2.25/2.75)*h+0.9375)+i:j*(7.5625*(h-=2.625/2.75)*h+0.984375)+i},easeInOutBounce:function(a,h,i,j,k){return h<k/2?m.easing.easeInBounce(a,h*2,0,j,k)*0.5+i:m.easing.easeOutBounce(a,h*2-k,0,j,k)*0.5+j*0.5+i}})}(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.blind=function(a){return this.queue(function(){var b=c(this),k=["position","top","bottom","left","right"],l=c.effects.setMode(b,a.options.mode||"hide"),m=a.options.direction||"vertical";c.effects.save(b,k),b.show();var n=c.effects.createWrapper(b).css({overflow:"hidden"}),o=m=="vertical"?"height":"width",p=m=="vertical"?n.height():n.width();l=="show"&&n.css(o,0);var q={};q[o]=l=="show"?p:0,n.animate(q,a.duration,a.options.easing,function(){l=="hide"&&b.hide(),c.effects.restore(b,k),c.effects.removeWrapper(b),a.callback&&a.callback.apply(b[0],arguments),b.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.bounce=function(a){return this.queue(function(){var b=c(this),o=["position","top","bottom","left","right"],q=c.effects.setMode(b,a.options.mode||"effect"),r=a.options.direction||"up",s=a.options.distance||20,t=a.options.times||5,u=a.duration||250;/show|hide/.test(q)&&o.push("opacity"),c.effects.save(b,o),b.show(),c.effects.createWrapper(b);var v=r=="up"||r=="down"?"top":"left",w=r=="up"||r=="left"?"pos":"neg",s=a.options.distance||(v=="top"?b.outerHeight({margin:!0})/3:b.outerWidth({margin:!0})/3);q=="show"&&b.css("opacity",0).css(v,w=="pos"?-s:s),q=="hide"&&(s=s/(t*2)),q!="hide"&&t--;if(q=="show"){var x={opacity:1};x[v]=(w=="pos"?"+=":"-=")+s,b.animate(x,u/2,a.options.easing),s=s/2,t--}for(var y=0;y<t;y++){var z={},A={};z[v]=(w=="pos"?"-=":"+=")+s,A[v]=(w=="pos"?"+=":"-=")+s,b.animate(z,u/2,a.options.easing).animate(A,u/2,a.options.easing),s=q=="hide"?s*2:s/2}if(q=="hide"){var x={opacity:0};x[v]=(w=="pos"?"-=":"+=")+s,b.animate(x,u/2,a.options.easing,function(){b.hide(),c.effects.restore(b,o),c.effects.removeWrapper(b),a.callback&&a.callback.apply(this,arguments)})}else{var z={},A={};z[v]=(w=="pos"?"-=":"+=")+s,A[v]=(w=="pos"?"+=":"-=")+s,b.animate(z,u/2,a.options.easing).animate(A,u/2,a.options.easing,function(){c.effects.restore(b,o),c.effects.removeWrapper(b),a.callback&&a.callback.apply(this,arguments)})}b.queue("fx",function(){b.dequeue()}),b.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.clip=function(a){return this.queue(function(){var b=c(this),l=["position","top","bottom","left","right","height","width"],m=c.effects.setMode(b,a.options.mode||"hide"),n=a.options.direction||"vertical";c.effects.save(b,l),b.show();var o=c.effects.createWrapper(b).css({overflow:"hidden"}),p=b[0].tagName=="IMG"?o:b,q={size:n=="vertical"?"height":"width",position:n=="vertical"?"top":"left"},r=n=="vertical"?p.height():p.width();m=="show"&&(p.css(q.size,0),p.css(q.position,r/2));var s={};s[q.size]=m=="show"?r:0,s[q.position]=m=="show"?0:r/2,p.animate(s,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){m=="hide"&&b.hide(),c.effects.restore(b,l),c.effects.removeWrapper(b),a.callback&&a.callback.apply(b[0],arguments),b.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.drop=function(a){return this.queue(function(){var b=c(this),k=["position","top","bottom","left","right","opacity"],l=c.effects.setMode(b,a.options.mode||"hide"),m=a.options.direction||"left";c.effects.save(b,k),b.show(),c.effects.createWrapper(b);var n=m=="up"||m=="down"?"top":"left",o=m=="up"||m=="left"?"pos":"neg",p=a.options.distance||(n=="top"?b.outerHeight({margin:!0})/2:b.outerWidth({margin:!0})/2);l=="show"&&b.css("opacity",0).css(n,o=="pos"?-p:p);var q={opacity:l=="show"?1:0};q[n]=(l=="show"?o=="pos"?"+=":"-=":o=="pos"?"-=":"+=")+p,b.animate(q,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){l=="hide"&&b.hide(),c.effects.restore(b,k),c.effects.removeWrapper(b),a.callback&&a.callback.apply(this,arguments),b.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.explode=function(a){return this.queue(function(){var b=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,k=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode=a.options.mode=="toggle"?c(this).is(":visible")?"hide":"show":a.options.mode;var l=c(this).show().css("visibility","hidden"),m=l.offset();m.top-=parseInt(l.css("marginTop"),10)||0,m.left-=parseInt(l.css("marginLeft"),10)||0;var n=l.outerWidth(!0),o=l.outerHeight(!0);for(var p=0;p<b;p++){for(var q=0;q<k;q++){l.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-q*(n/k),top:-p*(o/b)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:n/k,height:o/b,left:m.left+q*(n/k)+(a.options.mode=="show"?(q-Math.floor(k/2))*(n/k):0),top:m.top+p*(o/b)+(a.options.mode=="show"?(p-Math.floor(b/2))*(o/b):0),opacity:a.options.mode=="show"?0:1}).animate({left:m.left+q*(n/k)+(a.options.mode=="show"?0:(q-Math.floor(k/2))*(n/k)),top:m.top+p*(o/b)+(a.options.mode=="show"?0:(p-Math.floor(b/2))*(o/b)),opacity:a.options.mode=="show"?1:0},a.duration||500)}}setTimeout(function(){a.options.mode=="show"?l.css({visibility:"visible"}):l.css({visibility:"visible"}).hide(),a.callback&&a.callback.apply(l[0]),l.dequeue(),c("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.fade=function(a){return this.queue(function(){var b=c(this),e=c.effects.setMode(b,a.options.mode||"hide");b.animate({opacity:e},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments),b.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.fold=function(a){return this.queue(function(){var b=c(this),o=["position","top","bottom","left","right"],q=c.effects.setMode(b,a.options.mode||"hide"),r=a.options.size||15,s=!!a.options.horizFirst,t=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,o),b.show();var u=c.effects.createWrapper(b).css({overflow:"hidden"}),v=q=="show"!=s,w=v?["width","height"]:["height","width"],x=v?[u.width(),u.height()]:[u.height(),u.width()],y=/([0-9]+)%/.exec(r);y&&(r=parseInt(y[1],10)/100*x[q=="hide"?0:1]),q=="show"&&u.css(s?{height:0,width:r}:{height:r,width:0});var z={},A={};z[w[0]]=q=="show"?x[0]:r,A[w[1]]=q=="show"?x[1]:0,u.animate(z,t,a.options.easing).animate(A,t,a.options.easing,function(){q=="hide"&&b.hide(),c.effects.restore(b,o),c.effects.removeWrapper(b),a.callback&&a.callback.apply(b[0],arguments),b.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.highlight=function(a){return this.queue(function(){var b=c(this),h=["backgroundImage","backgroundColor","opacity"],i=c.effects.setMode(b,a.options.mode||"show"),j={backgroundColor:b.css("backgroundColor")};i=="hide"&&(j.opacity=0),c.effects.save(b,h),b.show().css({backgroundImage:"none",backgroundColor:a.options.color||"#ffff99"}).animate(j,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){i=="hide"&&b.hide(),c.effects.restore(b,h),i=="show"&&!c.support.opacity&&this.style.removeAttribute("filter"),a.callback&&a.callback.apply(this,arguments),b.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.pulsate=function(a){return this.queue(function(){var b=c(this),j=c.effects.setMode(b,a.options.mode||"show"),k=(a.options.times||5)*2-1,l=a.duration?a.duration/2:c.fx.speeds._default/2,m=b.is(":visible"),n=0;m||(b.css("opacity",0).show(),n=1),(j=="hide"&&m||j=="show"&&!m)&&k--;for(var o=0;o<k;o++){b.animate({opacity:n},l,a.options.easing),n=(n+1)%2}b.animate({opacity:n},l,a.options.easing,function(){n==0&&b.hide(),a.callback&&a.callback.apply(this,arguments)}),b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.puff=function(a){return this.queue(function(){var b=c(this),h=c.effects.setMode(b,a.options.mode||"hide"),i=parseInt(a.options.percent,10)||150,j=i/100,k={height:b.height(),width:b.width()};c.extend(a.options,{fade:!0,mode:h,percent:h=="hide"?i:100,from:h=="hide"?k:{height:k.height*j,width:k.width*j}}),b.effect("scale",a.options,a.duration,a.callback),b.dequeue()})},c.effects.scale=function(a){return this.queue(function(){var b=c(this),k=c.extend(!0,{},a.options),l=c.effects.setMode(b,a.options.mode||"effect"),m=parseInt(a.options.percent,10)||(parseInt(a.options.percent,10)==0?0:l=="hide"?0:100),n=a.options.direction||"both",o=a.options.origin;l!="effect"&&(k.origin=o||["middle","center"],k.restore=!0);var p={height:b.height(),width:b.width()};b.from=a.options.from||(l=="show"?{height:0,width:0}:p);var q={y:n!="horizontal"?m/100:1,x:n!="vertical"?m/100:1};b.to={height:p.height*q.y,width:p.width*q.x},a.options.fade&&(l=="show"&&(b.from.opacity=0,b.to.opacity=1),l=="hide"&&(b.from.opacity=1,b.to.opacity=0)),k.from=b.from,k.to=b.to,k.mode=l,b.effect("size",k,a.duration,a.callback),b.dequeue()})},c.effects.size=function(a){return this.queue(function(){var b=c(this),o=["position","top","bottom","left","right","width","height","overflow","opacity"],r=["position","top","bottom","left","right","overflow","opacity"],s=["width","height","overflow"],t=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],v=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],w=c.effects.setMode(b,a.options.mode||"effect"),x=a.options.restore||!1,y=a.options.scale||"both",z=a.options.origin,A={height:b.height(),width:b.width()};b.from=a.options.from||A,b.to=a.options.to||A;if(z){var B=c.effects.getBaseline(z,A);b.from.top=(A.height-b.from.height)*B.y,b.from.left=(A.width-b.from.width)*B.x,b.to.top=(A.height-b.to.height)*B.y,b.to.left=(A.width-b.to.width)*B.x}var C={from:{y:b.from.height/A.height,x:b.from.width/A.width},to:{y:b.to.height/A.height,x:b.to.width/A.width}};if(y=="box"||y=="both"){C.from.y!=C.to.y&&(o=o.concat(u),b.from=c.effects.setTransition(b,u,C.from.y,b.from),b.to=c.effects.setTransition(b,u,C.to.y,b.to)),C.from.x!=C.to.x&&(o=o.concat(v),b.from=c.effects.setTransition(b,v,C.from.x,b.from),b.to=c.effects.setTransition(b,v,C.to.x,b.to))}(y=="content"||y=="both")&&C.from.y!=C.to.y&&(o=o.concat(t),b.from=c.effects.setTransition(b,t,C.from.y,b.from),b.to=c.effects.setTransition(b,t,C.to.y,b.to)),c.effects.save(b,x?o:r),b.show(),c.effects.createWrapper(b),b.css("overflow","hidden").css(b.from);if(y=="content"||y=="both"){u=u.concat(["marginTop","marginBottom"]).concat(t),v=v.concat(["marginLeft","marginRight"]),s=o.concat(u).concat(v),b.find("*[width]").each(function(){var e=c(this);x&&c.effects.save(e,s);var f={height:e.height(),width:e.width()};e.from={height:f.height*C.from.y,width:f.width*C.from.x},e.to={height:f.height*C.to.y,width:f.width*C.to.x},C.from.y!=C.to.y&&(e.from=c.effects.setTransition(e,u,C.from.y,e.from),e.to=c.effects.setTransition(e,u,C.to.y,e.to)),C.from.x!=C.to.x&&(e.from=c.effects.setTransition(e,v,C.from.x,e.from),e.to=c.effects.setTransition(e,v,C.to.x,e.to)),e.css(e.from),e.animate(e.to,a.duration,a.options.easing,function(){x&&c.effects.restore(e,s)})})}b.animate(b.to,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){b.to.opacity===0&&b.css("opacity",b.from.opacity),w=="hide"&&b.hide(),c.effects.restore(b,x?o:r),c.effects.removeWrapper(b),a.callback&&a.callback.apply(this,arguments),b.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.shake=function(a){return this.queue(function(){var b=c(this),o=["position","top","bottom","left","right"],q=c.effects.setMode(b,a.options.mode||"effect"),r=a.options.direction||"left",s=a.options.distance||20,t=a.options.times||3,u=a.duration||a.options.duration||140;c.effects.save(b,o),b.show(),c.effects.createWrapper(b);var v=r=="up"||r=="down"?"top":"left",w=r=="up"||r=="left"?"pos":"neg",x={},y={},z={};x[v]=(w=="pos"?"-=":"+=")+s,y[v]=(w=="pos"?"+=":"-=")+s*2,z[v]=(w=="pos"?"-=":"+=")+s*2,b.animate(x,u,a.options.easing);for(var A=1;A<t;A++){b.animate(y,u,a.options.easing).animate(z,u,a.options.easing)}b.animate(y,u,a.options.easing).animate(x,u/2,a.options.easing,function(){c.effects.restore(b,o),c.effects.removeWrapper(b),a.callback&&a.callback.apply(this,arguments)}),b.queue("fx",function(){b.dequeue()}),b.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.slide=function(a){return this.queue(function(){var b=c(this),k=["position","top","bottom","left","right"],l=c.effects.setMode(b,a.options.mode||"show"),m=a.options.direction||"left";c.effects.save(b,k),b.show(),c.effects.createWrapper(b).css({overflow:"hidden"});var n=m=="up"||m=="down"?"top":"left",o=m=="up"||m=="left"?"pos":"neg",p=a.options.distance||(n=="top"?b.outerHeight({margin:!0}):b.outerWidth({margin:!0}));l=="show"&&b.css(n,o=="pos"?isNaN(p)?"-"+p:-p:p);var q={};q[n]=(l=="show"?o=="pos"?"+=":"-=":o=="pos"?"-=":"+=")+p,b.animate(q,{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){l=="hide"&&b.hide(),c.effects.restore(b,k),c.effects.removeWrapper(b),a.callback&&a.callback.apply(this,arguments),b.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(c,d){c.effects.transfer=function(a){return this.queue(function(){var b=c(this),i=c(a.options.to),j=i.offset(),k={top:j.top,left:j.left,height:i.innerHeight(),width:i.innerWidth()},l=b.offset(),m=c('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:l.top,left:l.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(k,a.duration,a.options.easing,function(){m.remove(),a.callback&&a.callback.apply(b[0],arguments),b.dequeue()})})}})(jQuery);window.Modernizr=function(z,A,B){function S(b){H.cssText=b}function T(c,d){return S(prefixes.join(c+";")+(d||""))}function U(c,d){return typeof c===d}function V(c,d){return !!~(""+c).indexOf(d)}function W(c,g,h){for(var i in c){var j=g[c[i]];if(j!==B){return h===!1?c[i]:U(j,"function")?j.bind(h||g):j}}return !1}var C="2.6.2",D={},E=A.documentElement,F="modernizr",G=A.createElement(F),H=G.style,I,J={}.toString,K={},L={},M={},N=[],O=N.slice,P,Q={}.hasOwnProperty,R;!U(Q,"undefined")&&!U(Q.call,"undefined")?R=function(c,d){return Q.call(c,d)}:R=function(c,d){return d in c&&U(c.constructor.prototype[d],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var f=this;if(typeof f!="function"){throw new TypeError}var g=O.call(arguments,1),h=function(){if(this instanceof h){var b=function(){};b.prototype=f.prototype;var c=new b,d=f.apply(c,g.concat(O.call(arguments)));return Object(d)===d?d:c}return f.apply(a,g.concat(O.call(arguments)))};return h}),K.geolocation=function(){return"geolocation" in navigator};for(var X in K){R(K,X)&&(P=X.toLowerCase(),D[P]=K[X](),N.push((D[P]?"":"no-")+P))}return D.addTest=function(c,e){if(typeof c=="object"){for(var f in c){R(c,f)&&D.addTest(f,c[f])}}else{c=c.toLowerCase();if(D[c]!==B){return D}e=typeof e=="function"?e():e,typeof enableClasses!="undefined"&&enableClasses&&(E.className+=" "+(e?"":"no-")+c),D[c]=e}return D},S(""),G=I=null,D._version=C,D}(this,this.document);/* http://mths.be/placeholder v2.0.7 by @mathias */
(function(l,d,a){var f="placeholder" in d.createElement("input"),g="placeholder" in d.createElement("textarea"),i=a.fn,k=a.valHooks,e,h;if(f&&g){h=i.placeholder=function(){return this};h.input=h.textarea=true}else{h=i.placeholder=function(){var m=this;m.filter((f?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":c,"blur.placeholder":j}).data("placeholder-enabled",true).trigger("blur.placeholder");return m};h.input=f;h.textarea=g;e={get:function(n){var m=a(n);return m.data("placeholder-enabled")&&m.hasClass("placeholder")?"":n.value},set:function(n,o){var m=a(n);if(!m.data("placeholder-enabled")){return n.value=o}if(o==""){n.value=o;if(n!=d.activeElement){j.call(n)}}else{if(m.hasClass("placeholder")){c.call(n,true,o)||(n.value=o)}else{n.value=o}}return m}};f||(k.input=e);g||(k.textarea=e);a(function(){a(d).delegate("form","submit.placeholder",function(){var m=a(".placeholder",this).each(c);setTimeout(function(){m.each(j)},10)})});a(l).bind("beforeunload.placeholder",function(){a(".placeholder").each(function(){this.value=""})})}function b(m){var n={},o=/^jQuery\d+$/;a.each(m.attributes,function(q,p){if(p.specified&&!o.test(p.name)){n[p.name]=p.value}});return n}function c(n,p){var o=this,m=a(o);if(o.value==m.attr("placeholder")&&m.hasClass("placeholder")){if(m.data("placeholder-password")){m=m.hide().next().show().attr("id",m.removeAttr("id").data("placeholder-id"));if(n===true){return m[0].value=p}m.focus()}else{o.value="";m.removeClass("placeholder");o==d.activeElement&&o.select()}}}function j(){var o,r=this,m=a(r),n=m,q=this.id;if(r.value==""){if(r.type=="password"){if(!m.data("placeholder-textinput")){try{o=m.clone().attr({type:"text"})}catch(p){o=a("<input>").attr(a.extend(b(this),{type:"text"}))}o.removeAttr("name").data({"placeholder-password":true,"placeholder-id":q}).bind("focus.placeholder",c);m.data({"placeholder-textinput":o,"placeholder-id":q}).before(o)}m=m.removeAttr("id").hide().prev().attr("id",q).show()}m.addClass("placeholder");m[0].value=m.attr("placeholder")}else{m.removeClass("placeholder")}}}(this,document,jQuery));!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(l){function m(a){var c=a||window.event,d=t.call(arguments,1),e=0,f=0,i=0,k=0,w=0,x=0;if(a=l.event.fix(c),a.type="mousewheel","detail" in c&&(i=-1*c.detail),"wheelDelta" in c&&(i=c.wheelDelta),"wheelDeltaY" in c&&(i=c.wheelDeltaY),"wheelDeltaX" in c&&(f=-1*c.wheelDeltaX),"axis" in c&&c.axis===c.HORIZONTAL_AXIS&&(f=-1*i,i=0),e=0===i?f:i,"deltaY" in c&&(i=-1*c.deltaY,e=i),"deltaX" in c&&(f=c.deltaX,0===i&&(e=-1*f)),0!==i||0!==f){if(1===c.deltaMode){var y=l.data(this,"mousewheel-line-height");e*=y,i*=y,f*=y}else{if(2===c.deltaMode){var z=l.data(this,"mousewheel-page-height");e*=z,i*=z,f*=z}}if(k=Math.max(Math.abs(i),Math.abs(f)),(!q||q>k)&&(q=k,o(c,k)&&(q/=40)),o(c,k)&&(e/=40,f/=40,i/=40),e=Math[e>=1?"floor":"ceil"](e/q),f=Math[f>=1?"floor":"ceil"](f/q),i=Math[i>=1?"floor":"ceil"](i/q),v.settings.normalizeOffset&&this.getBoundingClientRect){var A=this.getBoundingClientRect();w=a.clientX-A.left,x=a.clientY-A.top}return a.deltaX=f,a.deltaY=i,a.deltaFactor=q,a.offsetX=w,a.offsetY=x,a.deltaMode=0,d.unshift(a,e,f,i),p&&clearTimeout(p),p=setTimeout(n,200),(l.event.dispatch||l.event.handle).apply(this,d)}}function n(){q=null}function o(c,d){return v.settings.adjustOldDeltas&&"mousewheel"===c.type&&d%120===0}var p,q,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],t=Array.prototype.slice;if(l.event.fixHooks){for(var u=r.length;u;){l.event.fixHooks[r[--u]]=l.event.mouseHooks}}var v=l.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var a=s.length;a;){this.addEventListener(s[--a],m,!1)}}else{this.onmousewheel=m}l.data(this,"mousewheel-line-height",v.getLineHeight(this)),l.data(this,"mousewheel-page-height",v.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=s.length;a;){this.removeEventListener(s[--a],m,!1)}}else{this.onmousewheel=null}l.removeData(this,"mousewheel-line-height"),l.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){var e=l(a),f=e["offsetParent" in l.fn?"offsetParent":"parent"]();return f.length||(f=l("body")),parseInt(f.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(a){return l(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};l.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(l){function m(a){var c=a||window.event,d=t.call(arguments,1),e=0,f=0,i=0,k=0,w=0,x=0;if(a=l.event.fix(c),a.type="mousewheel","detail" in c&&(i=-1*c.detail),"wheelDelta" in c&&(i=c.wheelDelta),"wheelDeltaY" in c&&(i=c.wheelDeltaY),"wheelDeltaX" in c&&(f=-1*c.wheelDeltaX),"axis" in c&&c.axis===c.HORIZONTAL_AXIS&&(f=-1*i,i=0),e=0===i?f:i,"deltaY" in c&&(i=-1*c.deltaY,e=i),"deltaX" in c&&(f=c.deltaX,0===i&&(e=-1*f)),0!==i||0!==f){if(1===c.deltaMode){var y=l.data(this,"mousewheel-line-height");e*=y,i*=y,f*=y}else{if(2===c.deltaMode){var z=l.data(this,"mousewheel-page-height");e*=z,i*=z,f*=z}}if(k=Math.max(Math.abs(i),Math.abs(f)),(!q||q>k)&&(q=k,o(c,k)&&(q/=40)),o(c,k)&&(e/=40,f/=40,i/=40),e=Math[e>=1?"floor":"ceil"](e/q),f=Math[f>=1?"floor":"ceil"](f/q),i=Math[i>=1?"floor":"ceil"](i/q),v.settings.normalizeOffset&&this.getBoundingClientRect){var A=this.getBoundingClientRect();w=a.clientX-A.left,x=a.clientY-A.top}return a.deltaX=f,a.deltaY=i,a.deltaFactor=q,a.offsetX=w,a.offsetY=x,a.deltaMode=0,d.unshift(a,e,f,i),p&&clearTimeout(p),p=setTimeout(n,200),(l.event.dispatch||l.event.handle).apply(this,d)}}function n(){q=null}function o(c,d){return v.settings.adjustOldDeltas&&"mousewheel"===c.type&&d%120===0}var p,q,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],t=Array.prototype.slice;if(l.event.fixHooks){for(var u=r.length;u;){l.event.fixHooks[r[--u]]=l.event.mouseHooks}}var v=l.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var a=s.length;a;){this.addEventListener(s[--a],m,!1)}}else{this.onmousewheel=m}l.data(this,"mousewheel-line-height",v.getLineHeight(this)),l.data(this,"mousewheel-page-height",v.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=s.length;a;){this.removeEventListener(s[--a],m,!1)}}else{this.onmousewheel=null}l.removeData(this,"mousewheel-line-height"),l.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){var e=l(a),f=e["offsetParent" in l.fn?"offsetParent":"parent"]();return f.length||(f=l("body")),parseInt(f.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(a){return l(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};l.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});!function(a){"undefined"!=typeof module&&module.exports?module.exports=a:a(jQuery,window,document)}(function(a){!function(f){var e="function"==typeof define&&define.amd,b="undefined"!=typeof module&&module.exports,d="https:"==document.location.protocol?"https:":"http:",c="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";e||(b?require("jquery-mousewheel")(a):a.event.special.mousewheel||a("head").append(decodeURI("%3Cscript src="+d+"//"+c+"%3E%3C/script%3E"))),f()}(function(){var aP,aE="mCustomScrollbar",ab="mCS",aC=".mCustomScrollbar",ar={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},aL=0,ay={},aN=window.attachEvent&&!window.addEventListener?1:0,af=!1,ah=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],aS={init:function(g){var g=a.extend(!0,{},ar,g),d=al.call(this);if(g.live){var f=g.liveSelector||this.selector||aC,b=a(f);if("off"===g.live){return void aA(f)}ay[f]=setTimeout(function(){b.mCustomScrollbar(g),"once"===g.live&&b.length&&aA(f)},500)}else{aA(f)}return g.setWidth=g.set_width?g.set_width:g.setWidth,g.setHeight=g.set_height?g.set_height:g.setHeight,g.axis=g.horizontalScroll?"x":aH(g.axis),g.scrollInertia=g.scrollInertia>0&&g.scrollInertia<17?17:g.scrollInertia,"object"!=typeof g.mouseWheel&&1==g.mouseWheel&&(g.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),g.mouseWheel.scrollAmount=g.mouseWheelPixels?g.mouseWheelPixels:g.mouseWheel.scrollAmount,g.mouseWheel.normalizeDelta=g.advanced.normalizeMouseWheelDelta?g.advanced.normalizeMouseWheelDelta:g.mouseWheel.normalizeDelta,g.scrollButtons.scrollType=an(g.scrollButtons.scrollType),ap(g),a(d).each(function(){var p=a(this);if(!p.data(ab)){p.data(ab,{idx:++aL,opt:g,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:p.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var m=p.data(ab),j=m.opt,k=p.data("mcs-axis"),q=p.data("mcs-scrollbar-position"),h=p.data("mcs-theme");k&&(j.axis=k),q&&(j.scrollbarPosition=q),h&&(j.theme=h,ap(j)),aU.call(this),m&&j.callbacks.onCreate&&"function"==typeof j.callbacks.onCreate&&j.callbacks.onCreate.call(this),a("#mCSB_"+m.idx+"_container img:not(."+ah[2]+")").addClass(ah[2]),aS.update.call(null,p)}})},update:function(d,c){var b=d||al.call(this);return a(b).each(function(){var o=a(this);if(o.data(ab)){var j=o.data(ab),g=j.opt,k=a("#mCSB_"+j.idx+"_container"),h=a("#mCSB_"+j.idx),m=[a("#mCSB_"+j.idx+"_dragger_vertical"),a("#mCSB_"+j.idx+"_dragger_horizontal")];if(!k.length){return}j.tweenRunning&&aD(o),c&&j&&g.callbacks.onBeforeUpdate&&"function"==typeof g.callbacks.onBeforeUpdate&&g.callbacks.onBeforeUpdate.call(this),o.hasClass(ah[3])&&o.removeClass(ah[3]),o.hasClass(ah[4])&&o.removeClass(ah[4]),h.css("max-height","none"),h.height()!==o.height()&&h.css("max-height",o.height()),aa.call(this),"y"===g.axis||g.advanced.autoExpandHorizontalScroll||k.css("width",aY(k)),j.overflowed=a0.call(this),aB.call(this),g.autoDraggerLength&&aO.call(this),ad.call(this),aQ.call(this);var f=[Math.abs(k[0].offsetTop),Math.abs(k[0].offsetLeft)];"x"!==g.axis&&(j.overflowed[0]?m[0].height()>m[0].parent().height()?ae.call(this):(aV(o,f[0].toString(),{dir:"y",dur:0,overwrite:"none"}),j.contentReset.y=null):(ae.call(this),"y"===g.axis?aw.call(this):"yx"===g.axis&&j.overflowed[1]&&aV(o,f[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==g.axis&&(j.overflowed[1]?m[1].width()>m[1].parent().width()?ae.call(this):(aV(o,f[1].toString(),{dir:"x",dur:0,overwrite:"none"}),j.contentReset.x=null):(ae.call(this),"x"===g.axis?aw.call(this):"yx"===g.axis&&j.overflowed[0]&&aV(o,f[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),c&&j&&(2===c&&g.callbacks.onImageLoad&&"function"==typeof g.callbacks.onImageLoad?g.callbacks.onImageLoad.call(this):3===c&&g.callbacks.onSelectorChange&&"function"==typeof g.callbacks.onSelectorChange?g.callbacks.onSelectorChange.call(this):g.callbacks.onUpdate&&"function"==typeof g.callbacks.onUpdate&&g.callbacks.onUpdate.call(this)),aZ.call(this)}})},scrollTo:function(d,c){if("undefined"!=typeof d&&null!=d){var b=al.call(this);return a(b).each(function(){var k=a(this);if(k.data(ab)){var h=k.data(ab),m=h.opt,j={trigger:"external",scrollInertia:m.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},o=a.extend(!0,{},j,c),f=aJ.call(this,d),g=o.scrollInertia>0&&o.scrollInertia<17?17:o.scrollInertia;f[0]=a1.call(this,f[0],"y"),f[1]=a1.call(this,f[1],"x"),o.moveDragger&&(f[0]*=h.scrollRatio.y,f[1]*=h.scrollRatio.x),o.dur=aG()?0:g,setTimeout(function(){null!==f[0]&&"undefined"!=typeof f[0]&&"x"!==m.axis&&h.overflowed[0]&&(o.dir="y",o.overwrite="all",aV(k,f[0].toString(),o)),null!==f[1]&&"undefined"!=typeof f[1]&&"y"!==m.axis&&h.overflowed[1]&&(o.dir="x",o.overwrite="none",aV(k,f[1].toString(),o))},o.timeout)}})}},stop:function(){var b=al.call(this);return a(b).each(function(){var c=a(this);c.data(ab)&&aD(c)})},disable:function(c){var b=al.call(this);return a(b).each(function(){var d=a(this);if(d.data(ab)){d.data(ab);aZ.call(this,"remove"),aw.call(this),c&&ae.call(this),aB.call(this,!0),d.addClass(ah[3])}})},destroy:function(){var b=al.call(this);return a(b).each(function(){var h=a(this);if(h.data(ab)){var f=h.data(ab),j=f.opt,g=a("#mCSB_"+f.idx),k=a("#mCSB_"+f.idx+"_container"),d=a(".mCSB_"+f.idx+"_scrollbar");j.live&&aA(j.liveSelector||a(b).selector),aZ.call(this,"remove"),aw.call(this),ae.call(this),h.removeData(ab),ax(this,"mcs"),d.remove(),k.find("img."+ah[2]).removeClass(ah[2]),g.replaceWith(k.contents()),h.removeClass(aE+" _"+ab+"_"+f.idx+" "+ah[6]+" "+ah[7]+" "+ah[5]+" "+ah[3]).addClass(ah[4])}})}},al=function(){return"object"!=typeof a(this)||a(this).length<1?aC:this},ap=function(h){var f=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],b=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],d=["minimal","minimal-dark"],c=["minimal","minimal-dark"],g=["minimal","minimal-dark"];h.autoDraggerLength=a.inArray(h.theme,f)>-1?!1:h.autoDraggerLength,h.autoExpandScrollbar=a.inArray(h.theme,b)>-1?!1:h.autoExpandScrollbar,h.scrollButtons.enable=a.inArray(h.theme,d)>-1?!1:h.scrollButtons.enable,h.autoHideScrollbar=a.inArray(h.theme,c)>-1?!0:h.autoHideScrollbar,h.scrollbarPosition=a.inArray(h.theme,g)>-1?"outside":h.scrollbarPosition},aA=function(b){ay[b]&&(clearTimeout(ay[b]),ax(ay,b))},aH=function(b){return"yx"===b||"xy"===b||"auto"===b?"yx":"x"===b||"horizontal"===b?"x":"y"},an=function(b){return"stepped"===b||"pixels"===b||"step"===b||"click"===b?"stepped":"stepless"},aU=function(){var A=a(this),w=A.data(ab),o=w.opt,y=o.autoExpandScrollbar?" "+ah[1]+"_expand":"",q=["<div id='mCSB_"+w.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+w.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+y+"'><div class='"+ah[12]+"'><div id='mCSB_"+w.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+w.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+w.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+y+"'><div class='"+ah[12]+"'><div id='mCSB_"+w.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],z="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",b="yx"===o.axis?q[0]+q[1]:"x"===o.axis?q[1]:q[0],B="yx"===o.axis?"<div id='mCSB_"+w.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",d=o.autoHideScrollbar?" "+ah[6]:"",k="x"!==o.axis&&"rtl"===w.langDir?" "+ah[7]:"";o.setWidth&&A.css("width",o.setWidth),o.setHeight&&A.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===w.langDir?"989999px":o.setLeft,A.addClass(aE+" _"+ab+"_"+w.idx+d+k).wrapInner("<div id='mCSB_"+w.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+z+"'><div id='mCSB_"+w.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir="+w.langDir+" /></div>");var v=a("#mCSB_"+w.idx),x=a("#mCSB_"+w.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||x.css("width",aY(x)),"outside"===o.scrollbarPosition?("static"===A.css("position")&&A.css("position","relative"),A.css("overflow","visible"),v.addClass("mCSB_outside").after(b)):(v.addClass("mCSB_inside").append(b),x.wrap(B)),aW.call(this);var j=[a("#mCSB_"+w.idx+"_dragger_vertical"),a("#mCSB_"+w.idx+"_dragger_horizontal")];j[0].css("min-height",j[0].height()),j[1].css("min-width",j[1].width())},aY=function(d){var c=[d[0].scrollWidth,Math.max.apply(Math,d.children().map(function(){return a(this).outerWidth(!0)}).get())],b=d.parent().width();return c[0]>b?c[0]:c[1]>b?c[1]:"100%"},aa=function(){var g=a(this),d=g.data(ab),c=d.opt,b=a("#mCSB_"+d.idx+"_container");if(c.advanced.autoExpandHorizontalScroll&&"y"!==c.axis){b.css({width:"auto","min-width":0,"overflow-x":"scroll"});var f=Math.ceil(b[0].scrollWidth);3===c.advanced.autoExpandHorizontalScroll||2!==c.advanced.autoExpandHorizontalScroll&&f>b.parent().width()?b.css({width:f,"min-width":"100%","overflow-x":"inherit"}):b.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(b[0].getBoundingClientRect().right+0.4)-Math.floor(b[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},aW=function(){var j=a(this),f=j.data(ab),d=f.opt,b=a(".mCSB_"+f.idx+"_scrollbar:first"),g=ak(d.scrollButtons.tabindex)?"tabindex='"+d.scrollButtons.tabindex+"'":"",c=["<a href='#' class='"+ah[13]+"' oncontextmenu='return false;' "+g+" />","<a href='#' class='"+ah[14]+"' oncontextmenu='return false;' "+g+" />","<a href='#' class='"+ah[15]+"' oncontextmenu='return false;' "+g+" />","<a href='#' class='"+ah[16]+"' oncontextmenu='return false;' "+g+" />"],h=["x"===d.axis?c[2]:c[0],"x"===d.axis?c[3]:c[1],c[2],c[3]];d.scrollButtons.enable&&b.prepend(h[0]).append(h[1]).next(".mCSB_scrollTools").prepend(h[2]).append(h[3])},aO=function(){var p=a(this),k=p.data(ab),j=a("#mCSB_"+k.idx),g=a("#mCSB_"+k.idx+"_container"),m=[a("#mCSB_"+k.idx+"_dragger_vertical"),a("#mCSB_"+k.idx+"_dragger_horizontal")],h=[j.height()/g.outerHeight(!1),j.width()/g.outerWidth(!1)],b=[parseInt(m[0].css("min-height")),Math.round(h[0]*m[0].parent().height()),parseInt(m[1].css("min-width")),Math.round(h[1]*m[1].parent().width())],f=aN&&b[1]<b[0]?b[0]:b[1],q=aN&&b[3]<b[2]?b[2]:b[3];m[0].css({height:f,"max-height":m[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":b[0]+"px"}),m[1].css({width:q,"max-width":m[1].parent().width()-10})},ad=function(){var j=a(this),f=j.data(ab),d=a("#mCSB_"+f.idx),b=a("#mCSB_"+f.idx+"_container"),g=[a("#mCSB_"+f.idx+"_dragger_vertical"),a("#mCSB_"+f.idx+"_dragger_horizontal")],c=[b.outerHeight(!1)-d.height(),b.outerWidth(!1)-d.width()],h=[c[0]/(g[0].parent().height()-g[0].height()),c[1]/(g[1].parent().width()-g[1].width())];f.scrollRatio={y:h[0],x:h[1]}},ag=function(c,g,f){var b=f?ah[0]+"_expanded":"",d=c.closest(".mCSB_scrollTools");"active"===g?(c.toggleClass(ah[0]+" "+b),d.toggleClass(ah[1]),c[0]._draggable=c[0]._draggable?0:1):c[0]._draggable||("hide"===g?(c.removeClass(ah[0]),d.removeClass(ah[1])):(c.addClass(ah[0]),d.addClass(ah[1])))},a0=function(){var m=a(this),h=m.data(ab),g=a("#mCSB_"+h.idx),d=a("#mCSB_"+h.idx+"_container"),j=null==h.overflowed?d.height():d.outerHeight(!1),f=null==h.overflowed?d.width():d.outerWidth(!1),k=d[0].scrollHeight,b=d[0].scrollWidth;return k>j&&(j=k),b>f&&(f=b),[j>g.height(),f>g.width()]},ae=function(){var j=a(this),f=j.data(ab),d=f.opt,b=a("#mCSB_"+f.idx),g=a("#mCSB_"+f.idx+"_container"),c=[a("#mCSB_"+f.idx+"_dragger_vertical"),a("#mCSB_"+f.idx+"_dragger_horizontal")];if(aD(j),("x"!==d.axis&&!f.overflowed[0]||"y"===d.axis&&f.overflowed[0])&&(c[0].add(g).css("top",0),aV(j,"_resetY")),"y"!==d.axis&&!f.overflowed[1]||"x"===d.axis&&f.overflowed[1]){var h=dx=0;"rtl"===f.langDir&&(h=b.width()-g.outerWidth(!1),dx=Math.abs(h/f.scrollRatio.x)),g.css("left",h),c[1].css("left",dx),aV(j,"_resetX")}},aQ=function(){function g(){f=setTimeout(function(){a.event.special.mousewheel?(clearTimeout(f),aM.call(d[0])):g()},100)}var d=a(this),c=d.data(ab),b=c.opt;if(!c.bindEvents){if(at.call(this),b.contentTouchScroll&&ai.call(this),aj.call(this),b.mouseWheel.enable){var f;g()}az.call(this),aI.call(this),b.advanced.autoScrollOnFocus&&a2.call(this),b.scrollButtons.enable&&aq.call(this),b.keyboard.enable&&aT.call(this),c.bindEvents=!0}},aw=function(){var j=a(this),f=j.data(ab),d=f.opt,b=ab+"_"+f.idx,g=".mCSB_"+f.idx+"_scrollbar",c=a("#mCSB_"+f.idx+",#mCSB_"+f.idx+"_container,#mCSB_"+f.idx+"_container_wrapper,"+g+" ."+ah[12]+",#mCSB_"+f.idx+"_dragger_vertical,#mCSB_"+f.idx+"_dragger_horizontal,"+g+">a"),h=a("#mCSB_"+f.idx+"_container");d.advanced.releaseDraggableSelectors&&c.add(a(d.advanced.releaseDraggableSelectors)),d.advanced.extraDraggableSelectors&&c.add(a(d.advanced.extraDraggableSelectors)),f.bindEvents&&(a(document).add(a(!aX()||top.document)).unbind("."+b),c.each(function(){a(this).unbind("."+b)}),clearTimeout(j[0]._focusTimeout),ax(j[0],"_focusTimeout"),clearTimeout(f.sequential.step),ax(f.sequential,"step"),clearTimeout(h[0].onCompleteTimeout),ax(h[0],"onCompleteTimeout"),f.bindEvents=!1)},aB=function(m){var h=a(this),g=h.data(ab),d=g.opt,j=a("#mCSB_"+g.idx+"_container_wrapper"),f=j.length?j:a("#mCSB_"+g.idx+"_container"),k=[a("#mCSB_"+g.idx+"_scrollbar_vertical"),a("#mCSB_"+g.idx+"_scrollbar_horizontal")],b=[k[0].find(".mCSB_dragger"),k[1].find(".mCSB_dragger")];"x"!==d.axis&&(g.overflowed[0]&&!m?(k[0].add(b[0]).add(k[0].children("a")).css("display","block"),f.removeClass(ah[8]+" "+ah[10])):(d.alwaysShowScrollbar?(2!==d.alwaysShowScrollbar&&b[0].css("display","none"),f.removeClass(ah[10])):(k[0].css("display","none"),f.addClass(ah[10])),f.addClass(ah[8]))),"y"!==d.axis&&(g.overflowed[1]&&!m?(k[1].add(b[1]).add(k[1].children("a")).css("display","block"),f.removeClass(ah[9]+" "+ah[11])):(d.alwaysShowScrollbar?(2!==d.alwaysShowScrollbar&&b[1].css("display","none"),f.removeClass(ah[11])):(k[1].css("display","none"),f.addClass(ah[11])),f.addClass(ah[9]))),g.overflowed[0]||g.overflowed[1]?h.removeClass(ah[5]):h.addClass(ah[5])},aF=function(h){var f=h.type,b=h.target.ownerDocument!==document?[a(frameElement).offset().top,a(frameElement).offset().left]:null,d=aX()&&h.target.ownerDocument!==top.document?[a(h.view.frameElement).offset().top,a(h.view.frameElement).offset().left]:[0,0];switch(f){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return b?[h.originalEvent.pageY-b[0]+d[0],h.originalEvent.pageX-b[1]+d[1],!1]:[h.originalEvent.pageY,h.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var c=h.originalEvent.touches[0]||h.originalEvent.changedTouches[0],g=h.originalEvent.touches.length||h.originalEvent.changedTouches.length;return h.target.ownerDocument!==document?[c.screenY,c.screenX,g>1]:[c.pageY,c.pageX,g>1];default:return b?[h.pageY-b[0]+d[0],h.pageX-b[1]+d[1],!1]:[h.pageY,h.pageX,!1]}},at=function(){function B(d){var g=w.find("iframe");if(g.length){var f=d?"auto":"none";g.css("pointer-events",f)}}function y(f,m,h,d){if(w[0].idleTimer=C.scrollInertia<233?250:0,x.attr("id")===k[1]){var g="x",l=(x[0].offsetLeft-m+d)*b.scrollRatio.x}else{var g="y",l=(x[0].offsetTop-f+h)*b.scrollRatio.y}aV(s,l.toString(),{dir:g,drag:!0})}var x,q,A,s=a(this),b=s.data(ab),C=b.opt,c=ab+"_"+b.idx,k=["mCSB_"+b.idx+"_dragger_vertical","mCSB_"+b.idx+"_dragger_horizontal"],w=a("#mCSB_"+b.idx+"_container"),z=a("#"+k[0]+",#"+k[1]),j=C.advanced.releaseDraggableSelectors?z.add(a(C.advanced.releaseDraggableSelectors)):z,D=C.advanced.extraDraggableSelectors?a(!aX()||top.document).add(a(C.advanced.extraDraggableSelectors)):a(!aX()||top.document);z.bind("mousedown."+c+" touchstart."+c+" pointerdown."+c+" MSPointerDown."+c,function(r){if(r.stopImmediatePropagation(),r.preventDefault(),a3(r)){af=!0,aN&&(document.onselectstart=function(){return !1}),B(!1),aD(s),x=a(this);var g=x.offset(),i=aF(r)[0]-g.top,l=aF(r)[1]-g.left,n=x.height()+g.top,p=x.width()+g.left;n>i&&i>0&&p>l&&l>0&&(q=i,A=l),ag(x,"active",C.autoExpandScrollbar)}}).bind("touchmove."+c,function(f){f.stopImmediatePropagation(),f.preventDefault();var h=x.offset(),d=aF(f)[0]-h.top,g=aF(f)[1]-h.left;y(q,A,d,g)}),a(document).add(D).bind("mousemove."+c+" pointermove."+c+" MSPointerMove."+c,function(f){if(x){var h=x.offset(),d=aF(f)[0]-h.top,g=aF(f)[1]-h.left;if(q===d&&A===g){return}y(q,A,d,g)}}).add(j).bind("mouseup."+c+" touchend."+c+" pointerup."+c+" MSPointerUp."+c,function(d){x&&(ag(x,"active",C.autoExpandScrollbar),x=null),af=!1,aN&&(document.onselectstart=null),B(!0)})},ai=function(){function a8(b){if(!e(b)||af||aF(b)[2]){return void (aP=0)}aP=1,q=0,F=0,G=1,bl.removeClass("mCS_touch_action");var d=X.offset();bg=aF(b)[0]-d.top,N=aF(b)[1]-d.left,bm=[aF(b)[0],aF(b)[1]]}function a7(d){if(e(d)&&!af&&!aF(d)[2]&&(bf.documentTouchScroll||d.preventDefault(),d.stopImmediatePropagation(),(!F||q)&&G)){O=ao();var u=a6.offset(),p=aF(d)[0]-u.top,b=aF(d)[1]-u.left,m="mcsLinearOut";if(K.push(p),bc.push(b),bm[2]=Math.abs(aF(d)[0]-bm[0]),bm[3]=Math.abs(aF(d)[1]-bm[1]),t.overflowed[0]){var g=J[0].parent().height()-J[0].height(),s=bg-p>0&&p-bg>-(g*t.scrollRatio.y)&&(2*bm[3]<bm[2]||"yx"===bf.axis)}if(t.overflowed[1]){var k=J[1].parent().width()-J[1].width(),f=N-b>0&&b-N>-(k*t.scrollRatio.x)&&(2*bm[2]<bm[3]||"yx"===bf.axis)}s||f?(bh||d.preventDefault(),q=1):(F=1,bl.addClass("mCS_touch_action")),bh&&d.preventDefault(),bj="yx"===bf.axis?[bg-p,N-b]:"x"===bf.axis?[null,N-b]:[bg-p,null],X[0].idleTimer=250,t.overflowed[0]&&bd(bj[0],j,m,"y","all",!0),t.overflowed[1]&&bd(bj[1],j,m,"x",a4,!0)}}function W(b){if(!e(b)||af||aF(b)[2]){return void (aP=0)}aP=1,b.stopImmediatePropagation(),aD(bl),a9=ao();var d=a6.offset();Q=aF(b)[0]-d.top,a5=aF(b)[1]-d.left,K=[],bc=[]}function bb(d){if(e(d)&&!af&&!aF(d)[2]){G=0,d.stopImmediatePropagation(),q=0,F=0,bi=ao();var p=a6.offset(),l=aF(d)[0]-p.top,b=aF(d)[1]-p.left;if(!(bi-O>30)){c=1000/(bi-a9);var k="mcsEaseOut",h=2.5>c,m=h?[K[K.length-2],bc[bc.length-2]]:[0,0];bk=h?[l-m[0],b-m[1]]:[l-Q,b-a5];var s=[Math.abs(bk[0]),Math.abs(bk[1])];c=h?[Math.abs(bk[0]/4),Math.abs(bk[1]/4)]:[c,c];var g=[Math.abs(X[0].offsetTop)-bk[0]*Z(s[0]/c[0],c[0]),Math.abs(X[0].offsetLeft)-bk[1]*Z(s[1]/c[1],c[1])];bj="yx"===bf.axis?[g[0],g[1]]:"x"===bf.axis?[null,g[1]]:[g[0],null],be=[4*s[0]+bf.scrollInertia,4*s[1]+bf.scrollInertia];var v=parseInt(bf.contentTouchScroll)||0;bj[0]=s[0]>v?bj[0]:0,bj[1]=s[1]>v?bj[1]:0,t.overflowed[0]&&bd(bj[0],be[0],k,"y",a4,!1),t.overflowed[1]&&bd(bj[1],be[1],k,"x",a4,!1)}}}function Z(b,f){var d=[1.5*f,2*f,f/1.5,f/2];return b>90?f>4?d[0]:d[3]:b>60?f>3?d[3]:d[2]:b>30?f>8?d[1]:f>6?d[0]:f>4?f:d[2]:f>8?f:d[3]}function bd(d,k,h,b,g,f){d&&aV(bl,d.toString(),{dur:k,scrollEasing:h,dir:b,overwrite:g,drag:f})}var G,bg,N,Q,a5,a9,O,bi,bk,c,bj,be,q,F,bl=a(this),t=bl.data(ab),bf=t.opt,Y=ab+"_"+t.idx,a6=a("#mCSB_"+t.idx),X=a("#mCSB_"+t.idx+"_container"),J=[a("#mCSB_"+t.idx+"_dragger_vertical"),a("#mCSB_"+t.idx+"_dragger_horizontal")],K=[],bc=[],j=0,a4="yx"===bf.axis?"none":"all",bm=[],ba=X.find("iframe"),V=["touchstart."+Y+" pointerdown."+Y+" MSPointerDown."+Y,"touchmove."+Y+" pointermove."+Y+" MSPointerMove."+Y,"touchend."+Y+" pointerup."+Y+" MSPointerUp."+Y],bh=void 0!==document.body.style.touchAction;X.bind(V[0],function(b){a8(b)}).bind(V[1],function(b){a7(b)}),a6.bind(V[0],function(b){W(b)}).bind(V[2],function(b){bb(b)}),ba.length&&ba.each(function(){a(this).load(function(){aX(this)&&a(this.contentDocument||this.contentWindow.document).bind(V[0],function(b){a8(b),W(b)}).bind(V[1],function(b){a7(b)}).bind(V[2],function(b){bb(b)})})})},aj=function(){function p(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function m(d,h,f){b.type=f&&j?"stepped":"stepless",b.scrollAmount=10,am(q,d,h,"mcsLinearOut",f?60:null)}var j,q=a(this),k=q.data(ab),t=k.opt,b=k.sequential,v=ab+"_"+k.idx,c=a("#mCSB_"+k.idx+"_container"),g=c.parent();c.bind("mousedown."+v,function(d){aP||j||(j=1,af=!0)}).add(document).bind("mousemove."+v,function(h){if(!aP&&j&&p()){var d=c.offset(),i=aF(h)[0]-d.top+c[0].offsetTop,f=aF(h)[1]-d.left+c[0].offsetLeft;i>0&&i<g.height()&&f>0&&f<g.width()?b.step&&m("off",null,"stepped"):("x"!==t.axis&&k.overflowed[0]&&(0>i?m("on",38):i>g.height()&&m("on",40)),"y"!==t.axis&&k.overflowed[1]&&(0>f?m("on",37):f>g.width()&&m("on",39)))}}).bind("mouseup."+v+" dragend."+v,function(d){aP||(j&&(j=0,m("off",null)),af=!1)})},aM=function(){function p(x,c){if(aD(k),!ac(k,x.target)){var w="auto"!==g.mouseWheel.deltaFactor?parseInt(g.mouseWheel.deltaFactor):aN&&x.deltaFactor<100?100:x.deltaFactor||100,i=g.scrollInertia;if("x"===g.axis||"x"===g.mouseWheel.axis){var y="x",l=[Math.round(w*j.scrollRatio.x),parseInt(g.mouseWheel.scrollAmount)],o="auto"!==g.mouseWheel.scrollAmount?l[1]:l[0]>=h.width()?0.9*h.width():l[0],q=Math.abs(a("#mCSB_"+j.idx+"_container")[0].offsetLeft),s=b[1][0].offsetLeft,n=b[1].parent().width()-b[1].width(),z=x.deltaX||x.deltaY||c}else{var y="y",l=[Math.round(w*j.scrollRatio.y),parseInt(g.mouseWheel.scrollAmount)],o="auto"!==g.mouseWheel.scrollAmount?l[1]:l[0]>=h.height()?0.9*h.height():l[0],q=Math.abs(a("#mCSB_"+j.idx+"_container")[0].offsetTop),s=b[0][0].offsetTop,n=b[0].parent().height()-b[0].height(),z=x.deltaY||c}"y"===y&&!j.overflowed[0]||"x"===y&&!j.overflowed[1]||((g.mouseWheel.invert||x.webkitDirectionInvertedFromDevice)&&(z=-z),g.mouseWheel.normalizeDelta&&(z=0>z?-1:1),(z>0&&0!==s||0>z&&s!==n||g.mouseWheel.preventDefault)&&(x.stopImmediatePropagation(),x.preventDefault()),x.deltaFactor<2&&!g.mouseWheel.normalizeDelta&&(o=x.deltaFactor,i=17),aV(k,(q-z*o).toString(),{dir:y,dur:i}))}}if(a(this).data(ab)){var k=a(this),j=k.data(ab),g=j.opt,m=ab+"_"+j.idx,h=a("#mCSB_"+j.idx),b=[a("#mCSB_"+j.idx+"_dragger_vertical"),a("#mCSB_"+j.idx+"_dragger_horizontal")],f=a("#mCSB_"+j.idx+"_container").find("iframe");f.length&&f.each(function(){a(this).load(function(){aX(this)&&a(this.contentDocument||this.contentWindow.document).bind("mousewheel."+m,function(c,d){p(c,d)})})}),h.bind("mousewheel."+m,function(c,d){p(c,d)})}},aX=function(c){var f=null;if(c){try{var d=c.contentDocument||c.contentWindow.document;f=d.body.innerHTML}catch(b){}return null!==f}try{var d=top.document;f=d.body.innerHTML}catch(b){}return null!==f},ac=function(g,d){var c=d.nodeName.toLowerCase(),b=g.data(ab).opt.mouseWheel.disableOver,f=["select","textarea"];return a.inArray(c,b)>-1&&!(a.inArray(c,f)>-1&&!a(d).is(":focus"))},az=function(){var j,f=a(this),d=f.data(ab),b=ab+"_"+d.idx,g=a("#mCSB_"+d.idx+"_container"),c=g.parent(),h=a(".mCSB_"+d.idx+"_scrollbar ."+ah[12]);h.bind("mousedown."+b+" touchstart."+b+" pointerdown."+b+" MSPointerDown."+b,function(i){af=!0,a(i.target).hasClass("mCSB_dragger")||(j=1)}).bind("touchend."+b+" pointerup."+b+" MSPointerUp."+b,function(i){af=!1}).bind("click."+b,function(k){if(j&&(j=0,a(k.target).hasClass(ah[12])||a(k.target).hasClass("mCSB_draggerRail"))){aD(f);var n=a(this),o=n.find(".mCSB_dragger");if(n.parent(".mCSB_scrollTools_horizontal").length>0){if(!d.overflowed[1]){return}var l="x",p=k.pageX>o.offset().left?-1:1,m=Math.abs(g[0].offsetLeft)-0.9*p*c.width()}else{if(!d.overflowed[0]){return}var l="y",p=k.pageY>o.offset().top?-1:1,m=Math.abs(g[0].offsetTop)-0.9*p*c.height()}aV(f,m.toString(),{dir:l,scrollEasing:"mcsEaseInOut"})}})},a2=function(){var h=a(this),f=h.data(ab),d=f.opt,b=ab+"_"+f.idx,g=a("#mCSB_"+f.idx+"_container"),c=g.parent();g.bind("focusin."+b,function(l){var j=a(document.activeElement),k=g.find(".mCustomScrollBox").length,m=0;j.is(d.advanced.autoScrollOnFocus)&&(aD(h),clearTimeout(h[0]._focusTimeout),h[0]._focusTimer=k?(m+17)*k:0,h[0]._focusTimeout=setTimeout(function(){var p=[aR(j)[0],aR(j)[1]],r=[g[0].offsetTop,g[0].offsetLeft],q=[r[0]+p[0]>=0&&r[0]+p[0]<c.height()-j.outerHeight(!1),r[1]+p[1]>=0&&r[0]+p[1]<c.width()-j.outerWidth(!1)],n="yx"!==d.axis||q[0]||q[1]?"all":"none";"x"===d.axis||q[0]||aV(h,p[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:n,dur:m}),"y"===d.axis||q[1]||aV(h,p[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:n,dur:m})},h[0]._focusTimer))})},aI=function(){var f=a(this),d=f.data(ab),c=ab+"_"+d.idx,b=a("#mCSB_"+d.idx+"_container").parent();b.bind("scroll."+c,function(g){(0!==b.scrollTop()||0!==b.scrollLeft())&&a(".mCSB_"+d.idx+"_scrollbar").css("visibility","hidden")})},aq=function(){var j=a(this),f=j.data(ab),d=f.opt,b=f.sequential,g=ab+"_"+f.idx,c=".mCSB_"+f.idx+"_scrollbar",h=a(c+">a");h.bind("mousedown."+g+" touchstart."+g+" pointerdown."+g+" MSPointerDown."+g+" mouseup."+g+" touchend."+g+" pointerup."+g+" MSPointerUp."+g+" mouseout."+g+" pointerout."+g+" MSPointerOut."+g+" click."+g,function(i){function m(l,n){b.scrollAmount=d.scrollButtons.scrollAmount,am(j,l,n)}if(i.preventDefault(),a3(i)){var k=a(this).attr("class");switch(b.type=d.scrollButtons.scrollType,i.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===b.type){return}af=!0,f.tweenRunning=!1,m("on",k);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===b.type){return}af=!1,b.dir&&m("off",k);break;case"click":if("stepped"!==b.type||f.tweenRunning){return}m("on",k)}}})},aT=function(){function y(u){function c(f,h){w.type=m.keyboard.scrollType,w.scrollAmount=m.keyboard.scrollAmount,"stepped"===w.type&&q.tweenRunning||am(v,f,h)}switch(u.type){case"blur":q.tweenRunning&&w.dir&&c("off",null);break;case"keydown":case"keyup":var n=u.keyCode?u.keyCode:u.which,r="on";if("x"!==m.axis&&(38===n||40===n)||"y"!==m.axis&&(37===n||39===n)){if((38===n||40===n)&&!q.overflowed[0]||(37===n||39===n)&&!q.overflowed[1]){return}"keyup"===u.type&&(r="off"),a(document.activeElement).is(z)||(u.preventDefault(),u.stopImmediatePropagation(),c(r,n))}else{if(33===n||34===n){if((q.overflowed[0]||q.overflowed[1])&&(u.preventDefault(),u.stopImmediatePropagation()),"keyup"===u.type){aD(v);var d=34===n?-1:1;if("x"===m.axis||"yx"===m.axis&&q.overflowed[1]&&!q.overflowed[0]){var i="x",o=Math.abs(b[0].offsetLeft)-0.9*d*g.width()}else{var i="y",o=Math.abs(b[0].offsetTop)-0.9*d*g.height()}aV(v,o.toString(),{dir:i,scrollEasing:"mcsEaseInOut"})}}else{if((35===n||36===n)&&!a(document.activeElement).is(z)&&((q.overflowed[0]||q.overflowed[1])&&(u.preventDefault(),u.stopImmediatePropagation()),"keyup"===u.type)){if("x"===m.axis||"yx"===m.axis&&q.overflowed[1]&&!q.overflowed[0]){var i="x",o=35===n?Math.abs(g.width()-b.outerWidth(!1)):0}else{var i="y",o=35===n?Math.abs(g.height()-b.outerHeight(!1)):0}aV(v,o.toString(),{dir:i,scrollEasing:"mcsEaseInOut"})}}}}}var v=a(this),q=v.data(ab),m=q.opt,w=q.sequential,p=ab+"_"+q.idx,x=a("#mCSB_"+q.idx),b=a("#mCSB_"+q.idx+"_container"),g=b.parent(),z="input,textarea,select,datalist,keygen,[contenteditable='true']",j=b.find("iframe"),k=["blur."+p+" keydown."+p+" keyup."+p];j.length&&j.each(function(){a(this).load(function(){aX(this)&&a(this.contentDocument||this.contentWindow.document).bind(k[0],function(c){y(c)})})}),x.attr("tabindex","0").bind(k[0],function(c){y(c)})},am=function(C,y,x,q,A){function v(h){D.snapAmount&&(d.scrollAmount=D.snapAmount instanceof Array?"x"===d.dir[0]?D.snapAmount[1]:D.snapAmount[0]:D.snapAmount);var p="stepped"!==d.type,f=A?A:h?p?z/1.5:j:1000/60,l=h?p?7.5:40:2.5,r=[Math.abs(k[0].offsetTop),Math.abs(k[0].offsetLeft)],g=[b.scrollRatio.y>10?10:b.scrollRatio.y,b.scrollRatio.x>10?10:b.scrollRatio.x],i="x"===d.dir[0]?r[1]+d.dir[1]*g[1]*l:r[0]+d.dir[1]*g[0]*l,t="x"===d.dir[0]?r[1]+d.dir[1]*parseInt(d.scrollAmount):r[0]+d.dir[1]*parseInt(d.scrollAmount),E="auto"!==d.scrollAmount?t:i,c=q?q:h?p?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",u=h?!0:!1;return h&&17>f&&(E="x"===d.dir[0]?r[1]:r[0]),aV(C,E.toString(),{dir:d.dir[0],scrollEasing:c,dur:f,onComplete:u}),h?void (d.dir=!1):(clearTimeout(d.step),void (d.step=setTimeout(function(){v()},f)))}function B(){clearTimeout(d.step),ax(d,"step"),aD(C)}var b=C.data(ab),D=b.opt,d=b.sequential,k=a("#mCSB_"+b.idx+"_container"),w="stepped"===d.type?!0:!1,z=D.scrollInertia<26?26:D.scrollInertia,j=D.scrollInertia<1?17:D.scrollInertia;switch(y){case"on":if(d.dir=[x===ah[16]||x===ah[15]||39===x||37===x?"x":"y",x===ah[13]||x===ah[15]||38===x||37===x?-1:1],aD(C),ak(x)&&"stepped"===d.type){return}v(w);break;case"off":B(),(w||b.tweenRunning&&d.dir)&&v(!0)}},aJ=function(d){var c=a(this).data(ab).opt,b=[];return"function"==typeof d&&(d=d()),d instanceof Array?b=d.length>1?[d[0],d[1]]:"x"===c.axis?[null,d[0]]:[d[0],null]:(b[0]=d.y?d.y:d.x||"x"===c.axis?null:d,b[1]=d.x?d.x:d.y||"y"===c.axis?null:d),"function"==typeof b[0]&&(b[0]=b[0]()),"function"==typeof b[1]&&(b[1]=b[1]()),b},a1=function(B,x){if(null!=B&&"undefined"!=typeof B){var w=a(this),q=w.data(ab),z=q.opt,u=a("#mCSB_"+q.idx+"_container"),A=u.parent(),b=typeof B;x||(x="x"===z.axis?"x":"y");var g="x"===x?u.outerWidth(!1):u.outerHeight(!1),j="x"===x?u[0].offsetLeft:u[0].offsetTop,k="x"===x?"left":"top";switch(b){case"function":return B();case"object":var v=B.jquery?B:a(B);if(!v.length){return}return"x"===x?aR(v)[1]:aR(v)[0];case"string":case"number":if(ak(B)){return Math.abs(B)}if(-1!==B.indexOf("%")){return Math.abs(g*parseInt(B)/100)}if(-1!==B.indexOf("-=")){return Math.abs(j-parseInt(B.split("-=")[1]))}if(-1!==B.indexOf("+=")){var y=j+parseInt(B.split("+=")[1]);return y>=0?0:Math.abs(y)}if(-1!==B.indexOf("px")&&ak(B.split("px")[0])){return Math.abs(B.split("px")[0])}if("top"===B||"left"===B){return 0}if("bottom"===B){return Math.abs(A.height()-u.outerHeight(!1))}if("right"===B){return Math.abs(A.width()-u.outerWidth(!1))}if("first"===B||"last"===B){var v=u.find(":"+B);return"x"===x?aR(v)[1]:aR(v)[0]}return a(B).length?"x"===x?aR(a(B))[1]:aR(a(B))[0]:(u.css(k,B),void aS.update.call(null,w[0]))}}},aZ=function(q){function k(){return clearTimeout(d[0].autoUpdate),0===h.parents("html").length?void (h=null):void (d[0].autoUpdate=setTimeout(function(){return b.advanced.updateOnSelectorChange&&(p.poll.change.n=g(),p.poll.change.n!==p.poll.change.o)?(p.poll.change.o=p.poll.change.n,void m(3)):b.advanced.updateOnContentResize&&(p.poll.size.n=h[0].scrollHeight+h[0].scrollWidth+d[0].offsetHeight+h[0].offsetHeight+h[0].offsetWidth,p.poll.size.n!==p.poll.size.o)?(p.poll.size.o=p.poll.size.n,void m(1)):!b.advanced.updateOnImageLoad||"auto"===b.advanced.updateOnImageLoad&&"y"===b.axis||(p.poll.img.n=d.find("img").length,p.poll.img.n===p.poll.img.o)?void ((b.advanced.updateOnSelectorChange||b.advanced.updateOnContentResize||b.advanced.updateOnImageLoad)&&k()):(p.poll.img.o=p.poll.img.n,void d.find("img").each(function(){j(this)}))},b.advanced.autoUpdateTimeout))}function j(l){function i(n,o){return function(){return o.apply(n,arguments)}}function c(){this.onload=null,a(l).addClass(ah[2]),m(2)}if(a(l).hasClass(ah[2])){return void m()}var f=new Image;f.onload=i(f,c),f.src=l.src}function g(){b.advanced.updateOnSelectorChange===!0&&(b.advanced.updateOnSelectorChange="*");var c=0,f=d.find(b.advanced.updateOnSelectorChange);return b.advanced.updateOnSelectorChange&&f.length>0&&f.each(function(){c+=this.offsetHeight+this.offsetWidth}),c}function m(c){clearTimeout(d[0].autoUpdate),aS.update.call(null,h[0],c)}var h=a(this),p=h.data(ab),b=p.opt,d=a("#mCSB_"+p.idx+"_container");return q?(clearTimeout(d[0].autoUpdate),void ax(d[0],"autoUpdate")):void k()},au=function(b,d,c){return Math.round(b/d)*d-c},aD=function(d){var c=d.data(ab),b=a("#mCSB_"+c.idx+"_container,#mCSB_"+c.idx+"_container_wrapper,#mCSB_"+c.idx+"_dragger_vertical,#mCSB_"+c.idx+"_dragger_horizontal");b.each(function(){av.call(this)})},aV=function(Q,L,K){function G(b){return O&&A.callbacks[b]&&"function"==typeof A.callbacks[b]}function N(){return[A.callbacks.alwaysTriggerOffsets||W>=P[0]+Y,A.callbacks.alwaysTriggerOffsets||-z>=W]}function I(){var c=[F[0].offsetTop,F[0].offsetLeft],f=[X[0].offsetTop,X[0].offsetLeft],b=[F.outerHeight(!1),F.outerWidth(!1)],d=[D.height(),D.width()];Q[0].mcs={content:F,top:c[0],left:c[1],draggerTop:f[0],draggerLeft:f[1],topPct:Math.round(100*Math.abs(c[0])/(Math.abs(b[0])-d[0])),leftPct:Math.round(100*Math.abs(c[1])/(Math.abs(b[1])-d[1])),direction:K.dir}}var O=Q.data(ab),A=O.opt,C={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:A.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},K=a.extend(C,K),U=[K.dur,K.drag?0:K.dur],D=a("#mCSB_"+O.idx),F=a("#mCSB_"+O.idx+"_container"),J=F.parent(),M=A.callbacks.onTotalScrollOffset?aJ.call(Q,A.callbacks.onTotalScrollOffset):[0,0],E=A.callbacks.onTotalScrollBackOffset?aJ.call(Q,A.callbacks.onTotalScrollBackOffset):[0,0];if(O.trigger=K.trigger,(0!==J.scrollTop()||0!==J.scrollLeft())&&(a(".mCSB_"+O.idx+"_scrollbar").css("visibility","visible"),J.scrollTop(0).scrollLeft(0)),"_resetY"!==L||O.contentReset.y||(G("onOverflowYNone")&&A.callbacks.onOverflowYNone.call(Q[0]),O.contentReset.y=1),"_resetX"!==L||O.contentReset.x||(G("onOverflowXNone")&&A.callbacks.onOverflowXNone.call(Q[0]),O.contentReset.x=1),"_resetY"!==L&&"_resetX"!==L){if(!O.contentReset.y&&Q[0].mcs||!O.overflowed[0]||(G("onOverflowY")&&A.callbacks.onOverflowY.call(Q[0]),O.contentReset.x=null),!O.contentReset.x&&Q[0].mcs||!O.overflowed[1]||(G("onOverflowX")&&A.callbacks.onOverflowX.call(Q[0]),O.contentReset.x=null),A.snapAmount){var V=A.snapAmount instanceof Array?"x"===K.dir?A.snapAmount[1]:A.snapAmount[0]:A.snapAmount;L=au(L,V,A.snapOffset)}switch(K.dir){case"x":var X=a("#mCSB_"+O.idx+"_dragger_horizontal"),j="left",W=F[0].offsetLeft,P=[D.width()-F.outerWidth(!1),X.parent().width()-X.width()],q=[L,0===L?0:L/O.scrollRatio.x],Y=M[1],z=E[1],R=Y>0?Y/O.scrollRatio.x:0,H=z>0?z/O.scrollRatio.x:0;break;case"y":var X=a("#mCSB_"+O.idx+"_dragger_vertical"),j="top",W=F[0].offsetTop,P=[D.height()-F.outerHeight(!1),X.parent().height()-X.height()],q=[L,0===L?0:L/O.scrollRatio.y],Y=M[0],z=E[0],R=Y>0?Y/O.scrollRatio.y:0,H=z>0?z/O.scrollRatio.y:0}q[1]<0||0===q[0]&&0===q[1]?q=[0,0]:q[1]>=P[1]?q=[P[0],P[1]]:q[0]=-q[0],Q[0].mcs||(I(),G("onInit")&&A.callbacks.onInit.call(Q[0])),clearTimeout(F[0].onCompleteTimeout),aK(X[0],j,Math.round(q[1]),U[1],K.scrollEasing),(O.tweenRunning||!(0===W&&q[0]>=0||W===P[0]&&q[0]<=P[0]))&&aK(F[0],j,Math.round(q[0]),U[0],K.scrollEasing,K.overwrite,{onStart:function(){K.callbacks&&K.onStart&&!O.tweenRunning&&(G("onScrollStart")&&(I(),A.callbacks.onScrollStart.call(Q[0])),O.tweenRunning=!0,ag(X),O.cbOffsets=N())},onUpdate:function(){K.callbacks&&K.onUpdate&&G("whileScrolling")&&(I(),A.callbacks.whileScrolling.call(Q[0]))},onComplete:function(){if(K.callbacks&&K.onComplete){"yx"===A.axis&&clearTimeout(F[0].onCompleteTimeout);var b=F[0].idleTimer||0;F[0].onCompleteTimeout=setTimeout(function(){G("onScroll")&&(I(),A.callbacks.onScroll.call(Q[0])),G("onTotalScroll")&&q[1]>=P[1]-R&&O.cbOffsets[0]&&(I(),A.callbacks.onTotalScroll.call(Q[0])),G("onTotalScrollBack")&&q[1]<=H&&O.cbOffsets[1]&&(I(),A.callbacks.onTotalScrollBack.call(Q[0])),O.tweenRunning=!1,F[0].idleTimer=0,ag(X,"hide")},b)}}})}},aK=function(A,N,I,k,H,E,K){function F(){M.stop||(R||G.call(),R=ao()-P,L(),R>=M.time&&(M.time=R>M.time?R+B-(R-M.time):R+B-1,M.time<R+1&&(M.time=R+1)),M.time<k?M.id=D(F):C.call())}function L(){k>0?(M.currVal=O(M.time,j,q,k,H),Q[N]=Math.round(M.currVal)+"px"):Q[N]=I+"px",J.call()}function y(){B=1000/60,M.time=R+B,D=window.requestAnimationFrame?window.requestAnimationFrame:function(b){return L(),setTimeout(b,0.01)},M.id=D(F)}function z(){null!=M.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(M.id):clearTimeout(M.id),M.id=null)}function O(c,l,g,b,f){switch(f){case"linear":case"mcsLinear":return g*c/b+l;case"mcsLinearOut":return c/=b,c--,g*Math.sqrt(1-c*c)+l;case"easeInOutSmooth":return c/=b/2,1>c?g/2*c*c+l:(c--,-g/2*(c*(c-2)-1)+l);case"easeInOutStrong":return c/=b/2,1>c?g/2*Math.pow(2,10*(c-1))+l:(c--,g/2*(-Math.pow(2,-10*c)+2)+l);case"easeInOut":case"mcsEaseInOut":return c/=b/2,1>c?g/2*c*c*c+l:(c-=2,g/2*(c*c*c+2)+l);case"easeOutSmooth":return c/=b,c--,-g*(c*c*c*c-1)+l;case"easeOutStrong":return g*(-Math.pow(2,-10*c/b)+1)+l;case"easeOut":case"mcsEaseOut":default:var d=(c/=b)*c,h=d*c;return l+g*(0.499999999999997*h*d+-2.5*d*d+5.5*h+-6.5*d+4*c)}}A._mTween||(A._mTween={top:{},left:{}});var B,D,K=K||{},G=K.onStart||function(){},J=K.onUpdate||function(){},C=K.onComplete||function(){},P=ao(),R=0,j=A.offsetTop,Q=A.style,M=A._mTween[N];"left"===N&&(j=A.offsetLeft);var q=I-j;M.stop=0,"none"!==E&&z(),y()},ao=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},av=function(){var c=this;c._mTween||(c._mTween={top:{},left:{}});for(var f=["top","left"],d=0;d<f.length;d++){var b=f[d];c._mTween[b].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(c._mTween[b].id):clearTimeout(c._mTween[b].id),c._mTween[b].id=null,c._mTween[b].stop=1)}},ax=function(b,d){try{delete b[d]}catch(c){b[d]=null}},a3=function(b){return !(b.which&&1!==b.which)},e=function(b){var c=b.originalEvent.pointerType;return !(c&&"touch"!==c&&2!==c)},ak=function(b){return !isNaN(parseFloat(b))&&isFinite(b)},aR=function(b){var c=b.parents(".mCSB_container");return[b.offset().top-c.offset().top,b.offset().left-c.offset().left]},aG=function(){function b(){var d=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var f=0;f<d.length;f++){if(d[f]+"Hidden" in document){return d[f]+"Hidden"}}return null}var c=b();return c?document[c]:!1};a.fn[aE]=function(b){return aS[b]?aS[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist"):aS.init.apply(this,arguments)},a[aE]=function(b){return aS[b]?aS[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist"):aS.init.apply(this,arguments)},a[aE].defaults=ar,window[aE]=!0,a(window).load(function(){a(aC)[aE](),a.extend(a.expr[":"],{mcsInView:a.expr[":"].mcsInView||function(g){var f,b,d=a(g),c=d.parents(".mCSB_container");if(c.length){return f=c.parent(),b=[c[0].offsetTop,c[0].offsetLeft],b[0]+aR(d)[0]>=0&&b[0]+aR(d)[0]<f.height()-d.outerHeight(!1)&&b[1]+aR(d)[1]>=0&&b[1]+aR(d)[1]<f.width()-d.outerWidth(!1)}},mcsOverflow:a.expr[":"].mcsOverflow||function(c){var b=a(c).data(ab);if(b){return b.overflowed[0]||b.overflowed[1]}}})})})});(function(){var a={getMajorBootstrapVersion:function(){if(!$||!$.fn||!$.fn.modal){return undefined}return typeof $.fn.typeahead!=="undefined"?2:3},addElementBootstrapClass:function(c){var b="data-bs"+c+"-class";$("["+b+"]").each(function(f,e){var d=e.getAttribute(b);if(d){d.split(" ").forEach(function(g){$(e).addClass(g)})}})}};$(function(){a.addElementBootstrapClass(a.getMajorBootstrapVersion());$(document).on("pagechange",function(){a.addElementBootstrapClass(a.getMajorBootstrapVersion())})});if(typeof rbw!=="undefined"&&rbw.ui){rbw.ui.BootstrapClassSwitch=a}})();var red;(function(b,a){var c;(function(e){var d=function(){};d.Set=function(f){a("*").css("cursor",f||"")};d.Wait=function(){d.Set("wait")};d.Normal=function(){d.Set("")};e.Cursor=d})(c=b.ui||(b.ui={}))})(red||(red={}),jQuery);var red;(function(a){var b;(function(d){var c=function(){};c.Initialize=function(f){if(!f||!f.locationbox){return}var e=c._GetLocationAutoCompleteOptions(f);f.locationbox.autocomplete("/Include/AJAX/MapSearch/GetLocations.aspx",e).result(function(h,g){if(!g){return}var i=e.formatItem(g);f.locationbox.data("selectionMade","true");f.locationbox.val(i);if(typeof f.result==="function"){f.result(i)}}).keydown(function(g){var h=(g==null)?0:g.keyCode;if(h===13&&g){g.preventDefault()}if(h!==13&&h!==9&&h!==27){f.locationbox.data("selectionMade","false")}})};c._FormatItem=function(e){if(!e){return""}var f=e.Name;if(e.City&&e.City.length){f+=", "+e.City}if(e.State&&e.State.length){f+=", "+e.State}if(e.Type){f+=" ("+e.Type+")"}return f};c._GetLocationAutoCompleteOptions=function(f){if(!f){return null}var e={dataType:"json",minChars:1,max:100,delay:300,cacheLength:0,formatItem:f.formatItem||c._FormatItem,parse:function(g){return(g||[]).map(function(h){return{data:h,value:h.Name}})}};if(f.locationtypes){e.extraParams={type:f.locationtypes}}return e};d.LocationAutoComplete=c})(b=a.ui||(a.ui={}))})(red||(red={}));var red;(function(a){var b;(function(d){var c=function(f){try{return JSON.parse(f)}catch(e){return null}};d.SafeJsonParse=c})(b=a.utils||(a.utils={}))})(red||(red={}));var red;(function(b){var a;(function(c){var d=function(){};d.GetExceptionMessages=function(f,e,h){var g={};h=h!==true?false:true;if(f&&f.responseText){g=b.utils.SafeJsonParse(f.responseText)||{messages:[]};if(g.Message&&(!g.messages||!g.messages.length||g.messages.length<=0)){g.messages=[g.Message]}}if(g.messages.length<=0&&e){g.messages=[e]}if(h===false){g.messages=(g.messages||[]).map(function(i){return i.replace(/[0-9a-z.]+:/i,"")})}return g.messages};d.Ajax=function(e){e.type=e.type||"POST";e.contentType=e.contentType||"application/json; charset=utf-8";e.dataType=e.dataType||"json";if(e.data&&typeof e.data!="string"&&e.contentType.indexOf("form")<=0){e.data=JSON.stringify(e.data)}return $.ajax(e)};c.WebApiHelper=d})(a=b.net||(b.net={}))})(red||(red={}));function SearchSummary(){var L={};L.remove=LanguagePlugin.replace("Remove","Remove");L.nearby=LanguagePlugin.replace("Nearby","Nearby");L.addLocationAbove=LanguagePlugin.replace("Add a location above","Add a location above");L.addLocationToStart=LanguagePlugin.replace("Add a location to get started","Add a location to get started");L.plusMoreLocations=LanguagePlugin.replace("Plus more locations","Plus more locations");L.clickForMoreChoices=LanguagePlugin.replace("Click on this location to see more choices.","Click on this location to see more choices.");L.Price=LanguagePlugin.replace("Price","Price");L.Beds=LanguagePlugin.replace("Beds","Beds");L.MaxBeds=LanguagePlugin.replace("Max Beds","Max Beds");L.Baths=LanguagePlugin.replace("Baths","Baths");L.SqFootage=LanguagePlugin.replace("Sq Footage","Sq Footage");L.Acreage=LanguagePlugin.replace("Acreage","Acreage");L.SqMetre=LanguagePlugin.replace("Sq Metre","Sq Metre");L.OpenHouseDates=LanguagePlugin.replace("Open House Dates","Open House Dates");L.BuiltAfter=LanguagePlugin.replace("Built After","Built After");L.BuiltBefore=LanguagePlugin.replace("Built Before","Built Before");L.YearBuilt=LanguagePlugin.replace("Year built","Year Built");L.DaysonMarket=LanguagePlugin.replace("Days on Market","Days on Market");L.Street=LanguagePlugin.replace("Street","Street");L.City=LanguagePlugin.replace("City","City");L.State=LanguagePlugin.replace("State","State");L.Zip=LanguagePlugin.replace("Zip","Zip");L.ListingNumber=LanguagePlugin.replace("Listing Number","Listing Number");L.Soldwithin=LanguagePlugin.replace("Sold within","Sold within");L.Remarks=LanguagePlugin.replace("Remarks","Remarks");L.Zoning=LanguagePlugin.replace("Zoning","Zoning");L.HighSchool=LanguagePlugin.replace("High School","High School");L.MiddleSchool=LanguagePlugin.replace("Middle School","Middle School");L.ElementarySchool=LanguagePlugin.replace("Elementary School","Elementary School");L.miles=LanguagePlugin.replace("miles","miles");L.kms=LanguagePlugin.replace("kms","kms");var b,a={},i=false,n=[],g=true,j=true,k=true,f=[],m=[],d={},c=true,h=[{name:"Criteria/MinPrice|Criteria/MaxPrice",format:L.Price+": {Criteria/MinPrice} - {Criteria/MaxPrice}"},{name:"Criteria/MinMortgagePayment|Criteria/MaxMortgagePayment",format:"Est. Mortgage Payment: {Criteria/MinMortgagePayment} - {Criteria/MaxMortgagePayment}"},{name:"Criteria/MinBedrooms",format:L.Beds+": {Criteria/MinBedrooms}"},{name:"Criteria/MaxBedrooms",format:L.MaxBeds+": {Criteria/MaxBedrooms}"},{name:"Criteria/MinBathrooms",format:L.Baths+": {Criteria/MinBathrooms}"},{name:"Criteria/SquareFootage|Criteria/MaxSquareFootage",format:L.SqFootage+": {Criteria/SquareFootage} - {Criteria/MaxSquareFootage}"},{name:"Criteria/SquareMetre|Criteria/MaxSquareMetre",format:L.SqMetre+": {Criteria/SquareMetre} - {Criteria/MaxSquareMetre}"},{name:"Criteria/MinAcreage|Criteria/MaxAcreage",format:L.Acreage+": {Criteria/MinAcreage} - {Criteria/MaxAcreage}"},{name:"Criteria/City|Criteria/ZipCodeAdvanced",format:"{Criteria/City} - {Criteria/ZipCodeAdvanced}"},{name:"Criteria/OpenHouseStartDtm|Criteria/OpenHouseStopDtm",format:L.OpenHouseDates+": <LocalizedDate>{Criteria/OpenHouseStartDtm}</LocalizedDate> - <LocalizedDate>{Criteria/OpenHouseStopDtm}</LocalizedDate>"},{name:"Criteria/MinYearBuilt",format:L.BuiltAfter+": {Criteria/MinYearBuilt}"},{name:"Criteria/MaxYearBuilt",format:L.BuiltBefore+": {Criteria/MaxYearBuilt}"},{name:"Criteria/CumulativeDaysOnMarket",format:L.DaysonMarket+": {Criteria/CumulativeDaysOnMarket}"},{name:"Criteria/AS_StreetName",format:L.Street+": {Criteria/AS_StreetName}"},{name:"Criteria/AS_City",format:L.City+": {Criteria/AS_City}"},{name:"Criteria/AS_StateOrProvinceCode",format:L.State+": {Criteria/AS_StateOrProvinceCode}"},{name:"Criteria/AS_ZipCodeAdvanced",format:L.Zip+": {Criteria/AS_ZipCodeAdvanced}"},{name:"Criteria/AS_FilterByAddress",format:"{Criteria/AS_FilterByAddress}"},{name:"Criteria/ListingNumber",format:L.ListingNumber+": {Criteria/ListingNumber}"},{name:"Criteria/SoldDate",format:L.Soldwithin+": {Criteria/SoldDate}"},{name:"Criteria/PublicRemarks",format:L.Remarks+": {Criteria/PublicRemarks}"},{name:"Criteria/AssociationFee",format:"HOA: {Criteria/AssociationFee}"},{name:"Criteria/Zoning",format:L.Zoning+": {Criteria/Zoning}"},{name:"Criteria/HighSchool",format:L.HighSchool+": {Criteria/HighSchool}"},{name:"Criteria/MiddleSchool",format:L.MiddleSchool+": {Criteria/MiddleSchool}"},{name:"Criteria/ElementarySchool",format:L.ElementarySchool+": {Criteria/ElementarySchool}"}];function y(){var e={};e.basicSearch="#basicSearch, #advancedSearch";e.advancedSearch="#basicSearch, #advancedSearch";if(e[b]){return e[b]}return"#"+b}function x(){return a[b]}var l={};function F(e){if(typeof(e)=="undefined"||e==""){return""}if(l[e]){return l[e]}l[e]=$("label[for='"+e+"']:first",x()).text();return l[e]}function G(ab){var e=$(ab).parents("label").first();return e.length===1&&e.text()?e.text().trim():""}function z(ac){var e=F(ac.id);if(e!=""){return e}e=G(ac);if(e!==""){return e}var ab=ac.nextSibling;while(ab){var ad=jQuery.trim(ab.nodeType!=1?ab.nodeValue:$(ab).text());if(ad!=""){return ad}ab=ab.nextSibling}return""}function H(e){var ab=$(e).parent().text();if(ab!=""){ab=jQuery.trim(ab);ab=jQuery.trim(ab.substr(0,ab.indexOf(":")));return ab}return""}function D(af){var ae="";var ab=$(af).closest(".featureListBox");if(ab.length>0){var ac=ab[0].id;if(ac.indexOf("feature_")!=-1){var ad=ac.substring(ac.indexOf("_")+1);var e=$("select[name='dd_Features']",x());if(e.length===0){e=$("select.featuresdd",x())}if(e.length===0){e=$("#mapsearch-criteria-features",x())}if(e.length>0){var ag=parseInt(ad,10);if(e[0].options[ag]!=null&&typeof e[0].options[ag]!=="undefined"){ae=e[0].options[ag].text}}}}return ae}function E(ad){switch(ad.type){case"text":return ad.value;case"select-one":if(ad.name=="Criteria/ListingTypeID"){i=true;var ai=$("#propertyType_"+ad.selectedIndex+" input:checked:enabled",x());return ai.length===0?ad.options[ad.selectedIndex].text:""}var ah="";if(ad.name.indexOf("Groups/Group_")==0){ah=H(ad)}if(ah.length===0&&typeof $(ad).data("search-format-format")==="undefined"){var ab=$("label[for='"+ad.id+"']");if(ab.length){ah=ab.first().text()}}if(ah!=""&&ah.indexOf(":")===-1){ah+=": "}return ad.value==""?"":ah+ad.options[ad.selectedIndex].text;case"checkbox":case"radio":var ae=z(ad);if(ae===""){return ae}if(ad.name==="Criteria/PropertyTypeID"||ad.name==="Criteria/ListingTypePropertyTypeID"){var e=$("select[name='Criteria/ListingTypeID']",x());if(e.length>0){var af=e[0];var ag=af.options[af.selectedIndex].text;if(ag!==""&&j){ae=ag+": "+ae}}}else{if(ad.name==="Criteria/Status"){if(j&&!Search.isV3()){ae="Status: "+ae}}else{if(ad.name.indexOf("Groups/Group_")!=-1){var ac=D(ad);if(ac!==""&&j){ae=ac+": "+ae}}}}return ae}return""}function v(e){if(!window.localizedDateFormat){return e}if(typeof(e)=="string"){e=new Date(e)}return GetLocalizedDate(window.localizedDateFormat,e.getMonth()+1,e.getDate(),e.getFullYear())}function o(e){while(match=/<LocalizedDate>(.*?)<\/LocalizedDate>/gi.exec(e)){e=e.replace(match[0],v(match[1]))}return e}function C(ak){var ah={name:"",text:"",value:ak.value},ag=$.extend([],h),al=false,ac=B(ak.name,ak.value,ak.id);if(ac){return{name:ac.fieldName,text:ac.fieldText,value:ac.fieldVal}}if(Search.isV2()){$.each(ag,function(am,an){if(an.format==="Price: {Criteria/MinPrice} - {Criteria/MaxPrice}"){an.format="{Criteria/MinPrice} - {Criteria/MaxPrice}"}})}if(Search.isV3()){$.each(ag,function(am,an){if(an.name==="Criteria/MinYearBuilt"||an.name==="Criteria/MaxYearBuilt"){an.name="Criteria/MinYearBuilt|Criteria/MaxYearBuilt";an.format=L.YearBuilt+": {Criteria/MinYearBuilt} - {Criteria/MaxYearBuilt}"}})}if($(ak).data("search-format-name")&&$(ak).data("search-format-format")){ag.unshift({name:$(ak).data("search-format-name"),format:$(ak).data("search-format-format")});al=true}for(var ab=0;ab<ag.length;ab++){var ad=ag[ab];if(ak.name&&ad.name.indexOf(ak.name)!=-1){var af=ad.name.split("|");var ai=ad.format;for(var aj=0;aj<af.length;aj++){var ae=af[aj];var e=al?$(ak):$("select[name='"+ae+"'],:input[name='"+ae+"']",x());if(e.length>0){ai=ai.replace("{"+ae+"}",E(e[0]))}n.push(ae)}ai=o(ai);ah.name=ad.name;ah.text=ai.replace(/(((-|\/) {[\w/]+}(.)*)|({[\w/]+}(.)*(-|\/) ))/gi,"");ah.value=$(ak).is(":checkbox")?ak.value:$.map(af,function(am){if(am==="HardCodedCriterion"||am==="ExtendedCriterion"){return $(ak).val()}return $('#mapsearch-container [name="'+am+'"]').val()}).join("|");break}}return ah}function A(ad){if(!ad){return""}var e="remove-criteria";if(Search.isV2()){e+=" icon-remove"}if(ad.indexOf("|")!=-1){ad=ad.split("|")[0]}var ac=$("*[name='"+ad+"']");var ab;if(ac.length>0){ab=ac[0]}if(ab&&ab.nodeName.toLowerCase()==="select"&&$("option[value='']",$(ab)).length==0){e=""}return e}function J(){var ab=$.map(searchLocation.getItemsForSummary(),function(ac){return $.extend(ac,{enabled:true})}),e=$.grep(f,function(ac){return ac.fieldName==="Criteria/Location"});$.each(e,function(ae,ac){var ad=$.grep(ab,function(af){return af.fieldVal===ac.fieldVal});if(ad.length){O(ac)}else{ab.push(ac.criteriaAll)}});return M(ab)}function M(e){$.each(e,function(ad,ae){var ac=$.grep(m,function(af){return af.value===ae.value});if(!ac.length){m.push($.extend({orderedTimestamp:new Date().getTime()},ae))}});var ab=[];$.each(m,function(ad,ae){var ac=$.grep(e,function(af){return ae.value===af.value});if(ac.length){ab.push(ac[0])}});return ab}function I(){var ad=[];n=[];if(Search.isV2()){j=false;k=false}var af=function(){var ap=true;var at=readCookie("rBW-PreferredUnits");if(at=="US"&&(this.name=="Criteria/SquareMetre"||this.name=="Criteria/MaxSquareMetre")){return}if(at=="Metric"&&(this.name=="Criteria/SquareFootage"||this.name=="Criteria/MaxSquareFootage")){return}if($(this).hasClass("r-criteria-enabled")){return}if(this.id==="Features"||this.id==="mapsearch-criteria-features"||(this.type==="select-one"&&this.name.indexOf("Groups/Group_")!=-1)){return}if(this.name==="Criteria/PropertyTypeID_X"||this.name=="Criteria/ListingTypePropertyTypeID_X"){return}if($(this).data("search-summary-exclude")=="exclude"){return}if($(this).attr("exclude-from-summary")=="exclude"){return}if($.inArray(this.name,n)!=-1){return}var am=E(this),aj=this.name,an=$(this).is(":checkbox"),ai=B(aj,this.value,this.id);if(an&&!$(this).is(":checked")&&!(ai)){return}if(am===""&&!ai){return}else{if(ai){ap=false;am=ai.fieldText}}if(am==="Price:  - "){return}if(this.id==="criteria-drivetime-duration"||this.id==="criteria-drivetime-tod"){return}if(Search.isV3()&&am.toLowerCase()==="any"){return}var ak=C(this);if(!ap){ak.text=ai.fieldText}if(ak&&ak.text!==""){var ao=false,ar=this,ah=ap?ak.value:ai.fieldVal;for(var al=0;al<ad.length;al++){var ag=ad[al];if(ar.name===ag.name&&ah===ag.value&&ar.id===ag.id){ao=true;break}}if(ao){return}ad.push({enabled:ap,text:ak.text,id:this.id,name:ak.name,value:ap?ak.value:ai.fieldVal})}else{if(j||this.type==="text"){var aq="";if(this.id&&am.indexOf(":")===-1){aq=F(this.id)}if(aq!==""&&aq!==am){am=aq+": "+am}}if(this.name=="Criteria/LocationBox"||(this.name=="Criteria/ListingTypeID"&&!Search.isV3())){return}var ao=false,ar=this,ah=ap?ak.value:ai.fieldVal;for(var al=0;al<ad.length;al++){var ag=ad[al];if(ar.name===ag.name&&ah===ag.value&&ar.id===ag.id){ao=true;break}}if(ao){return}ad.push({enabled:ap,text:am,id:this.id,name:this.name,value:ap?ak.value:ai.fieldVal})}};$("select, input[type='text']:enabled, input[type='checkbox']:enabled",x()).each(af);if(Search.isV3()){$("input[type='radio']:checked",x()).each(af);$("select, input[type='text']:enabled, input[type='checkbox']:enabled, input[type='radio']:checked",$("#search-criteria-form-filters-v3")).each(af)}if(typeof window.searchSummaryOptions!=="undefined"&&window.searchSummaryOptions["showListingType"]){ad.push({enabled:true,displayOnly:true,text:$("#ListingType option:selected").text()})}var ab=$('[name="Criteria/PropertyTypeID"]:disabled:checked');if(ab.length){var e=$.map(ab,function(){return{enabled:true,displayOnly:true,text:E($('[name="Criteria/PropertyTypeID"]:disabled:checked')[0])}});ad=ad.concat(e)}var ae=[];var ac={};$.each(ad,function(ag,am){var ah=am.text;if(ah.indexOf(":")!==-1){var ai=ah.split(":");var ak=ai[0].trim();var al=ai[1].trim();if(ac[ak]){var aj=ac[ak];if(aj.text.indexOf(al)===-1){aj.text+=", "+al}}else{ac[ak]=am}}else{ae.push(am)}});$.each(ac,function(ag,ah){ae.push(ah)});return ae}function Q(ae){var e="<ul>";for(var ac=0;ac<ae.length;ac++){var ad=ae[ac];if(ad.text&&ad.text!==""){e+="<li";var ab=A(ad.name);if(ab&&ab.length>0){e+=" class='"+ab+"'"}e+=" fieldname='"+ad.name+"'";e+=" fieldval='"+escape(""+ad.value)+"'>"+ad.text+"</li>"}}e+="</ul>";return e}function p(e){return'<a href="#boolean-modal" class="r-boolean-location-button" data-location="'+e.dataLocation+'" data-toggle="modal">'+e.text+"</a>"}if(typeof savedSearchTypeId=="undefined"){savedSearchTypeId=0}var u=false;try{if(typeof rbw.context.enrolledInMarketWatch=="undefined"&&window.parent.rbw){u=window.parent.rbw.context.enrolledInMarketWatch}else{u=rbw.context.enrolledInMarketWatch}}catch(s){u=false}var K=savedSearchTypeId===1;var U=(function(ab,e){if(ab){window.mapOptions=window.mapOptions||{};window.mapOptions.showDrawingTools=false;setTimeout(function(){$(".button-save").html("Save Target Area");$("a[name='start-search-over']").hide();$("a[name='location-search-criteria']").html("CRITERIA").show();$("#criteria-location").hide();Search.setOptions({showDrawingTools:false})},100)}if(e){setTimeout(function(){if(!ab){$(".button-save").hide()}$(".button-clear").click(function(){$("a[name='location-search-criteria']").html("LOCATION");$("a[name='start-search-over']").show();$(".button-save").hide();Search.setOptions({showDrawingTools:true});$(".ms_panel_text").show();$("#r-location-summary-dropdown").show();$("#criteria-location").show();U.isTargetArea=false;Search.clearCriteria()});$(".nearby-areas-discover-container").hide();$("#r-location-summary-dropdown").hide();window.mapOptions=window.mapOptions||{};window.mapOptions.showDrawingTools=false},110)}return{isTargetArea:ab,enrolledInMarketWatch:e}})(K,u);this.TargetAreaSearch=U;function V(e){var ab=e;var ac=e.indexOf(":");if(ac>-1){ab=e.split(":")[0]}if(window.translations&&window.translations[ab]){return window.translations[ab]+e.substring(ac)}return e}function R(aj,av,aw){var ab="",e=function(ax){var aA="";if(ax.name=="Criteria/Location"){var ay=N(ax.value),az=searchLocation.getRootItem(ax.dataLocation);aA+=" data-location-criteria-all='"+escape($.toJSON(ax))+"'";aA+=" data-location-criteria-location-value='"+escape($.toJSON(az))+"'"}aA+=" fieldname='"+escape(ax.name)+"'";aA+=" fieldval='"+escape(""+ax.value)+"'";aA+=" fieldtext='"+escape(ax.text)+"'";if(ax.id){aA+=" fieldid='"+ax.id+"'"}if(Search.isV3()){aA+=' aria-label="'+escape(ax.text)+'"'}return aA};for(var ag=0;ag<aj.length;ag++){var ai=aj[ag];if(ai.text&&ai.text!==""){var ae="";if(U.isTargetArea&&(ai.type&&(ai.type.toLowerCase()==="city"||ai.type.toLowerCase()==="zip code"))){ai.displayOnly=true}if(av&&!ai.displayOnly){ae+='<input type="checkbox" class="r-criteria-enabled"';ae+=e(ai);if(ai.enabled){ae+=" checked"}ae+=" />"}var at="";if(!ai.displayOnly){at='<div title="'+LanguagePlugin.replace("Remove","Remove")+" "+ai.text.trim()+'"';var ad=A(ai.name);if(ad&&ad.length>0){at+=" class='"+ad+"'"}at+=e(ai);at+=">";at+="</div>"}var ac="",aq="";if(ai.name==="Criteria/MLSAgentIDs"){ac="Agent Search"}else{if(ai.name==="Criteria/MLSOfficeIDs"){ac="Office Search"}else{if(!U.isTargetArea&&ai.name==="Criteria/Location"&&(ai.type.toLowerCase()==="city"||ai.type.toLowerCase()==="zip code"||ai.type.toLowerCase()==="radius")){if(ai.isOr){var ar=/\([0-9.]+\s(\S+)\)/gi;if(ai.text.match(ar)){var au=readCookie("rBW-PreferredUnits");var am=readCookie("rBW-LocaleID");if(au=="US"){var ap="("+w(ai.data.split("~")[1])+" "+L.miles+")";var ao=ai.text.match(ar)[0];ai.text=ai.text.replace(ao,ap)}else{if(au=="Metric"){var ap=new Number(ai.data.split("~")[1]);if(!isNaN(ap)){var al="("+w(Math.round(ap*1.61))+" "+L.kms+")";var ao=ai.text.match(ar)[0];ai.text=ai.text.replace(ao,al)}}}}var an;an='<a href="#NearbyAreasPopup" title="'+L.clickForMoreChoices+'" role="button" class="criteria-location-nearbyareasbutton" data-toggle="modal" onclick="Search.OpenNearbyAreas(\''+ai.value+"', '"+ai.type+"', '"+ai.data+"');\">";an+=aw?L.nearby:ai.text;an+="</a>";if(aw){ac+=ai.text;aq+=an}else{ac+=an}}else{ac+=p(ai)}}else{if(ai.type!=null&&ai.type.toLowerCase()=="drivetime"){locVal=ai.data.split(",");fromToBit=locVal[2];fromToString="";if(fromToBit=="D"){fromToString="From"}else{if(fromToBit=="A"){fromToString="To"}}ac+=fromToString+": "+ai.text+" (Drive Time) | "+locVal[0]+" | "+locVal[1]+" min"}else{var ah=typeof ai.isNot==="undefined"||!ai.isNot;var ak=ah?V(ai.text):p(ai);if(ah&&Search.isV3()){ac+='<span class="criteria-location-plaintext" aria-label="'+escape(ak)+'">'+ak+"</span>"}else{ac+=ak}}}}}var af=ai.enabled?"enabled-criteria":"disabled-criteria";if(ai.type!=null&&ai.type.toLowerCase()=="drivetime"){ab+="<li class='criteria-drivetime "+af+"'>"}else{ab+='<li class="'+af+'">'}if(aw){ab+=aa("enable-toggle",ae);ab+=aa("label",ac);ab+=aa("nearby",aq);ab+=aa("remove-button",at)}else{ab+=ae;ab+=ac;ab+=at}ab+="</li>"}}return ab}function w(e){return Number(e).toLocaleString(window.localeLanguage)}function aa(e,ab){return'<div class="r-item-cell r-item-cell-'+e+'">'+ab+"</div>"}function P(){var ac=I(),af=J(),ab=function(am){if(am.length==0){var an=Search.isV3()||Search.isV2()?L.addLocationAbove:L.addLocationToStart;var al="<li>";al+=aa("enable-toggle","");al+=aa("label r-location-get-started btn-link",an);al+=aa("nearby","");al+=aa("remove-button","");return al+"</li>"}return""};if(Search.isV3()){var ag="<ul>";ag+=R(af,true,true);ag+=ab(af);ag+="</ul>";$("#search-summary-items").html(ag);$("#criteria-location-summary").html("<ul>"+R(ac,true)+"</ul>");var e=$("#location-criteria-list");var ah=R(af,true);e.html("<ul>"+ah+"</ul>");if(af.length>2){e.find("li").each(function(al){if(al>1){$(this).addClass("hide")}});e.find("ul").append('<li class="plus-more-locations"><button class="btn btn-link btn-show-all-locations" aria-controls="r-location-summary-dropdown" aria-expanded="false">'+L.plusMoreLocations+" ("+(af.length-2)+")</button></li>")}}else{if(Search.isV2()){var ag="<ul>";ag+=R(af,true,true);ag+=ab(af);ag+="</ul>";$("#search-summary-items").html(ag);$("#criteria-location-summary").html("<ul>"+R(ac,true)+"</ul>");var e=$("#location-criteria-list"),ah=R(af,true);e.html("<ul>"+ah+"</ul>");if(af.length>2){e.find("li").each(function(al){if(al>1){$(this).addClass("hide")}});e.find("ul").append('<li><button class="btn btn-link btn-show-all-locations">'+L.plusMoreLocations+" ("+(af.length-2)+")</button></li>")}}else{var ak="<ul>";ak+=R(af);ak+=R(ac);ak+="</ul>";$("#search-summary-items").html(ak);$("#criteria-location-summary").html("<ul>"+R(af,true,true)+ab(af)+"</ul>")}}Z(af);Y(ac);T(af);$(document).trigger("criteriasummaryrendered");if(document.cookie.indexOf("nad=1")<0&&af){$.each(af,function(){if(!U.isTargetArea&&(this.type=="radius"||this.type=="City"||this.type=="Zip Code")){$(".nearby-areas-discover-container").show();return}})}if(g&&rbw.context.branding=="RECo"&&rbw.context.useOfficeApi){if(af.length==1){var ad=af[0];var aj=ad.value;var ae=N(aj);var ai={op:"GetOfficesByOfficeRegion"};if(ae.type=="city"){ai.city=ae.name;if(ae.state!=null){ai.state=ae.state}}else{if(ae.type=="zip code"){ai.zipCode=ae.name}}if(typeof Search!=="undefined"){Search.searchOffices(ai)}}}if(Search.isCriteriaVisible()){$("#mapsearch-right-search-summary").show()}$("#search-summary-items .remove-criteria,.v1 #criteria-location-summary .remove-criteria, #location-criteria-list .remove-criteria").click(function(){q(this)});$(".v2 #criteria-location-summary .remove-criteria").click(function(al){q(this);al.stopPropagation()});$(".r-criteria-enabled").click(function(al){if(this.checked){t(this)}else{r(this)}al.stopPropagation()})}function S(e){b=e;if(!x()){a[e]=$(y())}}function Z(e){X(e,$("#r-location-summary-dropdown .dropdown-toggle"))}function Y(e){X(e,$(".r-more-button"))}function X(ad,e){var ac=$.grep(ad,function(ae){return ae.enabled}),ab=ac.length;if(ab){if(!e.length){return}if(!e.find(".r-badge-counter").length){e.append('<span class="r-badge-counter"></span>')}e.find(".r-badge-counter").html(ab);$(".search-criteria-uppertabs .active-selections .active-selections-badge").html(ab)}else{e.find(".r-badge-counter").remove();$(".search-criteria-uppertabs .active-selections .active-selections-badge").html("0")}}function T(ab){if(ab){var ad=$.map(ab,function(ae){return ae.enabled});var e=$.inArray(false,ad),ac=ad.length>0&&e===-1?true:false;$(".btn-select-all-locations").prop("checked",ac)}}function N(ab){var af="";var ad="";var ae="";var e=-1;var ac=ab.toLowerCase();if((e=ac.indexOf(" (city)"))>-1){af="city";ad=ab.substring(0,e-4);ae=ab.substr(e-2,2)}else{if((e=ac.indexOf(" (zip code)"))>-1){af="zip code";ad=ab.substring(0,e)}}return{type:af,name:ad,state:ae}}function B(ad,ae,af){var ag=$('[name="'+ad+'"]').is(":checkbox"),ab=$.grep(f,function(al){return al.fieldName.split("|")[0]===ad.split("|")[0]}),ah=ab.length>0,ac=function(al){return $.grep(ab,function(am){return am.fieldVal===al})},aj=ag||ad==="Criteria/Location",ai=ad==="HardCodedCriterion"||ad==="ExtendedCriterion",e=function(al){return $.grep(ab,function(am){return am.fieldId===al})};if(ai){var ak=e(af);if(ak.length){return ak[0]}return null}else{if(aj&&ac(ae).length){return ac(ae)[0]}else{if(!aj&&ah){return ab[0]}}}return null}function O(e){f=$.grep(f,function(ab){return ab.fieldName!==e.fieldName||ab.fieldVal!==e.fieldVal})}function t(af){var ad=$(af),ah=unescape(ad.attr("fieldname")),ai=unescape(ad.attr("fieldval")),ag=ad.attr("fieldid"),ae=B(ah,ai,ag),am=ah==="HardCodedCriterion"||ah==="ExtendedCriterion";var e=$('#mapsearch-container [name="'+ah+'"]');if(ae){O(ae)}if(am){e=e.find("#"+ag)}if(ah==="Criteria/Location"){$(document).trigger("enableCriteriaLocationChange",ae)}else{if(e.is(":checkbox")){e.each(function(){var an=$(this);if(an.val()===ai&&!an.is(":checked")){an.click()}})}else{if(e.is("select")){e.find("option").each(function(){this.selected=(this.value===ai)});e.trigger("change")}else{var ak=ah.split("|"),al=ai.split("|"),ac=null;for(var aj=0;aj<ak.length;aj++){var ab=$('#mapsearch-container [name="'+ak[aj]+'"]');if(ab.length){ab.val(al[aj]);ac=ab}if(ac&&aj==ak.length-1){ac.trigger("change")}}}}}}function r(ad){var e=$(ad),af=unescape(e.attr("fieldname")),ag=unescape(e.attr("fieldtext")),ah=unescape(e.attr("fieldval")),ae=e.attr("fieldId");var ac={fieldName:af,fieldText:ag,fieldVal:ah,fieldId:ae};if(af==="Criteria/Location"){var ab=$.parseJSON(unescape(e.attr("data-location-criteria-all"))),ai=$.parseJSON(unescape(e.attr("data-location-criteria-location-value")));ab.enabled=false;ac=$.extend(ac,{criteriaAll:ab,locationData:ai})}f.push(ac);W(af,ah)}function q(ac){var e=$(ac),ae=unescape(e.attr("fieldname")),af=unescape(e.attr("fieldval")),ad=e.attr("fieldid"),ab=B(ae,af,ad);if(ab){O(ab)}W(ae,af)}function W(e,ab){$(document).trigger("removecriteria",[{name:e,val:ab}])}this.load=function(ab){S(ab);var e=document.all?0:1,ac=true;$(document).bind("criteriachange",function(ad,ae){g=ac;ac=false;if(!e){e=1;return}S(ae.activeTab);P()});$(document).bind("criteriaitemchange",function(ad,ae){P()});$(document).on("click","#r-location-summary-dropdown",function(ad){ad.stopPropagation();$(this).find('[data-toggle="dropdown"]').parent().removeClass("open")});$("#criteria-location #criteria-location-summary").remove();$(document).on("click",".btn-clear-all-locations",function(ad){$("#r-location-summary-dropdown .r-criteria-enabled:enabled").each(function(){r(this)});ad.stopPropagation()});$(document).on("click",".btn-delete-all-locations",function(){$("#r-location-summary-dropdown .remove-criteria").each(function(){q(this)})});$(document).on("click",".btn-select-all-locations",function(ae){var ad=$(this).is(":checked");if(ad!==c){c=ad;if($(this).is(":checked")){$("#r-location-summary-dropdown .r-criteria-enabled:not(:checked)").each(function(){t(this)})}else{$("#r-location-summary-dropdown .r-criteria-enabled:enabled").each(function(){r(this)})}}ae.stopPropagation()});$(document).on("click",".btn-show-all-locations",function(ad){if(Search.isV3()){var ae=$("#r-location-summary-dropdown").toggleClass("open").hasClass("open");$(this).attr("aria-expanded",ae);if(ae){$(document).trigger("open-show-all-locations");$("input:visible,select:visible","#r-location-summary-dropdown").first().focus()}}else{$("#r-location-summary-dropdown").addClass("open")}ad.stopPropagation()});$(document).on("click",".btn-close-all-locations",function(ad){ad.preventDefault();$("#r-location-summary-dropdown").removeClass("open");$(".btn-show-all-locations").attr("aria-expanded",false)});$(document).on("click",".r-location-get-started",function(){if(Search.isV3()){$("#r-location-summary-dropdown").removeClass("open")}$("#criteria-location-input").focus()})}};if (window.rbw === undefined) { window.rbw = {}; }
if (window.rbw.kc === undefined) { window.rbw.kc = {}; }

window.rbw.kc.keycloak = (function () {

    var keycloak = null,
        anonymousToken = null,
        anonymousTokenExpiration = 0,
        initPromise = null,
        instance = {};

    var KC_SESSION_KEY = "rbw.kc",
        KC_ANONYMOUS_OP = "getAnonymousAccessToken";

    function getSessionId(token) {
        if (token.session_state === undefined || token.session_state === null) {
            return "";
        }

        var iss = token.iss;
        return iss.substr(iss.lastIndexOf("/") + 1, (iss.length - iss.lastIndexOf("/")) - 1) + "/" + token.sub + "/" + token.session_state;
    }

    function decodeToken(str) {
        str = str.split(".")[1];

        str = str.replace("/-/g", "+");
        str = str.replace("/_/g", "/");
        switch (str.length % 4) {
            case 0:
                break;
            case 2:
                str += "==";
                break;
            case 3:
                str += "=";
                break;
            default:
                throw "Invalid token";
        }

        str = (str + "===").slice(0, str.length + (str.length % 4));
        str = str.replace(/-/g, "+").replace(/_/g, "/");

        str = decodeURIComponent(escape(atob(str)));

        str = JSON.parse(str);
        return str;
    }

    function retrieveTokens() {
        try {
            var tokens = rbw.storage.getSessionItem(KC_SESSION_KEY);
            if (tokens && tokens.length > 0) {
                return JSON.parse(atob(tokens));
            }
        } catch (err) {
            rbw.utils.reportError([
                "Failed retrieving session data",
                "File: " + window.location.href,
                "Data: " + JSON.stringify(err)
            ]);
        }
        return { a: null, i: null, r: null };
    }

    function clearTokens() {
        rbw.storage.removeSessionItem(KC_SESSION_KEY);
    }

    function storeTokens() {
        rbw.storage.setSessionItem(KC_SESSION_KEY, btoa(JSON.stringify({
            a: keycloak.token,
            i: keycloak.idToken,
            r: keycloak.refreshToken
        })));
    }

    function getAnonymousToken() {
        return new Promise(function (resolve, reject) {
            //If the token is valid and is not due to expire in the next 30s, use it. Otherwise, get a new one.
            if (anonymousToken !== null && rbw.Utils.dateDiff(new Date(), new Date(anonymousTokenExpiration), 'SECOND') > 30) {
                resolve(anonymousToken);
            } else {
                Promise.resolve(rbw.api(KC_ANONYMOUS_OP))
                    .then(function (token) {
                        try {
                            anonymousToken = token;
                            anonymousTokenExpiration = decodeToken(token).exp * 1000;
                            resolve(anonymousToken);
                        } catch (err) {
                            anonymousToken = null;
                            anonymousTokenExpiration = 0;
                            reject("Error decoding anonymous token, token not available.");
                        }
                    })
                    .catch(function () {
                        reject("Error getting auth token.");
                    });
            }
        });
    }

    instance.init = function (options) {
        initPromise = new Promise(function (resolve, reject) {
            if (options.useIdentityService && window.location.pathname.indexOf("/owin/") === -1) {
                $.ajax({
                    url: options.kcUrl + "/js/keycloak.js",
                    dataType: "script",
                    cache: true
                }).done(function () {
                    var tokens = retrieveTokens();
                    keycloak = Keycloak({
                        url: options.kcUrl,
                        realm: options.realm,
                        clientId: options.clientId
                    });
                    keycloak.onAuthLogout = instance.logout;
                    keycloak.init({ onLoad: "check-sso", token: tokens.a, idToken: tokens.i, refreshToken: tokens.r })
                        .success(function (authenticated) {
                            if (authenticated) {
                                storeTokens();
                            } else {
                                clearTokens();
                            }
                            resolve(instance);
                        })
                        .error(function (err) {
                            rbw.utils.reportError([
                                "Failed initializing Keycloak",
                                "File: " + window.location.href,
                                "Data: " + JSON.stringify(err)
                            ]);
                            reject(instance);
                        });
                });
            } else {
                resolve(instance);
            }
        });
        return initPromise;
    };

    instance.ready = function () {
        return new Promise(function (resolve, reject) {
            if (initPromise === null) {
                reject("init must be called before ready");
            }
            resolve(initPromise);
        });
    };

    instance.login = function () {
        window.location.href = "/login";
    };

    instance.logout = function () {
        window.location.href = "/logout";
    };

    instance.handleSession = function (serverAuthenticated, serverSessionId) {
        if (keycloak === undefined || keycloak === null) {
            return;
        }

        // If public pages then if not logged into keycloak then log out of session and continue to the site.
        if (!keycloak.authenticated && serverAuthenticated) {
            instance.logout();
        }

        // Verify if the session is different.
        if ((keycloak.authenticated && serverAuthenticated && serverSessionId !== getSessionId(keycloak.idTokenParsed)) ||
            (keycloak.authenticated && !serverAuthenticated)) {
            instance.login();
        }
    };

    instance.getToken = function getToken() {
        return new Promise(function (resolve, reject) {
            if (keycloak && keycloak.authenticated) {
                keycloak.updateToken(30)
                    .success(function () {
                        resolve(keycloak.token);
                    })
                    .error(function () {
                        clearTokens();
                        reject("Failed to refresh the token, or the session has expired");
                    });
            }
            resolve(getAnonymousToken());
        });
    };

    return instance;
}());if(typeof window.rbw==="undefined"){window.rbw={}}if(typeof window.rbw.geolocation==="undefined"){window.rbw.geolocation={}}(function(){var a={maximumAge:30000,timeout:30000,enableHighAccuracy:false};var f="iploc";if(navigator.geolocation){if(typeof navigator.permissions!=="undefined"){navigator.permissions.query({name:"geolocation"}).then(function(g){if(g.state!=="denied"){window.rbw.geolocation.browserSupportsGeolocation=true}})}else{if(/((?!chrome|android).)*safari/i.test(navigator.userAgent.toLowerCase())){window.rbw.geolocation.browserSupportsGeolocation=false}else{window.rbw.geolocation.browserSupportsGeolocation=true}}}else{window.rbw.geolocation.browserSupportsGeolocation=false}function d(k,h){if(typeof h!=="function"){rbw.utils.reportError(["Error: the expected callback function was not specified."],false,rbw.utils.logType.warning);return}if(typeof k==="undefined"||!k){k=null}var i=readCookie(f);var l=null;if(k===null&&typeof i!=="undefined"&&i!=null){try{l=$.parseJSON(i)}catch(j){rbw.utils.reportError(j,false,rbw.utils.logType.warning)}}if(l==null){var g=Utils.AppPath+"/include/ajax/api.aspx?op=GetIPLocation&ipAddress={0}".format(!k?"":k);$.ajax({dataType:"json",url:g,success:function(m){if(m&&m.City&&m.State){createCookie(f,$.toJSON(m),1)}h(m)}})}else{h(l)}}function b(){eraseCookie(f)}function e(h){if(typeof h==="undefined"||h===null||!h.City||!h.State){return null}var g=h.City;var j=h.State;if(!rbw.utils.isState(j)){j=rbw.utils.getStateCodeFromName(j)}var i={};i.name=g+", "+j+" (City)";i.type="City";i.value=g+", "+j;return i}function c(j,h,i){i=$.extend({},a,i);var g=function(k){window.rbw.geolocation.browserSupportsGeolocation=false;rbw.utils.reportError([k],false,rbw.utils.logType.warning);if(typeof h==="function"){h.apply(null,arguments)}};navigator.geolocation.getCurrentPosition(j,g,i)}window.rbw.geolocation.getCurrentPosition=c;window.rbw.geolocation.getIpLocationAsync=d;window.rbw.geolocation.eraseIpLocationCookie=b;window.rbw.geolocation.getLocationFromIpLocation=e})();
$(window).on("load", function () {
    var qs = new Querystring();
    var findLocation = qs.get('FindLocation');

    //this script is included in all pages. Hence continue only when location is queried.
    if (!findLocation)
        return;

    var forwardUrl = qs.get('ForwardUrl');

    if (!forwardUrl) {
        //There is no point in querying the browser's location if is no URL to pass the values to.
        return;
    }

    function successCallback(position) {
        var locationQS = {
            lat: position.coords.latitude,
            long: position.coords.longitude
        };

        var redirectUrl = Querystring.append(forwardUrl, locationQS);

        //Use location.replace to prevent getting back to this page using browser back button.
        document.location.replace(redirectUrl);
    }

    function errorCallback(error) {
        var message = "";
        // Check for known errors
        switch (error.code) {
            case error.PERMISSION_DENIED:
                message = "This website does not have permission to use the Geolocation API.";
                break;
            case error.POSITION_UNAVAILABLE:
                message = "The current position could not be determined.";
                break;
            case error.PERMISSION_DENIED_TIMEOUT:
                message = "The current position could not be determined within the specified timeout period.";
                break;
        }
        // If it's an unknown error, build a message that includes
        // information that helps identify the situation, so that
        // the error handler can be updated.
        if (message == "") {
            var errorCode = error.code.toString();
            message = "The position could not be determined due to an unknown error (Code: " + errorCode + ").";
        }

        forwardUrl = Querystring.append(forwardUrl, { LocationFound: 'false' });
        document.location.replace(forwardUrl);
    }

    rbw.geolocation.getCurrentPosition(successCallback, errorCallback, {
        enableHighAccuracy: staggeredAccuracy === true,
        timeout: 5000
    });
});
